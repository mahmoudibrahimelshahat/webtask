"use strict";var OU=Object.defineProperty,PU=Object.defineProperties,NU=Object.getOwnPropertyDescriptors,IR=Object.getOwnPropertySymbols,RU=Object.prototype.hasOwnProperty,kU=Object.prototype.propertyIsEnumerable,DR=(et,be,N)=>be in et?OU(et,be,{enumerable:!0,configurable:!0,writable:!0,value:N}):et[be]=N,TR=(et,be)=>{for(var N in be||(be={}))RU.call(be,N)&&DR(et,N,be[N]);if(IR)for(var N of IR(be))kU.call(be,N)&&DR(et,N,be[N]);return et},AR=(et,be)=>PU(et,NU(be));(self.webpackChunkwebtask=self.webpackChunkwebtask||[]).push([[179],{2011:(et,be,N)=>{N.d(be,{hO:()=>He,xv:()=>ge,Dh:()=>ae,GT:()=>fe,cc:()=>ke,on:()=>H,pX:()=>oe});var h=N(5e3),L=N(127),P=N(5813);et=N.hmd(et);const ie=["ngOnDestroy"],oe=(De,Ke,Ze,Fe={})=>new Proxy(De,{get:(Pe,Ce)=>Ze.runOutsideAngular(()=>{var Ge;if(De[Ce])return(null===(Ge=null==Fe?void 0:Fe.spy)||void 0===Ge?void 0:Ge.get)&&Fe.spy.get(Ce,De[Ce]),De[Ce];if(ie.indexOf(Ce)>-1)return()=>{};const ne=Ke.toPromise().then(he=>{const Ie=he&&he[Ce];return"function"==typeof Ie?Ie.bind(he):Ie&&Ie.then?Ie.then(K=>Ze.run(()=>K)):Ze.run(()=>Ie)});return new Proxy(()=>{},{get:(he,Ie)=>ne[Ie],apply:(he,Ie,K)=>ne.then(re=>{var se;const ye=re&&re(...K);return(null===(se=null==Fe?void 0:Fe.spy)||void 0===se?void 0:se.apply)&&Fe.spy.apply(Ce,K,ye),ye})})})}),fe=(De,Ke)=>{Ke.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Fe=>{Object.defineProperty(De.prototype,Fe,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Fe))})})};class de{constructor(Ke){return Ke}}const ae=new h.OlP("angularfire2.app.options"),ge=new h.OlP("angularfire2.app.name");function H(De,Ke,Ze){const Pe="object"==typeof Ze&&Ze||{};Pe.name=Pe.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Ge=L.Z.apps.filter(ne=>ne&&ne.name===Pe.name)[0]||Ke.runOutsideAngular(()=>L.Z.initializeApp(De,Pe));try{JSON.stringify(De)!==JSON.stringify(Ge.options)&&B("error",`${Ge.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ne){}return new de(Ge)}const B=(De,...Ke)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[De](...Ke)},Q={provide:de,useFactory:H,deps:[ae,h.R0b,[new h.FiY,ge]]};let He=(()=>{class De{constructor(Ze){L.Z.registerVersion("angularfire",P.q4.full,"core"),L.Z.registerVersion("angularfire",P.q4.full,"app-compat"),L.Z.registerVersion("angular",h.q4F.full,Ze.toString())}static initializeApp(Ze,Fe){return{ngModule:De,providers:[{provide:ae,useValue:Ze},{provide:ge,useValue:Fe}]}}}return De.\u0275fac=function(Ze){return new(Ze||De)(h.LFG(h.Lbi))},De.\u0275mod=h.oAB({type:De}),De.\u0275inj=h.cJS({providers:[Q]}),De})();function ke(De,Ke,Ze,Fe,Pe){const[,Ce,Ge]=globalThis.\u0275AngularfireInstanceCache.find(ne=>ne[0]===De)||[];if(Ce)return function Oe(De,Ke){try{return De.toString()===Ke.toString()}catch(Ze){return De===Ke}}(Pe,Ge)||(Ee("error",`${Ke} was already initialized on the ${Ze} Firebase App with different settings.${tt?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Pe,was:Ge})),Ce;{const ne=Fe();return globalThis.\u0275AngularfireInstanceCache.push([De,ne,Pe]),ne}}const tt=!!et.hot,Ee=(De,...Ke)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[De](...Ke)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(et,be,N)=>{N.d(be,{q4:()=>vs,iC:()=>ws,HU:()=>Wo,vb:()=>_c,JM:()=>yu,u3:()=>al});var h=N(5e3),L=N(5867),P=N(5861),ie=N(9681),oe=N(2090),fe=N(4859),de=N(1877),ae=N(8766);const ge="@firebase/installations",H="0.5.9",Q=`w:${H}`,He="FIS_v2",Ke=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(I){return I instanceof oe.ZR&&I.code.includes("request-failed")}function Fe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Pe(I){return{token:I.token,requestStatus:2,expiresIn:re(I.expiresIn),creationTime:Date.now()}}function Ce(I,D){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,P.Z)(function*(I,D){const F=(yield D.json()).error;return Ke.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function ne({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function he(I,{refreshToken:D}){const O=ne(I);return O.append("Authorization",function se(I){return`${He} ${I}`}(D)),O}function Ie(I){return K.apply(this,arguments)}function K(){return(K=(0,P.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function re(I){return Number(I.replace("s","000"))}function ye(I,D){return le.apply(this,arguments)}function le(){return(le=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:O}){const F=Fe(I),J=ne(I),ce=D.getImmediate({optional:!0});if(ce){const wt=yield ce.getHeartbeatsHeader();wt&&J.append("x-firebase-client",wt)}const Je={method:"POST",headers:J,body:JSON.stringify({fid:O,authVersion:He,appId:I.appId,sdkVersion:Q})},Dt=yield Ie(()=>fetch(F,Je));if(Dt.ok){const wt=yield Dt.json();return{fid:wt.fid||O,registrationStatus:2,refreshToken:wt.refreshToken,authToken:Pe(wt.authToken)}}throw yield Ce("Create Installation",Dt)})).apply(this,arguments)}function Ve(I){return new Promise(D=>{setTimeout(D,I)})}const Xt=/^[cdef][\w-]{21}$/;function We(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const O=function cn(I){return function ct(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Xt.test(O)?O:""}catch(I){return""}}function Pn(I){return`${I.appName}!${I.appId}`}const mn=new Map;function sn(I,D){const O=Pn(I);In(O,D),function ji(I,D){const O=function Sn(){return!mr&&"BroadcastChannel"in self&&(mr=new BroadcastChannel("[Firebase] FID Change"),mr.onmessage=I=>{In(I.data.key,I.data.fid)}),mr}();O&&O.postMessage({key:I,fid:D}),function $i(){0===mn.size&&mr&&(mr.close(),mr=null)}()}(O,D)}function In(I,D){const O=mn.get(I);if(O)for(const F of O)F(D)}let mr=null;const Hn="firebase-installations-store";let Hi=null;function ft(){return Hi||(Hi=(0,ae.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Hn)}})),Hi}function Ar(I,D){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,P.Z)(function*(I,D){const O=Pn(I),J=(yield ft()).transaction(Hn,"readwrite"),ce=J.objectStore(Hn),Me=yield ce.get(O);return yield ce.put(D,O),yield J.done,(!Me||Me.fid!==D.fid)&&sn(I,D.fid),D})).apply(this,arguments)}function nn(I){return yr.apply(this,arguments)}function yr(){return(yr=(0,P.Z)(function*(I){const D=Pn(I),F=(yield ft()).transaction(Hn,"readwrite");yield F.objectStore(Hn).delete(D),yield F.done})).apply(this,arguments)}function rr(I,D){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,P.Z)(function*(I,D){const O=Pn(I),J=(yield ft()).transaction(Hn,"readwrite"),ce=J.objectStore(Hn),Me=yield ce.get(O),Je=D(Me);return void 0===Je?yield ce.delete(O):yield ce.put(Je,O),yield J.done,Je&&(!Me||Me.fid!==Je.fid)&&sn(I,Je.fid),Je})).apply(this,arguments)}function Dn(I){return ir.apply(this,arguments)}function ir(){return(ir=(0,P.Z)(function*(I){let D;const O=yield rr(I.appConfig,F=>{const J=xs(F),ce=Zt(I,J);return D=ce.registrationPromise,ce.installationEntry});return""===O.fid?{installationEntry:yield D}:{installationEntry:O,registrationPromise:D}})).apply(this,arguments)}function xs(I){return Gi(I||{fid:We(),registrationStatus:0})}function Zt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Ke.create("app-offline"))};const O={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function ut(I,D){return rt.apply(this,arguments)}(I,O);return{installationEntry:O,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:ni(I)}:{installationEntry:D}}function rt(){return(rt=(0,P.Z)(function*(I,D){try{const O=yield ye(I,D);return Ar(I.appConfig,O)}catch(O){throw Ze(O)&&409===O.customData.serverCode?yield nn(I.appConfig):yield Ar(I.appConfig,{fid:D.fid,registrationStatus:0}),O}})).apply(this,arguments)}function ni(I){return ri.apply(this,arguments)}function ri(){return(ri=(0,P.Z)(function*(I){let D=yield Ht(I.appConfig);for(;1===D.registrationStatus;)yield Ve(100),D=yield Ht(I.appConfig);if(0===D.registrationStatus){const{installationEntry:O,registrationPromise:F}=yield Dn(I);return F||O}return D})).apply(this,arguments)}function Ht(I){return rr(I,D=>{if(!D)throw Ke.create("installation-not-found");return Gi(D)})}function Gi(I){return function Nn(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function dn(I,D){return U.apply(this,arguments)}function U(){return(U=(0,P.Z)(function*({appConfig:I,heartbeatServiceProvider:D},O){const F=G(I,O),J=he(I,O),ce=D.getImmediate({optional:!0});if(ce){const wt=yield ce.getHeartbeatsHeader();wt&&J.append("x-firebase-client",wt)}const Je={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:Q,appId:I.appId}})},Dt=yield Ie(()=>fetch(F,Je));if(Dt.ok)return Pe(yield Dt.json());throw yield Ce("Generate Auth Token",Dt)})).apply(this,arguments)}function G(I,{fid:D}){return`${Fe(I)}/${D}/authTokens:generate`}function z(I){return ve.apply(this,arguments)}function ve(){return(ve=(0,P.Z)(function*(I,D=!1){let O;const F=yield rr(I.appConfig,ce=>{if(!Ot(ce))throw Ke.create("not-registered");const Me=ce.authToken;if(!D&&on(Me))return ce;if(1===Me.requestStatus)return O=$(I,D),ce;{if(!navigator.onLine)throw Ke.create("app-offline");const Je=Gn(ce);return O=Qe(I,Je),Je}});return O?yield O:F.authToken})).apply(this,arguments)}function $(I,D){return X.apply(this,arguments)}function X(){return(X=(0,P.Z)(function*(I,D){let O=yield Ne(I.appConfig);for(;1===O.authToken.requestStatus;)yield Ve(100),O=yield Ne(I.appConfig);const F=O.authToken;return 0===F.requestStatus?z(I,D):F})).apply(this,arguments)}function Ne(I){return rr(I,D=>{if(!Ot(D))throw Ke.create("not-registered");return function ue(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Qe(I,D){return dt.apply(this,arguments)}function dt(){return(dt=(0,P.Z)(function*(I,D){try{const O=yield dn(I,D),F=Object.assign(Object.assign({},D),{authToken:O});return yield Ar(I.appConfig,F),O}catch(O){if(!Ze(O)||401!==O.customData.serverCode&&404!==O.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Ar(I.appConfig,F)}else yield nn(I.appConfig);throw O}})).apply(this,arguments)}function Ot(I){return void 0!==I&&2===I.registrationStatus}function on(I){return 2===I.requestStatus&&!function vt(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function Gn(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function q(){return(q=(0,P.Z)(function*(I){const D=I,{installationEntry:O,registrationPromise:F}=yield Dn(D);return F?F.catch(console.error):z(D).catch(console.error),O.fid})).apply(this,arguments)}function qe(){return(qe=(0,P.Z)(function*(I,D=!1){const O=I;return yield ot(O),(yield z(O,D)).token})).apply(this,arguments)}function ot(I){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,P.Z)(function*(I){const{registrationPromise:D}=yield Dn(I);D&&(yield D)})).apply(this,arguments)}function fa(I){return Ke.create("missing-app-config-values",{valueName:I})}const jr="installations",Lt=I=>{const D=I.getProvider("app").getImmediate(),O=function sr(I){if(!I||!I.options)throw fa("App Configuration");if(!I.name)throw fa("App Name");const D=["projectId","apiKey","appId"];for(const O of D)if(!I.options[O])throw fa(O);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:O,heartbeatServiceProvider:(0,ie._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},_n=I=>{const D=I.getProvider("app").getImmediate(),O=(0,ie._getProvider)(D,jr).getImmediate();return{getId:()=>function Z(I){return q.apply(this,arguments)}(O),getToken:J=>function Ae(I){return qe.apply(this,arguments)}(O,J)}};(function Mr(){(0,ie._registerComponent)(new fe.wA(jr,Lt,"PUBLIC")),(0,ie._registerComponent)(new fe.wA("installations-internal",_n,"PRIVATE"))})(),(0,ie.registerVersion)(ge,H),(0,ie.registerVersion)(ge,H,"esm2017");const ss="@firebase/remote-config",Rn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ql{constructor(D,O,F,J){this.client=D,this.storage=O,this.storageCache=F,this.logger=J}isCachedDataFresh(D,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-O,J=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${J}.`),J}fetch(D){var O=this;return(0,P.Z)(function*(){const[F,J]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(J&&O.isCachedDataFresh(D.cacheMaxAgeMillis,F))return J;D.eTag=J&&J.eTag;const ce=yield O.client.fetch(D),Me=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ce.status&&Me.push(O.storage.setLastSuccessfulFetchResponse(ce)),yield Promise.all(Me),ce})()}}function eu(I=navigator){return I.languages&&I.languages[0]||I.language}class zn{constructor(D,O,F,J,ce,Me){this.firebaseInstallations=D,this.sdkVersion=O,this.namespace=F,this.projectId=J,this.apiKey=ce,this.appId=Me}fetch(D){var O=this;return(0,P.Z)(function*(){const[F,J]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,Je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Dt={sdk_version:O.sdkVersion,app_instance_id:F,app_instance_id_token:J,app_id:O.appId,language_code:eu()},wt={method:"POST",headers:Je,body:JSON.stringify(Dt)},kt=fetch(Me,wt),At=new Promise((br,go)=>{D.signal.addEventListener(()=>{const Ko=new Error("The operation was aborted.");Ko.name="AbortError",go(Ko)})});let qr;try{yield Promise.race([kt,At]),qr=yield kt}catch(br){let go="fetch-client-network";throw"AbortError"===br.name&&(go="fetch-timeout"),Rn.create(go,{originalErrorMessage:br.message})}let Vn=qr.status;const zr=qr.headers.get("ETag")||void 0;let Ai,Wr;if(200===qr.status){let br;try{br=yield qr.json()}catch(go){throw Rn.create("fetch-client-parse",{originalErrorMessage:go.message})}Ai=br.entries,Wr=br.state}if("INSTANCE_STATE_UNSPECIFIED"===Wr?Vn=500:"NO_CHANGE"===Wr?Vn=304:("NO_TEMPLATE"===Wr||"EMPTY_CONFIG"===Wr)&&(Ai={}),304!==Vn&&200!==Vn)throw Rn.create("fetch-status",{httpStatus:Vn});return{status:Vn,eTag:zr,config:Ai}})()}}class as{constructor(D,O){this.client=D,this.storage=O}fetch(D){var O=this;return(0,P.Z)(function*(){const F=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:O,backoffCount:F}){var J=this;return(0,P.Z)(function*(){yield function zl(I,D){return new Promise((O,F)=>{const J=Math.max(D-Date.now(),0),ce=setTimeout(O,J);I.addEventListener(()=>{clearTimeout(ce),F(Rn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,O);try{const ce=yield J.client.fetch(D);return yield J.storage.deleteThrottleMetadata(),ce}catch(ce){if(!function Hf(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ce))throw ce;const Me={throttleEndTimeMillis:Date.now()+(0,oe.$s)(F),backoffCount:F+1};return yield J.storage.setThrottleMetadata(Me),J.attemptFetch(D,Me)}})()}}class qf{constructor(D,O,F,J,ce){this.app=D,this._client=O,this._storageCache=F,this._storage=J,this._logger=ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pa(I,D){const O=I.target.error||void 0;return Rn.create(D,{originalErrorMessage:O&&O.message})}const ko="app_namespace_store";class Zl{constructor(D,O,F,J=function Wf(){return new Promise((I,D)=>{try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=F=>{D(pa(F,"storage-open"))},O.onsuccess=F=>{I(F.target.result)},O.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(ko,{keyPath:"compositeKey"})}}catch(O){D(Rn.create("storage-open",{originalErrorMessage:O}))}})}()){this.appId=D,this.appName=O,this.namespace=F,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var O=this;return(0,P.Z)(function*(){const F=yield O.openDbPromise;return new Promise((J,ce)=>{const Je=F.transaction([ko],"readonly").objectStore(ko),Dt=O.createCompositeKey(D);try{const wt=Je.get(Dt);wt.onerror=kt=>{ce(pa(kt,"storage-get"))},wt.onsuccess=kt=>{const At=kt.target.result;J(At?At.value:void 0)}}catch(wt){ce(Rn.create("storage-get",{originalErrorMessage:wt&&wt.message}))}})})()}set(D,O){var F=this;return(0,P.Z)(function*(){const J=yield F.openDbPromise;return new Promise((ce,Me)=>{const Dt=J.transaction([ko],"readwrite").objectStore(ko),wt=F.createCompositeKey(D);try{const kt=Dt.put({compositeKey:wt,value:O});kt.onerror=At=>{Me(pa(At,"storage-set"))},kt.onsuccess=()=>{ce()}}catch(kt){Me(Rn.create("storage-set",{originalErrorMessage:kt&&kt.message}))}})})()}delete(D){var O=this;return(0,P.Z)(function*(){const F=yield O.openDbPromise;return new Promise((J,ce)=>{const Je=F.transaction([ko],"readwrite").objectStore(ko),Dt=O.createCompositeKey(D);try{const wt=Je.delete(Dt);wt.onerror=kt=>{ce(pa(kt,"storage-delete"))},wt.onsuccess=()=>{J()}}catch(wt){ce(Rn.create("storage-delete",{originalErrorMessage:wt&&wt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Fo{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const O=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),J=D.storage.getActiveConfig(),ce=yield O;ce&&(D.lastFetchStatus=ce);const Me=yield F;Me&&(D.lastSuccessfulFetchTimestampMillis=Me);const Je=yield J;Je&&(D.activeConfig=Je)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function dm(){return ga.apply(this,arguments)}function ga(){return(ga=(0,P.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Zf(){(0,ie._registerComponent)(new fe.wA("remote-config",function I(D,{instanceIdentifier:O}){const F=D.getProvider("app").getImmediate(),J=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rn.create("registration-window");if(!(0,oe.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:ce,apiKey:Me,appId:Je}=F.options;if(!ce)throw Rn.create("registration-project-id");if(!Me)throw Rn.create("registration-api-key");if(!Je)throw Rn.create("registration-app-id");const Dt=new Zl(Je,F.name,O=O||"firebase"),wt=new Fo(Dt),kt=new de.Yd(ss);kt.logLevel=de.in.ERROR;const At=new zn(J,ie.SDK_VERSION,O,ce,Me,Je),qr=new as(At,Dt),Vn=new ql(qr,Dt,wt,kt),zr=new qf(F,Vn,wt,Dt,kt);return function hn(I){const D=(0,oe.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(zr),zr},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(ss,"0.3.8"),(0,ie.registerVersion)(ss,"0.3.8","esm2017")}();const Ns="/firebase-messaging-sw.js",oi="/firebase-cloud-messaging-push-scope",Lo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ya="google.c.a.c_id",bd="google.c.a.c_l",Kf="google.c.a.ts",Rs="google.c.a.e";var ls=(()=>{return(I=ls||(ls={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ls;var I})();function Ci(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Yl(I){const O=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(O),J=new Uint8Array(F.length);for(let ce=0;ce<F.length;++ce)J[ce]=F.charCodeAt(ce);return J}const vr="fcm_token_details_db",Ql="fcm_token_object_Store";function Jl(I){return nu.apply(this,arguments)}function nu(){return nu=(0,P.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ce=>ce.name).includes(vr))return null;let D=null;return(yield(0,ae.X3)(vr,5,{upgrade:(F=(0,P.Z)(function*(J,ce,Me,Je){var Dt;if(ce<2||!J.objectStoreNames.contains(Ql))return;const wt=Je.objectStore(Ql),kt=yield wt.index("fcmSenderId").get(I);if(yield wt.clear(),kt)if(2===ce){const At=kt;if(!At.auth||!At.p256dh||!At.endpoint)return;D={token:At.fcmToken,createTime:null!==(Dt=At.createTime)&&void 0!==Dt?Dt:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:Ci(At.vapidKey)}}}else if(3===ce){const At=kt;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Ci(At.auth),p256dh:Ci(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Ci(At.vapidKey)}}}else if(4===ce){const At=kt;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Ci(At.auth),p256dh:Ci(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Ci(At.vapidKey)}}}}),function(ce,Me,Je,Dt){return F.apply(this,arguments)})})).close(),yield(0,ae.Lj)(vr),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),ru(D)?D:null;var F}),nu.apply(this,arguments)}function ru(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const cs="firebase-messaging-store";let Hu=null;function vn(){return Hu||(Hu=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(cs)}})),Hu}function _a(I){return ks.apply(this,arguments)}function ks(){return(ks=(0,P.Z)(function*(I){const D=or(I),F=yield(yield vn()).transaction(cs).objectStore(cs).get(D);if(F)return F;{const J=yield Jl(I.appConfig.senderId);if(J)return yield fn(I,J),J}})).apply(this,arguments)}function fn(I,D){return su.apply(this,arguments)}function su(){return(su=(0,P.Z)(function*(I,D){const O=or(I),J=(yield vn()).transaction(cs,"readwrite");return yield J.objectStore(cs).put(D,O),yield J.done,D})).apply(this,arguments)}function va(I){return to.apply(this,arguments)}function to(){return(to=(0,P.Z)(function*(I){const D=or(I),F=(yield vn()).transaction(cs,"readwrite");yield F.objectStore(cs).delete(D),yield F.done})).apply(this,arguments)}function or({appConfig:I}){return I.appId}const kn=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ds(I,D){return ar.apply(this,arguments)}function ar(){return(ar=(0,P.Z)(function*(I,D){const O=yield Ls(I),F=Ea(D),J={method:"POST",headers:O,body:JSON.stringify(F)};let ce;try{ce=yield(yield fetch(Fs(I.appConfig),J)).json()}catch(Me){throw kn.create("token-subscribe-failed",{errorInfo:Me})}if(ce.error)throw kn.create("token-subscribe-failed",{errorInfo:ce.error.message});if(!ce.token)throw kn.create("token-subscribe-no-token");return ce.token})).apply(this,arguments)}function Vo(I,D){return zi.apply(this,arguments)}function zi(){return(zi=(0,P.Z)(function*(I,D){const O=yield Ls(I),F=Ea(D.subscriptionOptions),J={method:"PATCH",headers:O,body:JSON.stringify(F)};let ce;try{ce=yield(yield fetch(`${Fs(I.appConfig)}/${D.token}`,J)).json()}catch(Me){throw kn.create("token-update-failed",{errorInfo:Me})}if(ce.error)throw kn.create("token-update-failed",{errorInfo:ce.error.message});if(!ce.token)throw kn.create("token-update-no-token");return ce.token})).apply(this,arguments)}function Gu(I,D){return $r.apply(this,arguments)}function $r(){return($r=(0,P.Z)(function*(I,D){const F={method:"DELETE",headers:yield Ls(I)};try{const ce=yield(yield fetch(`${Fs(I.appConfig)}/${D}`,F)).json();if(ce.error)throw kn.create("token-unsubscribe-failed",{errorInfo:ce.error.message})}catch(J){throw kn.create("token-unsubscribe-failed",{errorInfo:J})}})).apply(this,arguments)}function Fs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ls(I){return gt.apply(this,arguments)}function gt(){return(gt=(0,P.Z)(function*({appConfig:I,installations:D}){const O=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${O}`})})).apply(this,arguments)}function Ea({p256dh:I,auth:D,endpoint:O,vapidKey:F}){const J={web:{endpoint:O,auth:D,p256dh:I}};return F!==Lo&&(J.web.applicationPubKey=F),J}const wa=6048e5;function Xl(I){return ba.apply(this,arguments)}function ba(){return(ba=(0,P.Z)(function*(I){const D=yield xn(I.swRegistration,I.vapidKey),O={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Ci(D.getKey("auth")),p256dh:Ci(D.getKey("p256dh"))},F=yield _a(I.firebaseDependencies);if(F){if(Da(F.subscriptionOptions,O))return Date.now()>=F.createTime+wa?Cd(I,{token:F.token,createTime:Date.now(),subscriptionOptions:O}):F.token;try{yield Gu(I.firebaseDependencies,F.token)}catch(J){console.warn(J)}return Gt(I.firebaseDependencies,O)}return Gt(I.firebaseDependencies,O)})).apply(this,arguments)}function qu(I){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,P.Z)(function*(I){const D=yield _a(I.firebaseDependencies);D&&(yield Gu(I.firebaseDependencies,D.token),yield va(I.firebaseDependencies));const O=yield I.swRegistration.pushManager.getSubscription();return!O||O.unsubscribe()})).apply(this,arguments)}function Cd(I,D){return Se.apply(this,arguments)}function Se(){return(Se=(0,P.Z)(function*(I,D){try{const O=yield Vo(I.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:O,createTime:Date.now()});return yield fn(I.firebaseDependencies,F),O}catch(O){throw yield qu(I),O}})).apply(this,arguments)}function Gt(I,D){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,P.Z)(function*(I,D){const F={token:yield ds(I,D),createTime:Date.now(),subscriptionOptions:D};return yield fn(I,F),F.token})).apply(this,arguments)}function xn(I,D){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,P.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Yl(D)})})).apply(this,arguments)}function Da(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function xr(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function zu(I,D){if(!D.notification)return;I.notification={};const O=D.notification.title;O&&(I.notification.title=O);const F=D.notification.body;F&&(I.notification.body=F);const J=D.notification.image;J&&(I.notification.image=J)}(D,I),function Wu(I,D){!D.data||(I.data=D.data)}(D,I),function ec(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const O=D.fcmOptions.link;O&&(I.fcmOptions.link=O);const F=D.fcmOptions.analytics_label;F&&(I.fcmOptions.analyticsLabel=F)}(D,I),D}function tc(I){return"object"==typeof I&&!!I&&ya in I}function Ta(I,D){const O=[];for(let F=0;F<I.length;F++)O.push(I.charAt(F)),F<D.length&&O.push(D.charAt(F));return O.join("")}function er(I){return kn.create("missing-app-config-values",{valueName:I})}Ta("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ta("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ii{constructor(D,O,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Uo(I){if(!I||!I.options)throw er("App Configuration Object");if(!I.name)throw er("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:O}=I;for(const F of D)if(!O[F])throw er(F);return{appName:I.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:J,installations:O,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Zu(I){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,P.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Ns,{scope:oi}),I.swRegistration.update().catch(()=>{})}catch(D){throw kn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function hs(I,D){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,P.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield Zu(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw kn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function nc(I,D){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,P.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Lo)})).apply(this,arguments)}function no(){return(no=(0,P.Z)(function*(I,D){if(!navigator)throw kn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw kn.create("permission-blocked");return yield nc(I,null==D?void 0:D.vapidKey),yield hs(I,null==D?void 0:D.serviceWorkerRegistration),Xl(I)})).apply(this,arguments)}function au(I,D,O){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,P.Z)(function*(I,D,O){const F=Ku(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:O[ya],message_name:O[bd],message_time:O[Kf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ku(I){switch(I){case ls.NOTIFICATION_CLICKED:return"notification_open";case ls.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function uu(){return(uu=(0,P.Z)(function*(I,D){const O=D.data;if(!O.isFirebaseMessaging)return;I.onMessageHandler&&O.messageType===ls.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(xr(O)):I.onMessageHandler.next(xr(O)));const F=O.data;tc(F)&&"1"===F[Rs]&&(yield au(I,O.messageType,F))})).apply(this,arguments)}const ro="@firebase/messaging",io=I=>{const D=new Ii(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>function Yf(I,D){return uu.apply(this,arguments)}(D,O)),D},ic=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:F=>function rc(I,D){return no.apply(this,arguments)}(D,F)}};function Bo(){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,P.Z)(function*(){try{yield(0,oe.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,oe.hl)()&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Id(){(0,ie._registerComponent)(new fe.wA("messaging",io,"PUBLIC")),(0,ie._registerComponent)(new fe.wA("messaging-internal",ic,"PRIVATE")),(0,ie.registerVersion)(ro,"0.9.13"),(0,ie.registerVersion)(ro,"0.9.13","esm2017")}();const oc="analytics",Qf="firebase_id",Oa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lu="https://www.googletagmanager.com/gtag/js",lr=new de.Yd("@firebase/analytics");function Td(I){return Promise.all(I.map(D=>D.catch(O=>O)))}function so(I,D){const O=document.createElement("script");O.src=`${lu}?l=${I}&id=${D}`,O.async=!0,document.head.appendChild(O)}function ac(I,D,O,F,J,ce){return uc.apply(this,arguments)}function uc(){return(uc=(0,P.Z)(function*(I,D,O,F,J,ce){const Me=F[J];try{if(Me)yield D[Me];else{const Dt=(yield Td(O)).find(wt=>wt.measurementId===J);Dt&&(yield D[Dt.appId])}}catch(Je){lr.error(Je)}I("config",J,ce)})).apply(this,arguments)}function gs(I,D,O,F,J){return $o.apply(this,arguments)}function $o(){return($o=(0,P.Z)(function*(I,D,O,F,J){try{let ce=[];if(J&&J.send_to){let Me=J.send_to;Array.isArray(Me)||(Me=[Me]);const Je=yield Td(O);for(const Dt of Me){const wt=Je.find(At=>At.measurementId===Dt),kt=wt&&D[wt.appId];if(!kt){ce=[];break}ce.push(kt)}}0===ce.length&&(ce=Object.values(D)),yield Promise.all(ce),I("event",F,J||{})}catch(ce){lr.error(ce)}})).apply(this,arguments)}function Tn(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(lu))return D;return null}const cr=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),du=new class cu{constructor(D={},O=1e3){this.throttleMetadata=D,this.intervalMillis=O}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,O){this.throttleMetadata[D]=O}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Ho(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function ys(I){return En.apply(this,arguments)}function En(){return(En=(0,P.Z)(function*(I){var D;const{appId:O,apiKey:F}=I,J={method:"GET",headers:Ho(F)},ce=Oa.replace("{app-id}",O),Me=yield fetch(ce,J);if(200!==Me.status&&304!==Me.status){let Je="";try{const Dt=yield Me.json();(null===(D=Dt.error)||void 0===D?void 0:D.message)&&(Je=Dt.error.message)}catch(Dt){}throw cr.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:Je})}return Me.json()})).apply(this,arguments)}function Wn(I){return Et.apply(this,arguments)}function Et(){return(Et=(0,P.Z)(function*(I,D=du,O){const{appId:F,apiKey:J,measurementId:ce}=I.options;if(!F)throw cr.create("no-app-id");if(!J){if(ce)return{measurementId:ce,appId:F};throw cr.create("no-api-key")}const Me=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Je=new cc;return setTimeout((0,P.Z)(function*(){Je.abort()}),void 0!==O?O:6e4),Na({appId:F,apiKey:J,measurementId:ce},Me,Je,D)})).apply(this,arguments)}function Na(I,D,O){return hu.apply(this,arguments)}function hu(){return(hu=(0,P.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:O},F,J=du){const{appId:ce,measurementId:Me}=I;try{yield Qu(F,D)}catch(Je){if(Me)return lr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Je.message}]`),{appId:ce,measurementId:Me};throw Je}try{const Je=yield ys(I);return J.deleteThrottleMetadata(ce),Je}catch(Je){if(!Ju(Je)){if(J.deleteThrottleMetadata(ce),Me)return lr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Je.message}]`),{appId:ce,measurementId:Me};throw Je}const Dt=503===Number(Je.customData.httpStatus)?(0,oe.$s)(O,J.intervalMillis,30):(0,oe.$s)(O,J.intervalMillis),wt={throttleEndTimeMillis:Date.now()+Dt,backoffCount:O+1};return J.setThrottleMetadata(ce,wt),lr.debug(`Calling attemptFetch again in ${Dt} millis`),Na(I,wt,F,J)}})).apply(this,arguments)}function Qu(I,D){return new Promise((O,F)=>{const J=Math.max(D-Date.now(),0),ce=setTimeout(O,J);I.addEventListener(()=>{clearTimeout(ce),F(cr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Ju(I){if(!(I instanceof oe.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class cc{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function dc(){return fr.apply(this,arguments)}function fr(){return(fr=(0,P.Z)(function*(){if(!(0,oe.hl)())return lr.warn(cr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(I){return lr.warn(cr.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function _s(){return(_s=(0,P.Z)(function*(I,D,O,F,J,ce,Me){var Je;const Dt=Wn(I);Dt.then(Vn=>{O[Vn.measurementId]=Vn.appId,I.options.measurementId&&Vn.measurementId!==I.options.measurementId&&lr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${Vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Vn=>lr.error(Vn)),D.push(Dt);const wt=dc().then(Vn=>{if(Vn)return F.getId()}),[kt,At]=yield Promise.all([Dt,wt]);Tn()||so(ce,kt.measurementId),J("js",new Date);const qr=null!==(Je=null==Me?void 0:Me.config)&&void 0!==Je?Je:{};return qr.origin="firebase",qr.update=!0,null!=At&&(qr[Qf]=At),J("config",kt.measurementId,qr),kt.measurementId})).apply(this,arguments)}class Us{constructor(D){this.app=D}_delete(){return delete ai[this.app.options.appId],Promise.resolve()}}let ai={},fu=[];const pu={};let Go,Fn,Di="dataLayer",Yi=!1;function el(I,D,O){!function Qi(){const I=[];if((0,oe.ru)()&&I.push("This is a browser extension environment."),(0,oe.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((F,J)=>`(${J+1}) ${F}`).join(" "),O=cr.create("invalid-analytics-context",{errorInfo:D});lr.warn(O.message)}}();const F=I.options.appId;if(!F)throw cr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw cr.create("no-api-key");lr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ai[F])throw cr.create("already-exists",{id:F});if(!Yi){!function jo(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Di);const{wrappedGtag:ce,gtagCore:Me}=function Jf(I,D,O,F,J){let ce=function(...Me){window[F].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ce=window[J]),window[J]=function lc(I,D,O,F){function ce(){return(ce=(0,P.Z)(function*(Me,Je,Dt){try{"event"===Me?yield gs(I,D,O,Je,Dt):"config"===Me?yield ac(I,D,O,F,Je,Dt):I("set",Je)}catch(wt){lr.error(wt)}})).apply(this,arguments)}return function J(Me,Je,Dt){return ce.apply(this,arguments)}}(ce,I,D,O),{gtagCore:ce,wrappedGtag:window[J]}}(ai,fu,pu,Di,"gtag");Fn=ce,Go=Me,Yi=!0}return ai[F]=function Hr(I,D,O,F,J,ce,Me){return _s.apply(this,arguments)}(I,fu,pu,D,Go,Di,O),new Us(I)}function Ra(){return(Ra=(0,P.Z)(function*(I,D,O,F,J){if(J&&J.global)I("event",O,F);else{const ce=yield D;I("event",O,Object.assign(Object.assign({},F),{send_to:ce}))}})).apply(this,arguments)}function Xf(){return qo.apply(this,arguments)}function qo(){return(qo=(0,P.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(I){return!1}})).apply(this,arguments)}const rl="@firebase/analytics";!function pc(){(0,ie._registerComponent)(new fe.wA(oc,(D,{options:O})=>el(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,ie._registerComponent)(new fe.wA("analytics-internal",function I(D){try{const O=D.getProvider(oc).getImmediate();return{logEvent:(F,J,ce)=>function Md(I,D,O,F){I=(0,oe.m9)(I),function tl(I,D,O,F,J){return Ra.apply(this,arguments)}(Fn,ai[I.app.options.appId],D,O,F).catch(J=>lr.error(J))}(O,F,J,ce)}}catch(O){throw cr.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,ie.registerVersion)(rl,"0.7.9"),(0,ie.registerVersion)(rl,"0.7.9","esm2017")}();var $s=N(4408),jn=N(7565);const ui=new class zo extends jn.v{}(class il extends $s.o{constructor(D,O){super(D,O),this.scheduler=D,this.work=O}schedule(D,O=0){return O>0?super.schedule(D,O):(this.delay=O,this.state=D,this.scheduler.flush(this),this)}execute(D,O){return O>0||this.closed?super.execute(D,O):this._execute(D,O)}requestAsyncId(D,O,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,O,F):D.flush(this)}});var gc=N(4986),Or=N(9751),li=N(8505),ho=N(9468),Hs=N(5363);const vs=new h.GfV("7.3.0"),fo="__angularfire_symbol__analyticsIsSupportedValue",Es="__angularfire_symbol__analyticsIsSupported",po="__angularfire_symbol__remoteConfigIsSupportedValue",mc="__angularfire_symbol__remoteConfigIsSupported",xd="__angularfire_symbol__messagingIsSupportedValue",sl="__angularfire_symbol__messagingIsSupported";function yu(I,D,O){if(D){if(1===D.length)return D[0];const ce=D.filter(Me=>Me.app===O);if(1===ce.length)return ce[0]}return O.container.getProvider(I).getImmediate({optional:!0})}globalThis[Es]||(globalThis[Es]=Xf().then(I=>globalThis[fo]=I).catch(()=>globalThis[fo]=!1)),globalThis[sl]||(globalThis[sl]=Bo().then(I=>globalThis[xd]=I).catch(()=>globalThis[xd]=!1)),globalThis[mc]||(globalThis[mc]=dm().then(I=>globalThis[po]=I).catch(()=>globalThis[po]=!1));const _c=(I,D)=>{const O=D?[D]:(0,L.C6)(),F=[];return O.forEach(J=>{J.container.getProvider(I).instances.forEach(Me=>{F.includes(Me)||F.push(Me)})}),F};function Gs(){}class vc{constructor(D,O=ui){this.zone=D,this.delegate=O}now(){return this.delegate.now()}schedule(D,O,F){const J=this.zone;return this.delegate.schedule(function(Me){J.runGuarded(()=>{D.apply(this,[Me])})},O,F)}}class ol{constructor(D){this.zone=D,this.task=null}call(D,O){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gs,{},Gs,Gs)),O.pipe((0,li.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wo=(()=>{class I{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new vc(Zone.current)),this.insideAngular=O.run(()=>new vc(Zone.current,gc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(O){return new(O||I)(h.LFG(h.R0b))},I.\u0275prov=h.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ci(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Ji(I){return ci().ngZone.runOutsideAngular(()=>I())}function Gr(I){return ci().ngZone.run(()=>I())}function ws(I){return ci(),function Zo(I){return function(O){return(O=O.lift(new ol(I.ngZone))).pipe((0,ho.R)(I.outsideAngular),(0,Hs.Q)(I.insideAngular))}}(ci())(I)}const Od=(I,D)=>function(){const F=arguments;return D&&setTimeout(()=>{"scheduled"===D.state&&D.invoke()},10),Gr(()=>I.apply(void 0,F))},al=(I,D)=>function(){let O;const F=arguments;for(let ce=0;ce<arguments.length;ce++)"function"==typeof F[ce]&&(D&&(O||(O=Gr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gs,{},Gs,Gs)))),F[ce]=Od(F[ce],O));const J=Ji(()=>I.apply(this,F));if(!D){if(J instanceof Or.y){const ce=ci();return J.pipe((0,ho.R)(ce.outsideAngular),(0,Hs.Q)(ce.insideAngular))}return Gr(()=>J)}return J instanceof Or.y?J.pipe(ws):J instanceof Promise?Gr(()=>new Promise((ce,Me)=>J.then(Je=>Gr(()=>ce(Je)),Je=>Gr(()=>Me(Je))))):"function"==typeof J&&O?function(){return setTimeout(()=>{O&&"scheduled"===O.state&&O.invoke()},10),J.apply(this,arguments)}:Gr(()=>J)}},198:(et,be,N)=>{N.d(be,{$:()=>Fs,A:()=>B,B:()=>ke,G:()=>_n,H:()=>an,J:()=>as,L:()=>on,M:()=>ga,N:()=>ma,P:()=>fo,Q:()=>ya,R:()=>pc,T:()=>bd,U:()=>Lo,V:()=>ls,W:()=>Ci,X:()=>Jl,Y:()=>ou,Z:()=>ds,_:()=>Vo,a:()=>Pa,a0:()=>Xl,a1:()=>qu,a2:()=>Cd,a3:()=>Gt,a4:()=>xn,a5:()=>Da,a6:()=>zu,a7:()=>Wu,a8:()=>tc,a9:()=>Ta,aA:()=>go,aB:()=>Vn,aC:()=>al,aD:()=>Od,aE:()=>Be,aI:()=>Ho,aL:()=>Rs,aa:()=>Zu,ab:()=>hs,ac:()=>nc,af:()=>au,ag:()=>Ku,ah:()=>Yf,ak:()=>cs,al:()=>ur,an:()=>lu,ao:()=>uc,ap:()=>Un,aq:()=>Ie,ar:()=>Ut,as:()=>ot,at:()=>Ze,au:()=>Xi,av:()=>Ec,aw:()=>Fe,ax:()=>ne,ay:()=>re,az:()=>vt,b:()=>cr,c:()=>n0,d:()=>vc,e:()=>_c,f:()=>O,g:()=>Dt,h:()=>ce,i:()=>el,j:()=>At,k:()=>Fd,l:()=>ui,m:()=>ip,n:()=>sp,o:()=>ae,q:()=>On,r:()=>gc,s:()=>jn,u:()=>Hs,v:()=>sc});var h=N(5861),L=N(2090),P=N(9681),ie=N(655),oe=N(1877),fe=N(4859);const ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},B={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ke=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Oe=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new oe.Yd("@firebase/auth");function Ke(v,...g){De.logLevel<=oe.in.ERROR&&De.error(`Auth (${P.SDK_VERSION}): ${v}`,...g)}function Ze(v,...g){throw Ge(v,...g)}function Fe(v,...g){return Ge(v,...g)}function Pe(v,g,m){const w=Object.assign(Object.assign({},Oe()),{[g]:m});return new L.LL("auth","Firebase",w).create(g,{appName:v.name})}function Ce(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&Ze(v,"argument-error"),Pe(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(v,...g){if("string"!=typeof v){const m=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return tt.create(v,...g)}function ne(v,g,...m){if(!v)throw Ge(g,...m)}function he(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Ke(g),new Error(g)}function Ie(v,g){v||he(g)}const K=new Map;function re(v){Ie(v instanceof Function,"Expected a class definition");let g=K.get(v);return g?(Ie(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,K.set(v,g),g)}function le(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Ve(){return"http:"===ct()||"https:"===ct()}function ct(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class We{constructor(g,m){this.shortDelay=g,this.longDelay=m,Ie(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function Xt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ve()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cn(v,g){Ie(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class Pn{static initialize(g,m,w){this.fetchImpl=g,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void he("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void he("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void he("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},sn=new We(3e4,6e4);function $t(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function tn(v,g,m,w){return In.apply(this,arguments)}function In(){return(In=(0,h.Z)(function*(v,g,m,w,S={}){return ji(v,S,(0,h.Z)(function*(){let R={},te={};w&&("GET"===g?te=w:R={body:JSON.stringify(w)});const Re=(0,L.xO)(Object.assign({key:v.config.apiKey},te)).slice(1),it=yield v._getAdditionalHeaders();return it["Content-Type"]="application/json",v.languageCode&&(it["X-Firebase-Locale"]=v.languageCode),Pn.fetch()(ti(v,v.config.apiHost,m,Re),Object.assign({method:g,headers:it,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ji(v,g,m){return mr.apply(this,arguments)}function mr(){return(mr=(0,h.Z)(function*(v,g,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},mn),g);try{const S=new wi(v),R=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const te=yield R.json();if("needConfirmation"in te)throw Hn(v,"account-exists-with-different-credential",te);if(R.ok&&!("errorMessage"in te))return te;{const Re=R.ok?te.errorMessage:te.error.message,[it,pt]=Re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===it)throw Hn(v,"credential-already-in-use",te);if("EMAIL_EXISTS"===it)throw Hn(v,"email-already-in-use",te);const qt=w[it]||it.toLowerCase().replace(/[_\s]+/g,"-");if(pt)throw Pe(v,qt,pt);Ze(v,qt)}}catch(S){if(S instanceof L.ZR)throw S;Ze(v,"network-request-failed")}})).apply(this,arguments)}function Sn(v,g,m,w){return $i.apply(this,arguments)}function $i(){return($i=(0,h.Z)(function*(v,g,m,w,S={}){const R=yield tn(v,g,m,w,S);return"mfaPendingCredential"in R&&Ze(v,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function ti(v,g,m,w){const S=`${g}${m}?${w}`;return v.config.emulator?cn(v.config,S):`${v.config.apiScheme}://${S}`}class wi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Fe(this.auth,"network-request-failed")),sn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hn(v,g,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const S=Fe(v,g,w);return S.customData._tokenResponse=m,S}function ft(){return(ft=(0,h.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Ar(v,g){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,h.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function nn(v,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,h.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function rr(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function ir(){return(ir=(0,h.Z)(function*(v,g=!1){const m=(0,L.m9)(v),w=yield m.getIdToken(g),S=Zt(w);ne(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,te=null==R?void 0:R.sign_in_provider;return{claims:S,token:w,authTime:rr(xs(S.auth_time)),issuedAtTime:rr(xs(S.iat)),expirationTime:rr(xs(S.exp)),signInProvider:te||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function xs(v){return 1e3*Number(v)}function Zt(v){const[g,m,w]=v.split(".");if(void 0===g||void 0===m||void 0===w)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,L.tV)(m);return S?JSON.parse(S):(Ke("Failed to decode base64 JWT payload"),null)}catch(S){return Ke("Caught error parsing JWT payload as JSON",S),null}}function rt(v,g){return ni.apply(this,arguments)}function ni(){return(ni=(0,h.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(w){throw w instanceof L.ZR&&ri(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function ri({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Ht{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),w)}iteration(){var g=this;return(0,h.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&g.schedule(!0))}g.schedule()})()}}class Gi{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=rr(this.lastLoginAt),this.creationTime=rr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nn(v){return dn.apply(this,arguments)}function dn(){return(dn=(0,h.Z)(function*(v){var g;const m=v.auth,w=yield v.getIdToken(),S=yield rt(v,nn(m,{idToken:w}));ne(null==S?void 0:S.users.length,m,"internal-error");const R=S.users[0];v._notifyReloadListener(R);const te=(null===(g=R.providerUserInfo)||void 0===g?void 0:g.length)?ve(R.providerUserInfo):[],Re=z(v.providerData,te),qt=!!v.isAnonymous&&!(v.email&&R.passwordHash||(null==Re?void 0:Re.length)),Mn={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:Re,metadata:new Gi(R.createdAt,R.lastLoginAt),isAnonymous:qt};Object.assign(v,Mn)})).apply(this,arguments)}function G(){return(G=(0,h.Z)(function*(v){const g=(0,L.m9)(v);yield Nn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function z(v,g){return[...v.filter(w=>!g.some(S=>S.providerId===w.providerId)),...g]}function ve(v){return v.map(g=>{var{providerId:m}=g,w=(0,ie._T)(g,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function X(){return(X=(0,h.Z)(function*(v,g){const m=yield ji(v,{},(0,h.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:S,apiKey:R}=v.config,te=ti(v,S,"/v1/token",`key=${R}`),Re=yield v._getAdditionalHeaders();return Re["Content-Type"]="application/x-www-form-urlencoded",Pn.fetch()(te,{method:"POST",headers:Re,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ne(g.idToken,"internal-error"),ne(void 0!==g.idToken,"internal-error"),ne(void 0!==g.refreshToken,"internal-error");const m="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function ut(v){const g=Zt(v);return ne(g,"internal-error"),ne(void 0!==g.exp,"internal-error"),ne(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var w=this;return(0,h.Z)(function*(){return ne(!w.accessToken||w.refreshToken,g,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var w=this;return(0,h.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:te}=yield function $(v,g){return X.apply(this,arguments)}(g,m);w.updateTokensAndExpiration(S,R,Number(te))})()}updateTokensAndExpiration(g,m,w){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,m){const{refreshToken:w,accessToken:S,expirationTime:R}=m,te=new Ne;return w&&(ne("string"==typeof w,"internal-error",{appName:g}),te.refreshToken=w),S&&(ne("string"==typeof S,"internal-error",{appName:g}),te.accessToken=S),R&&(ne("number"==typeof R,"internal-error",{appName:g}),te.expirationTime=R),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Ne,this.toJSON())}_performRefresh(){return he("not implemented")}}function Qe(v,g){ne("string"==typeof v||void 0===v,"internal-error",{appName:g})}class dt{constructor(g){var{uid:m,auth:w,stsTokenManager:S}=g,R=(0,ie._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ht(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Gi(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,h.Z)(function*(){const w=yield rt(m,m.stsTokenManager.getToken(m.auth,g));return ne(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(g){return function Dn(v){return ir.apply(this,arguments)}(this,g)}reload(){return function U(v){return G.apply(this,arguments)}(this)}_assign(g){this!==g&&(ne(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new dt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var w=this;return(0,h.Z)(function*(){let S=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),S=!0),m&&(yield Nn(w)),yield w.auth._persistUserIfCurrent(w),S&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,h.Z)(function*(){const m=yield g.getIdToken();return yield rt(g,function Hi(v,g){return ft.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var w,S,R,te,Re,it,pt,qt;const Mn=null!==(w=m.displayName)&&void 0!==w?w:void 0,di=null!==(S=m.email)&&void 0!==S?S:void 0,zs=null!==(R=m.phoneNumber)&&void 0!==R?R:void 0,Cc=null!==(te=m.photoURL)&&void 0!==te?te:void 0,bm=null!==(Re=m.tenantId)&&void 0!==Re?Re:void 0,pl=null!==(it=m._redirectEventId)&&void 0!==it?it:void 0,ea=null!==(pt=m.createdAt)&&void 0!==pt?pt:void 0,op=null!==(qt=m.lastLoginAt)&&void 0!==qt?qt:void 0,{uid:Ic,emailVerified:ap,isAnonymous:Dc,providerData:Cu,stsTokenManager:jd}=m;ne(Ic&&jd,g,"internal-error");const Fa=Ne.fromJSON(this.name,jd);ne("string"==typeof Ic,g,"internal-error"),Qe(Mn,g.name),Qe(di,g.name),ne("boolean"==typeof ap,g,"internal-error"),ne("boolean"==typeof Dc,g,"internal-error"),Qe(zs,g.name),Qe(Cc,g.name),Qe(bm,g.name),Qe(pl,g.name),Qe(ea,g.name),Qe(op,g.name);const Tc=new dt({uid:Ic,auth:g,email:di,emailVerified:ap,displayName:Mn,isAnonymous:Dc,photoURL:Cc,phoneNumber:zs,tenantId:bm,stsTokenManager:Fa,createdAt:ea,lastLoginAt:op});return Cu&&Array.isArray(Cu)&&(Tc.providerData=Cu.map(Zn=>Object.assign({},Zn))),pl&&(Tc._redirectEventId=pl),Tc}static _fromIdTokenResponse(g,m,w=!1){return(0,h.Z)(function*(){const S=new Ne;S.updateFromServerResponse(m);const R=new dt({uid:m.localId,auth:g,stsTokenManager:S,isAnonymous:w});return yield Nn(R),R})()}}const on=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,w){var S=this;return(0,h.Z)(function*(){S.storage[m]=w})()}_get(m){var w=this;return(0,h.Z)(function*(){const S=w.storage[m];return void 0===S?null:S})()}_remove(m){var w=this;return(0,h.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function vt(v,g,m){return`firebase:${v}:${g}:${m}`}class Gn{constructor(g,m,w){this.persistence=g,this.auth=m,this.userKey=w;const{config:S,name:R}=this.auth;this.fullUserKey=vt(this.userKey,S.apiKey,R),this.fullPersistenceKey=vt("persistence",S.apiKey,R),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,h.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?dt._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,h.Z)(function*(){if(m.persistence===g)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,w="authUser"){return(0,h.Z)(function*(){if(!m.length)return new Gn(re(on),g,w);const S=(yield Promise.all(m.map(function(){var pt=(0,h.Z)(function*(qt){if(yield qt._isAvailable())return qt});return function(qt){return pt.apply(this,arguments)}}()))).filter(pt=>pt);let R=S[0]||re(on);const te=vt(w,g.config.apiKey,g.name);let Re=null;for(const pt of m)try{const qt=yield pt._get(te);if(qt){const Mn=dt._fromJSON(g,qt);pt!==R&&(Re=Mn),R=pt;break}}catch(qt){}const it=S.filter(pt=>pt._shouldAllowMigration);return R._shouldAllowMigration&&it.length?(R=it[0],Re&&(yield R._set(te,Re.toJSON())),yield Promise.all(m.map(function(){var pt=(0,h.Z)(function*(qt){if(qt!==R)try{yield qt._remove(te)}catch(Mn){}});return function(qt){return pt.apply(this,arguments)}}())),new Gn(R,g,w)):new Gn(R,g,w)})()}}function ue(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(qe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Z(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Mt(g))return"Blackberry";if(Kt(g))return"Webos";if(q(g))return"Safari";if((g.includes("chrome/")||Ae(g))&&!g.includes("edge/"))return"Chrome";if(ot(g))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Z(v=(0,L.z$)()){return/firefox\//i.test(v)}function q(v=(0,L.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ae(v=(0,L.z$)()){return/crios\//i.test(v)}function qe(v=(0,L.z$)()){return/iemobile/i.test(v)}function ot(v=(0,L.z$)()){return/android/i.test(v)}function Mt(v=(0,L.z$)()){return/blackberry/i.test(v)}function Kt(v=(0,L.z$)()){return/webos/i.test(v)}function Ut(v=(0,L.z$)()){return/iphone|ipad|ipod/i.test(v)}function Un(v=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function _r(v=(0,L.z$)()){return Ut(v)||ot(v)||Kt(v)||Mt(v)||/windows phone/i.test(v)||qe(v)}function sr(v,g=[]){let m;switch(v){case"Browser":m=ue((0,L.z$)());break;case"Worker":m=`${ue((0,L.z$)())}-${v}`;break;default:m=v}const w=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${P.SDK_VERSION}/${w}`}class fa{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const w=R=>new Promise((te,Re)=>{try{te(g(R))}catch(it){Re(it)}});w.onAbort=m,this.queue.push(w);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===g)return;const w=[];try{for(const S of m.queue)yield S(g),S.onAbort&&w.push(S.onAbort)}catch(S){w.reverse();for(const R of w)try{R()}catch(te){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:S.message})}})()}}class jr{constructor(g,m,w){this.app=g,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lt(this),this.idTokenSubscription=new Lt(this),this.beforeStateQueue=new fa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,m){var w=this;return m&&(this._popupRedirectResolver=re(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var S,R;if(!w._deleted&&(w.persistenceManager=yield Gn.create(w,g),!w._deleted)){if(null===(S=w._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(te){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,h.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,h.Z)(function*(){var w;const S=yield m.assertedPersistence.getCurrentUser();let R=S,te=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Re=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,it=null==R?void 0:R._redirectEventId,pt=yield m.tryRedirectSignIn(g);(!Re||Re===it)&&(null==pt?void 0:pt.user)&&(R=pt.user,te=!0)}if(!R)return m.directlySetCurrentUser(null);if(!R._redirectEventId){if(te)try{yield m.beforeStateQueue.runMiddleware(R)}catch(Re){R=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Re))}return R?m.reloadAndSetCurrentUserOrClear(R):m.directlySetCurrentUser(null)}return ne(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===R._redirectEventId?m.directlySetCurrentUser(R):m.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(g){var m=this;return(0,h.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch(S){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,h.Z)(function*(){try{yield Nn(g)}catch(w){if("auth/network-request-failed"!==w.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function jt(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,h.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,h.Z)(function*(){const w=g?(0,L.m9)(g):null;return w&&ne(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(g,m=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return g&&ne(w.tenantId===g.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(g)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(g),w.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,h.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(re(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,m,w){return this.registerStateListener(this.authStateSubscription,g,m,w)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,w){return this.registerStateListener(this.idTokenSubscription,g,m,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var w=this;return(0,h.Z)(function*(){const S=yield w.getOrInitRedirectPersistenceManager(m);return null===g?S.removeCurrentUser():S.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const w=g&&re(g)||m._popupRedirectResolver;ne(w,m,"argument-error"),m.redirectPersistenceManager=yield Gn.create(m,[re(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,h.Z)(function*(){var w,S;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===g?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,h.Z)(function*(){if(g===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,w,S){if(this._deleted)return()=>{};const R="function"==typeof m?m:m.next.bind(m),te=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(te,this,"internal-error"),te.then(()=>R(this.currentUser)),"function"==typeof m?g.addObserver(m,w,S):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==g&&(m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh()),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=sr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,h.Z)(function*(){var m;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const S=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(w["X-Firebase-Client"]=S),w})()}}function Be(v){return(0,L.m9)(v)}class Lt{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(m=>this.observer=m)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _n(v,g,m){const w=Be(v);ne(w._canInitEmulator,w,"emulator-config-failed"),ne(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const S=!!(null==m?void 0:m.disableWarnings),R=Mr(g),{host:te,port:Re}=function ss(v){const g=Mr(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(w);if(S){const R=S[1];return{host:R,port:Bn(w.substr(R.length+1))}}{const[R,te]=w.split(":");return{host:R,port:Bn(te)}}}(g);w.config.emulator={url:`${R}//${te}${null===Re?"":`:${Re}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:te,port:Re,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function os(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Mr(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function Bn(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class an{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return he("not implemented")}_getIdTokenResponse(g){return he("not implemented")}_linkToIdToken(g,m){return he("not implemented")}_getReauthenticationResolver(g){return he("not implemented")}}function Js(v,g){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,h.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:resetPassword",$t(v,g))})).apply(this,arguments)}function Pt(v,g){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,h.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Po(v,g){return No.apply(this,arguments)}function No(){return(No=(0,h.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:update",$t(v,g))})).apply(this,arguments)}function Xn(){return(Xn=(0,h.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithPassword",$t(v,g))})).apply(this,arguments)}function Os(v,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,h.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:sendOobCode",$t(v,g))})).apply(this,arguments)}function qn(v,g){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(v,g){return Os(v,g)})).apply(this,arguments)}function Hl(v,g){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(v,g){return Os(v,g)})).apply(this,arguments)}function bi(v,g){return ii.apply(this,arguments)}function ii(){return(ii=(0,h.Z)(function*(v,g){return Os(v,g)})).apply(this,arguments)}function Gl(v,g){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,h.Z)(function*(v,g){return Os(v,g)})).apply(this,arguments)}function si(){return(si=(0,h.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithEmailLink",$t(v,g))})).apply(this,arguments)}function ql(){return(ql=(0,h.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithEmailLink",$t(v,g))})).apply(this,arguments)}class eu extends an{constructor(g,m,w,S=null){super("password",w),this._email=g,this._password=m,this._tenantId=S}static _fromEmailAndPassword(g,m){return new eu(g,m,"password")}static _fromEmailAndCode(g,m,w=null){return new eu(g,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function Ro(v,g){return Xn.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Ps(v,g){return si.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:Ze(g,"internal-error")}})()}_linkToIdToken(g,m){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return Pt(g,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Ed(v,g){return ql.apply(this,arguments)}(g,{idToken:m,email:w._email,oobCode:w._password});default:Ze(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function zn(v,g){return zl.apply(this,arguments)}function zl(){return(zl=(0,h.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithIdp",$t(v,g))})).apply(this,arguments)}class as extends an{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new as(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):Ze("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:S}=m,R=(0,ie._T)(m,["providerId","signInMethod"]);if(!w||!S)return null;const te=new as(w,S);return te.idToken=R.idToken||void 0,te.accessToken=R.accessToken||void 0,te.secret=R.secret,te.nonce=R.nonce,te.pendingToken=R.pendingToken||null,te}_getIdTokenResponse(g){return zn(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,zn(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,zn(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,L.xO)(m)}return g}}function Gf(v,g){return tu.apply(this,arguments)}function tu(){return(tu=(0,h.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:sendVerificationCode",$t(v,g))})).apply(this,arguments)}function pa(){return(pa=(0,h.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,g))})).apply(this,arguments)}function Wl(){return(Wl=(0,h.Z)(function*(v,g){const m=yield Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,g));if(m.temporaryProof)throw Hn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const zf={USER_NOT_FOUND:"user-not-found"};function Zl(){return(Zl=(0,h.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),zf)})).apply(this,arguments)}class Fo extends an{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new Fo({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new Fo({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function qf(v,g){return pa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function ko(v,g){return Wl.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Wf(v,g){return Zl.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:w,verificationCode:S}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:w,code:S}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:w,phoneNumber:S,temporaryProof:R}=g;return w||m||S||R?new Fo({verificationId:m,verificationCode:w,phoneNumber:S,temporaryProof:R}):null}}class us{constructor(g){var m,w,S,R,te,Re;const it=(0,L.zd)((0,L.pd)(g)),pt=null!==(m=it.apiKey)&&void 0!==m?m:null,qt=null!==(w=it.oobCode)&&void 0!==w?w:null,Mn=function Zf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=it.mode)&&void 0!==S?S:null);ne(pt&&qt&&Mn,"argument-error"),this.apiKey=pt,this.operation=Mn,this.code=qt,this.continueUrl=null!==(R=it.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(te=it.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Re=it.tenantId)&&void 0!==Re?Re:null}static parseLink(g){const m=function wd(v){const g=(0,L.zd)((0,L.pd)(v)).link,m=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(v)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||m||g||v}(g);try{return new us(m)}catch(w){return null}}}let ga=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return eu._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const S=us.parseLink(w);return ne(S,"argument-error"),eu._fromEmailAndCode(m,S.code,S.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ns{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class oi extends Ns{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Lo extends oi{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return ne("providerId"in m&&"signInMethod"in m,"argument-error"),as._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ne(g.idToken||g.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Lo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Lo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:S,pendingToken:R,nonce:te,providerId:Re}=g;if(!w&&!S&&!m&&!R||!Re)return null;try{return new Lo(Re)._credential({idToken:m,accessToken:w,nonce:te,pendingToken:R})}catch(it){return null}}}let ma=(()=>{class v extends oi{constructor(){super("facebook.com")}static credential(m){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),ya=(()=>{class v extends oi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:S}=m;if(!w&&!S)return null;try{return v.credential(w,S)}catch(R){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),bd=(()=>{class v extends oi{constructor(){super("github.com")}static credential(m){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Rs extends an{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return zn(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,zn(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,zn(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:S,pendingToken:R}=m;return w&&S&&R&&w===S?new Rs(w,R):null}static _create(g,m){return new Rs(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ls extends Ns{constructor(g){ne(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ls.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ls.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=Rs.fromJSON(g);return ne(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:w}=g;if(!m||!w)return null;try{return Rs._create(w,m)}catch(S){return null}}}let Ci=(()=>{class v extends oi{constructor(){super("twitter.com")}static credential(m,w){return as._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:S}=m;if(!w||!S)return null;try{return v.credential(w,S)}catch(R){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Yl(v,g){return vr.apply(this,arguments)}function vr(){return(vr=(0,h.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signUp",$t(v,g))})).apply(this,arguments)}class Er{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,w,S=!1){return(0,h.Z)(function*(){const R=yield dt._fromIdTokenResponse(g,w,S),te=Ql(w);return new Er({user:R,providerId:te,_tokenResponse:w,operationType:m})})()}static _forOperation(g,m,w){return(0,h.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const S=Ql(w);return new Er({user:g,providerId:S,_tokenResponse:w,operationType:m})})()}}function Ql(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Jl(v){return nu.apply(this,arguments)}function nu(){return(nu=(0,h.Z)(function*(v){var g;const m=Be(v);if(yield m._initializationPromise,null===(g=m.currentUser)||void 0===g?void 0:g.isAnonymous)return new Er({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Yl(m,{returnSecureToken:!0}),S=yield Er._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class ru extends L.ZR{constructor(g,m,w,S){var R;super(m.code,m.message),this.operationType=w,this.user=S,Object.setPrototypeOf(this,ru.prototype),this.customData={appName:g.name,tenantId:null!==(R=g.tenantId)&&void 0!==R?R:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,m,w,S){return new ru(g,m,w,S)}}function iu(v,g,m,w){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?ru._fromErrorAndOperation(v,R,g,w):R})}function $u(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function cs(v,g){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,h.Z)(function*(v,g){const m=(0,L.m9)(v);yield ks(!0,m,g);const{providerUserInfo:w}=yield Ar(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),S=$u(w||[]);return m.providerData=m.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function vn(v,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,h.Z)(function*(v,g,m=!1){const w=yield rt(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return Er._forOperation(v,"link",w)})).apply(this,arguments)}function ks(v,g,m){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(v,g,m){yield Nn(g);const S=!1===v?"provider-already-linked":"no-such-provider";ne($u(g.providerData).has(m)===v,g.auth,S)})).apply(this,arguments)}function su(v,g){return va.apply(this,arguments)}function va(){return(va=(0,h.Z)(function*(v,g,m=!1){const{auth:w}=v,S="reauthenticate";try{const R=yield rt(v,iu(w,S,g,v),m);ne(R.idToken,w,"internal-error");const te=Zt(R.idToken);ne(te,w,"internal-error");const{sub:Re}=te;return ne(v.uid===Re,w,"user-mismatch"),Er._forOperation(v,S,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Ze(w,"user-mismatch"),R}})).apply(this,arguments)}function to(v,g){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(v,g,m=!1){const w="signIn",S=yield iu(v,w,g),R=yield Er._fromIdTokenResponse(v,w,S);return m||(yield v._updateCurrentUser(R.user)),R})).apply(this,arguments)}function ou(v,g){return kn.apply(this,arguments)}function kn(){return(kn=(0,h.Z)(function*(v,g){return to(Be(v),g)})).apply(this,arguments)}function ds(v,g){return ar.apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(v,g){const m=(0,L.m9)(v);return yield ks(!1,m,g.providerId),vn(m,g)})).apply(this,arguments)}function Vo(v,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,h.Z)(function*(v,g){return su((0,L.m9)(v),g)})).apply(this,arguments)}function Gu(v,g){return $r.apply(this,arguments)}function $r(){return($r=(0,h.Z)(function*(v,g){return Sn(v,"POST","/v1/accounts:signInWithCustomToken",$t(v,g))})).apply(this,arguments)}function Fs(v,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(v,g){const m=Be(v),w=yield Gu(m,{token:g,returnSecureToken:!0}),S=yield Er._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class gt{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?Ea._fromServerResponse(g,m):Ze(g,"internal-error")}}class Ea extends gt{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new Ea(m)}}function wa(v,g,m){var w;ne((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),ne(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ne(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(ne(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function Xl(v,g,m){return ba.apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v),S={requestType:"PASSWORD_RESET",email:g};m&&wa(w,S,m),yield Hl(w,S)})).apply(this,arguments)}function qu(v,g,m){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,h.Z)(function*(v,g,m){yield Js((0,L.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function Cd(v,g){return Se.apply(this,arguments)}function Se(){return(Se=(0,h.Z)(function*(v,g){yield Po((0,L.m9)(v),{oobCode:g})})).apply(this,arguments)}function Gt(v,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,h.Z)(function*(v,g){const m=(0,L.m9)(v),w=yield Js(m,{oobCode:g}),S=w.requestType;switch(ne(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(w.mfaInfo,m,"internal-error");default:ne(w.email,m,"internal-error")}let R=null;return w.mfaInfo&&(R=gt._fromServerResponse(Be(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function xn(v,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,h.Z)(function*(v,g){const{data:m}=yield Gt((0,L.m9)(v),g);return m.email})).apply(this,arguments)}function Da(v,g,m){return xr.apply(this,arguments)}function xr(){return(xr=(0,h.Z)(function*(v,g,m){const w=Be(v),S=yield Yl(w,{returnSecureToken:!0,email:g,password:m}),R=yield Er._fromIdTokenResponse(w,"signIn",S);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function zu(v,g,m){return ou((0,L.m9)(v),ga.credential(g,m))}function Wu(v,g,m){return ec.apply(this,arguments)}function ec(){return(ec=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v),S={requestType:"EMAIL_SIGNIN",email:g};ne(m.handleCodeInApp,w,"argument-error"),m&&wa(w,S,m),yield bi(w,S)})).apply(this,arguments)}function tc(v,g){const m=us.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function Ta(v,g,m){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v),S=ga.credentialWithLink(g,m||le());return ne(S._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),ou(w,S)})).apply(this,arguments)}function er(v,g){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,h.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:createAuthUri",$t(v,g))})).apply(this,arguments)}function Zu(v,g){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(v,g){const w={identifier:g,continueUri:Ve()?le():"http://localhost"},{signinMethods:S}=yield er((0,L.m9)(v),w);return S||[]})).apply(this,arguments)}function hs(v,g){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,h.Z)(function*(v,g){const m=(0,L.m9)(v),S={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&wa(m.auth,S,g);const{email:R}=yield qn(m.auth,S);R!==v.email&&(yield v.reload())})).apply(this,arguments)}function nc(v,g,m){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&wa(w.auth,R,m);const{email:te}=yield Gl(w.auth,R);te!==v.email&&(yield v.reload())})).apply(this,arguments)}function rc(v,g){return no.apply(this,arguments)}function no(){return(no=(0,h.Z)(function*(v,g){return tn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function au(v,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,h.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const w=(0,L.m9)(v),R={idToken:yield w.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},te=yield rt(w,rc(w.auth,R));w.displayName=te.displayName||null,w.photoURL=te.photoUrl||null;const Re=w.providerData.find(({providerId:it})=>"password"===it);Re&&(Re.displayName=w.displayName,Re.photoURL=w.photoURL),yield w._updateTokensIfNecessary(te)})).apply(this,arguments)}function Ku(v,g){return uu((0,L.m9)(v),g,null)}function Yf(v,g){return uu((0,L.m9)(v),null,g)}function uu(v,g,m){return ro.apply(this,arguments)}function ro(){return(ro=(0,h.Z)(function*(v,g,m){const{auth:w}=v,R={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(R.email=g),m&&(R.password=m);const te=yield rt(v,Pt(w,R));yield v._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class io{constructor(g,m,w={}){this.isNewUser=g,this.providerId=m,this.profile=w}}class ic extends io{constructor(g,m,w,S){super(g,m,w),this.username=S}}class Id extends io{constructor(g,m){super(g,"facebook.com",m)}}class Bo extends ic{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Zi extends io{constructor(g,m){super(g,"google.com",m)}}class Dd extends ic{constructor(g,m,w){super(g,"twitter.com",m,w)}}function ur(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Yu(v){var g,m;if(!v)return null;const{providerId:w}=v,S=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},R=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const te=null===(m=null===(g=Zt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(te)return new io(R,"anonymous"!==te&&"custom"!==te?te:null)}if(!w)return null;switch(w){case"facebook.com":return new Id(R,S);case"github.com":return new Bo(R,S);case"google.com":return new Zi(R,S);case"twitter.com":return new Dd(R,S,v.screenName||null);case"custom":case"anonymous":return new io(R,null);default:return new io(R,w,S)}}(m)}function On(v,g,m,w){return(0,L.m9)(v).onIdTokenChanged(g,m,w)}function sc(v,g,m,w){return(0,L.m9)(v).onAuthStateChanged(g,m,w)}class ps{constructor(g,m){this.type=g,this.credential=m}static _fromIdtoken(g){return new ps("enroll",g)}static _fromMfaPendingCredential(g){return new ps("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,w;if(null==g?void 0:g.multiFactorSession){if(null===(m=g.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ps._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(w=g.multiFactorSession)||void 0===w?void 0:w.idToken)return ps._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Oa{constructor(g,m,w){this.session=g,this.hints=m,this.signInResolver=w}static _fromError(g,m){const w=Be(g),S=m.customData._serverResponse,R=(S.mfaInfo||[]).map(Re=>gt._fromServerResponse(w,Re));ne(S.mfaPendingCredential,w,"internal-error");const te=ps._fromMfaPendingCredential(S.mfaPendingCredential);return new Oa(te,R,function(){var Re=(0,h.Z)(function*(it){const pt=yield it._process(w,te);delete S.mfaInfo,delete S.mfaPendingCredential;const qt=Object.assign(Object.assign({},S),{idToken:pt.idToken,refreshToken:pt.refreshToken});switch(m.operationType){case"signIn":const Mn=yield Er._fromIdTokenResponse(w,m.operationType,qt);return yield w._updateCurrentUser(Mn.user),Mn;case"reauthenticate":return ne(m.user,w,"internal-error"),Er._forOperation(m.user,m.operationType,qt);default:Ze(w,"internal-error")}});return function(it){return Re.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,h.Z)(function*(){return m.signInResolver(g)})()}}function lu(v,g){var m;const w=(0,L.m9)(v),S=g;return ne(g.customData.operationType,w,"argument-error"),ne(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),Oa._fromError(w,S)}function lr(v,g){return tn(v,"POST","/v2/accounts/mfaEnrollment:start",$t(v,g))}class jo{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>gt._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new jo(g)}getSession(){var g=this;return(0,h.Z)(function*(){return ps._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,m){var w=this;return(0,h.Z)(function*(){const S=g,R=yield w.getSession(),te=yield rt(w.user,S._process(w.user.auth,R,m));return yield w.user._updateTokensIfNecessary(te),w.user.reload()})()}unenroll(g){var m=this;return(0,h.Z)(function*(){const w="string"==typeof g?g:g.uid,S=yield m.user.getIdToken(),R=yield rt(m.user,function so(v,g){return tn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(v,g))}(m.user.auth,{idToken:S,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:te})=>te!==w),yield m.user._updateTokensIfNecessary(R);try{yield m.user.reload()}catch(te){if("auth/user-token-expired"!==te.code)throw te}})()}}const ac=new WeakMap;function uc(v){const g=(0,L.m9)(v);return ac.has(g)||ac.set(g,jo._fromUser(g)),ac.get(g)}const gs="__sak";class $o{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(gs,"1"),this.storage.removeItem(gs),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const cr=(()=>{class v extends $o{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function lc(){const v=(0,L.z$)();return q(v)||Ut(v)}()&&function qi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=_r(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const S=this.storage.getItem(w),R=this.localCache[w];S!==R&&m(w,R,S)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((Re,it,pt)=>{this.notifyListeners(Re,pt)});const S=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Re=this.storage.getItem(S);if(m.newValue!==Re)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!w)return}const R=()=>{const Re=this.storage.getItem(S);!w&&this.localCache[S]===Re||this.notifyListeners(S,Re)},te=this.storage.getItem(S);!function Bt(){return(0,L.w1)()&&10===document.documentMode}()||te===m.newValue||m.newValue===m.oldValue?R():setTimeout(R,10)}notifyListeners(m,w){this.localCache[m]=w;const S=this.listeners[m];if(S)for(const R of Array.from(S))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var S=()=>super._set,R=this;return(0,h.Z)(function*(){yield S().call(R,m,w),R.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,S=this;return(0,h.Z)(function*(){const R=yield w().call(S,m);return S.localCache[m]=JSON.stringify(R),R})()}_remove(m){var w=()=>super._remove,S=this;return(0,h.Z)(function*(){yield w().call(S,m),delete S.localCache[m]})()}}return v.type="LOCAL",v})(),Pa=(()=>{class v extends $o{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let du=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(R=>R.isListeningto(m));if(w)return w;const S=new v(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,h.Z)(function*(){const S=m,{eventId:R,eventType:te,data:Re}=S.data,it=w.handlersMap[te];if(!(null==it?void 0:it.size))return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:te});const pt=Array.from(it).map(function(){var Mn=(0,h.Z)(function*(di){return di(S.origin,Re)});return function(di){return Mn.apply(this,arguments)}}()),qt=yield function cu(v){return Promise.all(v.map(function(){var g=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return g.apply(this,arguments)}}()))}(pt);S.ports[0].postMessage({status:"done",eventId:R,eventType:te,response:qt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ho(v="",g=10){let m="";for(let w=0;w<g;w++)m+=Math.floor(10*Math.random());return v+m}class ys{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,w=50){var S=this;return(0,h.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let te,Re;return new Promise((it,pt)=>{const qt=Ho("",20);R.port1.start();const Mn=setTimeout(()=>{pt(new Error("unsupported_event"))},w);Re={messageChannel:R,onMessage(di){const zs=di;if(zs.data.eventId===qt)switch(zs.data.status){case"ack":clearTimeout(Mn),te=setTimeout(()=>{pt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),it(zs.data.response);break;default:clearTimeout(Mn),clearTimeout(te),pt(new Error("invalid_response"))}}},S.handlers.add(Re),R.port1.addEventListener("message",Re.onMessage),S.target.postMessage({eventType:g,eventId:qt,data:m},[R.port2])}).finally(()=>{Re&&S.removeMessageHandler(Re)})})()}}function En(){return window}function Et(){return void 0!==En().WorkerGlobalScope&&"function"==typeof En().importScripts}function hu(){return(hu=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const cc="firebaseLocalStorageDb",fr="firebaseLocalStorage",Hr="fbase_key";class _s{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Us(v,g){return v.transaction([fr],g?"readwrite":"readonly").objectStore(fr)}function fu(){const v=indexedDB.open(cc,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(fr,{keyPath:Hr})}catch(S){m(S)}}),v.addEventListener("success",(0,h.Z)(function*(){const w=v.result;w.objectStoreNames.contains(fr)?g(w):(w.close(),yield function ai(){const v=indexedDB.deleteDatabase(cc);return new _s(v).toPromise()}(),g(yield fu()))}))})}function pu(v,g,m){return Di.apply(this,arguments)}function Di(){return(Di=(0,h.Z)(function*(v,g,m){const w=Us(v,!0).put({[Hr]:g,value:m});return new _s(w).toPromise()})).apply(this,arguments)}function Go(){return(Go=(0,h.Z)(function*(v,g){const m=Us(v,!1).get(g),w=yield new _s(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Fn(v,g){const m=Us(v,!0).delete(g);return new _s(m).toPromise()}const el=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield fu()),m.db})()}_withRetries(m){var w=this;return(0,h.Z)(function*(){let S=0;for(;;)try{const R=yield w._openDb();return yield m(R)}catch(R){if(S++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Et()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=du._getInstance(function Ju(){return Et()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(S,R){return{keyProcessed:(yield m._poll()).includes(R.key)}});return function(S,R){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var w,S;if(m.activeServiceWorker=yield function Na(){return hu.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ys(m.activeServiceWorker);const R=yield m.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(S=R[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Qu(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield fu();return yield pu(m,gs,"1"),yield Fn(m,gs),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var S=this;return(0,h.Z)(function*(){return S._withPendingWrite((0,h.Z)(function*(){return yield S._withRetries(R=>pu(R,m,w)),S.localCache[m]=w,S.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,h.Z)(function*(){const S=yield w._withRetries(R=>function Ki(v,g){return Go.apply(this,arguments)}(R,m));return w.localCache[m]=S,S})()}_remove(m){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(S=>Fn(S,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const w=yield m._withRetries(te=>{const Re=Us(te,!1).getAll();return new _s(Re).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:te,value:Re}of w)R.add(te),JSON.stringify(m.localCache[te])!==JSON.stringify(Re)&&(m.notifyListeners(te,Re),S.push(te));for(const te of Object.keys(m.localCache))m.localCache[te]&&!R.has(te)&&(m.notifyListeners(te,null),S.push(te));return S})()}notifyListeners(m,w){this.localCache[m]=w;const S=this.listeners[m];if(S)for(const R of Array.from(S))R(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function tl(v,g){return tn(v,"POST","/v2/accounts/mfaSignIn:start",$t(v,g))}function ao(){return(ao=(0,h.Z)(function*(v){return(yield tn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function uo(v){return new Promise((g,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=g,w.onerror=S=>{const R=Fe("internal-error");R.customData=S,m(R)},w.type="text/javascript",w.charset="UTF-8",function gu(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(w)})}function Bs(v){return`__${v}${Math.floor(1e6*Math.random())}`}const js=1e12;class nl{constructor(g){this.auth=g,this.counter=js,this._widgets=new Map}render(g,m){const w=this.counter;return this._widgets.set(w,new co(g,this.auth.name,m||{})),this.counter++,w}reset(g){var m;const w=g||js;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(g){var m;return(null===(m=this._widgets.get(g||js))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,h.Z)(function*(){var w;return null===(w=m._widgets.get(g||js))||void 0===w||w.execute(),""})()}}class co{constructor(g,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof g?document.getElementById(g):g;ne(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xf(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qo=Bs("rcb"),Ln=new We(3e4,6e4);class ep{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!En().grecaptcha}load(g,m=""){return ne(function Sd(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(En().grecaptcha):new Promise((w,S)=>{const R=En().setTimeout(()=>{S(Fe(g,"network-request-failed"))},Ln.get());En()[qo]=()=>{En().clearTimeout(R),delete En()[qo];const Re=En().grecaptcha;if(!Re)return void S(Fe(g,"internal-error"));const it=Re.render;Re.render=(pt,qt)=>{const Mn=it(pt,qt);return this.counter++,Mn},this.hostLanguage=m,w(Re)},uo(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:qo,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(R),S(Fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!En().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Md{load(g){return(0,h.Z)(function*(){return new nl(g)})()}clearedOneInstance(){}}const rl="recaptcha",fc={theme:"light",type:"image"};class pc{constructor(g,m=Object.assign({},fc),w){this.parameters=m,this.type=rl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Be(w),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof g?document.getElementById(g):g;ne(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Md:new ep,this.validateStartingState()}verify(){var g=this;return(0,h.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(m)||new Promise(R=>{const te=Re=>{!Re||(g.tokenChangeListeners.delete(te),R(Re))};g.tokenChangeListeners.add(te),g.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof g)g(m);else if("string"==typeof g){const w=En()[g];"function"==typeof w&&w(m)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,h.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,h.Z)(function*(){ne(Ve()&&!Et(),g.auth,"internal-error"),yield function $s(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function oo(v){return ao.apply(this,arguments)}(g.auth);ne(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class il{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=Fo._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function jn(v,g,m){return zo.apply(this,arguments)}function zo(){return(zo=(0,h.Z)(function*(v,g,m){const w=Be(v),S=yield li(w,g,(0,L.m9)(m));return new il(S,R=>ou(w,R))})).apply(this,arguments)}function ui(v,g,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v);yield ks(!1,w,"phone");const S=yield li(w.auth,g,(0,L.m9)(m));return new il(S,R=>ds(w,R))})).apply(this,arguments)}function gc(v,g,m){return Or.apply(this,arguments)}function Or(){return(Or=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v),S=yield li(w.auth,g,(0,L.m9)(m));return new il(S,R=>Vo(w,R))})).apply(this,arguments)}function li(v,g,m){return ho.apply(this,arguments)}function ho(){return(ho=(0,h.Z)(function*(v,g,m){var w;const S=yield m.verify();try{let R;if(ne("string"==typeof S,v,"argument-error"),ne(m.type===rl,v,"argument-error"),R="string"==typeof g?{phoneNumber:g}:g,"session"in R){const te=R.session;if("phoneNumber"in R)return ne("enroll"===te.type,v,"internal-error"),(yield lr(v,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{ne("signin"===te.type,v,"internal-error");const Re=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return ne(Re,v,"missing-multi-factor-info"),(yield tl(v,{mfaPendingCredential:te.credential,mfaEnrollmentId:Re,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield Gf(v,{phoneNumber:R.phoneNumber,recaptchaToken:S});return te}}finally{m._reset()}})).apply(this,arguments)}function Hs(v,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,h.Z)(function*(v,g){yield vn((0,L.m9)(v),g)})).apply(this,arguments)}let fo=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Be(m)}verifyPhoneNumber(m,w){return li(this.auth,m,(0,L.m9)(w))}static credential(m,w){return Fo._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:S}=m;return w&&S?Fo._fromTokenResponse(w,S):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Es(v,g){return g?re(g):(ne(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class po extends an{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return zn(g,this._buildIdpRequest())}_linkToIdToken(g,m){return zn(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return zn(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function mc(v){return to(v.auth,new po(v),v.bypassAuthState)}function xd(v){const{auth:g,user:m}=v;return ne(m,g,"internal-error"),su(m,new po(v),v.bypassAuthState)}function sl(v){return pr.apply(this,arguments)}function pr(){return(pr=(0,h.Z)(function*(v){const{auth:g,user:m}=v;return ne(m,g,"internal-error"),vn(m,new po(v),v.bypassAuthState)})).apply(this,arguments)}class yc{constructor(g,m,w,S,R=!1){this.auth=g,this.resolver=w,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,h.Z)(function*(w,S){g.pendingPromise={resolve:w,reject:S};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(R){g.reject(R)}});return function(w,S){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:S,postBody:R,tenantId:te,error:Re,type:it}=g;if(Re)return void m.reject(Re);const pt={auth:m.auth,requestUri:w,sessionId:S,tenantId:te||void 0,postBody:R||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(it)(pt))}catch(qt){m.reject(qt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return mc;case"linkViaPopup":case"linkViaRedirect":return sl;case"reauthViaPopup":case"reauthViaRedirect":return xd;default:Ze(this.auth,"internal-error")}}resolve(g){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mu=new We(2e3,1e4);function n0(v,g,m){return yu.apply(this,arguments)}function yu(){return(yu=(0,h.Z)(function*(v,g,m){const w=Be(v);Ce(v,g,Ns);const S=Es(w,m);return new Wo(w,"signInViaPopup",g,S).executeNotNull()})).apply(this,arguments)}function _c(v,g,m){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v);Ce(w.auth,g,Ns);const S=Es(w.auth,m);return new Wo(w.auth,"reauthViaPopup",g,S,w).executeNotNull()})).apply(this,arguments)}function vc(v,g,m){return ol.apply(this,arguments)}function ol(){return(ol=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v);Ce(w.auth,g,Ns);const S=Es(w.auth,m);return new Wo(w.auth,"linkViaPopup",g,S,w).executeNotNull()})).apply(this,arguments)}let Wo=(()=>{class v extends yc{constructor(m,w,S,R,te){super(m,w,R,te),this.provider=S,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const w=yield m.execute();return ne(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,h.Z)(function*(){Ie(1===m.filter.length,"Popup operations only handle one event");const w=Ho();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(Fe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,S;this.pollId=(null===(S=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,mu.get())};m()}}return v.currentPopupAction=null,v})();const Ji=new Map;class Gr extends yc{constructor(g,m,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,h.Z)(function*(){let w=Ji.get(m.auth._key());if(!w){try{const R=(yield function fm(v,g){return qs.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;w=()=>Promise.resolve(R)}catch(S){w=()=>Promise.reject(S)}Ji.set(m.auth._key(),w)}return m.bypassAuthState||Ji.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(w,g);if("unknown"!==g.type){if(g.eventId){const S=yield w.auth._redirectUserForId(g.eventId);if(S)return w.user=S,m().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function qs(){return(qs=(0,h.Z)(function*(v,g){const m=D(g),w=I(v);if(!(yield w._isAvailable()))return!1;const S="true"===(yield w._get(m));return yield w._remove(m),S})).apply(this,arguments)}function ws(v,g){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,h.Z)(function*(v,g){return I(v)._set(D(g),"true")})).apply(this,arguments)}function Od(){Ji.clear()}function al(v,g){Ji.set(v._key(),g)}function I(v){return re(v._redirectPersistence)}function D(v){return vt("pendingRedirect",v.config.apiKey,v.name)}function O(v,g,m){return function F(v,g,m){return J.apply(this,arguments)}(v,g,m)}function J(){return(J=(0,h.Z)(function*(v,g,m){const w=Be(v);Ce(v,g,Ns);const S=Es(w,m);return yield ws(S,w),S._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function ce(v,g,m){return function Me(v,g,m){return Je.apply(this,arguments)}(v,g,m)}function Je(){return(Je=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v);Ce(w.auth,g,Ns);const S=Es(w.auth,m);yield ws(S,w.auth);const R=yield Ai(w);return S._openRedirect(w.auth,g,"reauthViaRedirect",R)})).apply(this,arguments)}function Dt(v,g,m){return function wt(v,g,m){return kt.apply(this,arguments)}(v,g,m)}function kt(){return(kt=(0,h.Z)(function*(v,g,m){const w=(0,L.m9)(v);Ce(w.auth,g,Ns);const S=Es(w.auth,m);yield ks(!1,w,g.providerId),yield ws(S,w.auth);const R=yield Ai(w);return S._openRedirect(w.auth,g,"linkViaRedirect",R)})).apply(this,arguments)}function At(v,g){return qr.apply(this,arguments)}function qr(){return(qr=(0,h.Z)(function*(v,g){return yield Be(v)._initializationPromise,Vn(v,g,!1)})).apply(this,arguments)}function Vn(v,g){return zr.apply(this,arguments)}function zr(){return(zr=(0,h.Z)(function*(v,g,m=!1){const w=Be(v),S=Es(w,g),te=yield new Gr(w,S,m).execute();return te&&!m&&(delete te.user._redirectEventId,yield w._persistUserIfCurrent(te.user),yield w._setRedirectUser(null,g)),te})).apply(this,arguments)}function Ai(v){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,h.Z)(function*(v){const g=Ho(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class go{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(m=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function _u(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ul(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var w;if(g.error&&!ul(g)){const S=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Fe(this.auth,S))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const w=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ko(g))}saveEventToCache(g){this.cachedEventUids.add(Ko(g)),this.lastProcessedEventTime=Date.now()}}function Ko(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function ul({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Ec(v){return vu.apply(this,arguments)}function vu(){return(vu=(0,h.Z)(function*(v,g={}){return tn(v,"GET","/v1/projects",g)})).apply(this,arguments)}const tp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Yo=/^https?/;function wc(){return(wc=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield Ec(v);for(const m of g)try{if(pm(m))return}catch(w){}Ze(v,"unauthorized-domain")})).apply(this,arguments)}function pm(v){const g=le(),{protocol:m,hostname:w}=new URL(g);if(v.startsWith("chrome-extension://")){const te=new URL(v);return""===te.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&te.hostname===w}if(!Yo.test(m))return!1;if(tp.test(v))return w===v;const S=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(w)}const Pd=new We(3e4,6e4);function bc(){const v=En().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Qo=null;function gm(v){return Qo=Qo||function Eu(v){return new Promise((g,m)=>{var w,S,R;function te(){bc(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{bc(),m(Fe(v,"network-request-failed"))},timeout:Pd.get()})}if(null===(S=null===(w=En().gapi)||void 0===w?void 0:w.iframes)||void 0===S?void 0:S.Iframe)g(gapi.iframes.getContext());else{if(!(null===(R=En().gapi)||void 0===R?void 0:R.load)){const Re=Bs("iframefcb");return En()[Re]=()=>{gapi.load?te():m(Fe(v,"network-request-failed"))},uo(`https://apis.google.com/js/api.js?onload=${Re}`).catch(it=>m(it))}te()}}).catch(g=>{throw Qo=null,g})}(v),Qo}const mm=new We(5e3,15e3),ka={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},r0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s0(v){const g=v.config;ne(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?cn(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:v.name,v:P.SDK_VERSION},S=r0.get(v.config.apiHost);S&&(w.eid=S);const R=v._getFrameworks();return R.length&&(w.fw=R.join(",")),`${m}?${(0,L.xO)(w).slice(1)}`}function dl(){return dl=(0,h.Z)(function*(v){const g=yield gm(v),m=En().gapi;return ne(m,v,"internal-error"),g.open({where:document.body,url:s0(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ka,dontclear:!0},w=>new Promise(function(){var S=(0,h.Z)(function*(R,te){yield w.restyle({setHideOnLeave:!1});const Re=Fe(v,"network-request-failed"),it=En().setTimeout(()=>{te(Re)},mm.get());function pt(){En().clearTimeout(it),R(w)}w.ping(pt).then(pt,()=>{te(Re)})});return function(R,te){return S.apply(this,arguments)}}()))}),dl.apply(this,arguments)}const Nd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hl{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Xi(v,g,m,w,S,R){ne(v.config.authDomain,v,"auth-domain-config-required"),ne(v.config.apiKey,v,"invalid-api-key");const te={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:P.SDK_VERSION,eventId:S};if(g instanceof Ns){g.setDefaultLanguage(v.languageCode),te.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[it,pt]of Object.entries(R||{}))te[it]=pt}if(g instanceof oi){const it=g.getScopes().filter(pt=>""!==pt);it.length>0&&(te.scopes=it.join(","))}v.tenantId&&(te.tid=v.tenantId);const Re=te;for(const it of Object.keys(Re))void 0===Re[it]&&delete Re[it];return`${function wu({config:v}){return v.emulator?cn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,L.xO)(Re).slice(1)}`}const fl="webStorageSupport",Fd=class vm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pa,this._completeRedirectFn=Vn,this._overrideRedirectResult=al}_openPopup(g,m,w,S){var R=this;return(0,h.Z)(function*(){var te;Ie(null===(te=R.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Re=Xi(g,m,w,le(),S);return function ym(v,g,m,w=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),te=Math.max((window.screen.availWidth-w)/2,0).toString();let Re="";const it=Object.assign(Object.assign({},Nd),{width:w.toString(),height:S.toString(),top:R,left:te}),pt=(0,L.z$)().toLowerCase();m&&(Re=Ae(pt)?"_blank":m),Z(pt)&&(g=g||"http://localhost",it.scrollbars="yes");const qt=Object.entries(it).reduce((di,[zs,Cc])=>`${di}${zs}=${Cc},`,"");if(function Br(v=(0,L.z$)()){var g;return Ut(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(pt)&&"_self"!==Re)return function rp(v,g){const m=document.createElement("a");m.href=v,m.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(g||"",Re),new hl(null);const Mn=window.open(g||"",Re,qt);ne(Mn,v,"popup-blocked");try{Mn.focus()}catch(di){}return new hl(Mn)}(g,Re,Ho())})()}_openRedirect(g,m,w,S){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(g),function Wn(v){En().location.href=v}(Xi(g,m,w,le(),S)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:S,promise:R}=this.eventManagers[m];return S?Promise.resolve(S):(Ie(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(g);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(g){var m=this;return(0,h.Z)(function*(){const w=yield function JC(v){return dl.apply(this,arguments)}(g),S=new go(g);return w.register("authEvent",R=>(ne(null==R?void 0:R.authEvent,g,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:S},m.iframes[g._key()]=w,S})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(fl,{type:fl},S=>{var R;const te=null===(R=null==S?void 0:S[0])||void 0===R?void 0:R[fl];void 0!==te&&m(!!te),Ze(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ll(v){return wc.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return _r()||q()||Ut()}};class Vd extends class Ld{constructor(g){this.factorId=g}_process(g,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,w);case"signin":return this._finalizeSignIn(g,m.credential);default:return he("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Vd(g)}_finalizeEnroll(g,m,w){return function Td(v,g){return tn(v,"POST","/v2/accounts/mfaEnrollment:finalize",$t(v,g))}(g,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function Ra(v,g){return tn(v,"POST","/v2/accounts/mfaSignIn:finalize",$t(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ip=(()=>{class v{constructor(){}static assertion(m){return Vd._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Ud="@firebase/auth";class Em{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(w=>{var S;g((null===(S=w)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function sp(v=(0,P.getApp)()){const g=(0,P._getProvider)(v,"auth");return g.isInitialized()?g.getImmediate():function se(v,g){const m=(0,P._getProvider)(v,"auth");if(m.isInitialized()){const S=m.getImmediate(),R=m.getOptions();if((0,L.vZ)(R,null!=g?g:{}))return S;Ze(S,"already-initialized")}return m.initialize({options:g})}(v,{popupRedirectResolver:Fd,persistence:[el,cr,Pa]})}!function wm(v){(0,P._registerComponent)(new fe.wA("auth",(g,{options:m})=>{const w=g.getProvider("app").getImmediate(),S=g.getProvider("heartbeat"),{apiKey:R,authDomain:te}=w.options;return((Re,it)=>{ne(R&&!R.includes(":"),"invalid-api-key",{appName:Re.name}),ne(!(null==te?void 0:te.includes(":")),"argument-error",{appName:Re.name});const pt={apiKey:R,authDomain:te,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sr(v)},qt=new jr(Re,it,pt);return function ye(v,g){const m=(null==g?void 0:g.persistence)||[],w=(Array.isArray(m)?m:[m]).map(re);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(w,null==g?void 0:g.popupRedirectResolver)}(qt,m),qt})(w,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,w)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new fe.wA("auth-internal",g=>{const m=Be(g.getProvider("auth").getImmediate());return new Em(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Ud,"0.20.1",function Bd(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,P.registerVersion)(Ud,"0.20.1","esm2017")}("Browser")},2090:(et,be,N)=>{N.d(be,{BH:()=>He,LL:()=>le,ZR:()=>ye,zI:()=>K,US:()=>fe,tV:()=>ge,L:()=>ae,$s:()=>Ht,r3:()=>$t,Sg:()=>ke,ne:()=>Hi,vZ:()=>mr,ZB:()=>B,pd:()=>wi,m9:()=>dn,z$:()=>Oe,jU:()=>De,ru:()=>Ke,d:()=>Fe,xb:()=>In,w1:()=>Pe,hl:()=>he,uI:()=>tt,UG:()=>Ee,b$:()=>Ze,G6:()=>ne,Mn:()=>Ce,xO:()=>$i,zd:()=>ti,eu:()=>Ie});const ie=function(U){const G=[];let z=0;for(let ve=0;ve<U.length;ve++){let $=U.charCodeAt(ve);$<128?G[z++]=$:$<2048?(G[z++]=$>>6|192,G[z++]=63&$|128):55296==(64512&$)&&ve+1<U.length&&56320==(64512&U.charCodeAt(ve+1))?($=65536+((1023&$)<<10)+(1023&U.charCodeAt(++ve)),G[z++]=$>>18|240,G[z++]=$>>12&63|128,G[z++]=$>>6&63|128,G[z++]=63&$|128):(G[z++]=$>>12|224,G[z++]=$>>6&63|128,G[z++]=63&$|128)}return G},fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,G){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let $=0;$<U.length;$+=3){const X=U[$],Ne=$+1<U.length,Qe=Ne?U[$+1]:0,dt=$+2<U.length,Ot=dt?U[$+2]:0;let Gn=(15&Qe)<<2|Ot>>6,ue=63&Ot;dt||(ue=64,Ne||(Gn=64)),ve.push(z[X>>2],z[(3&X)<<4|Qe>>4],z[Gn],z[ue])}return ve.join("")},encodeString(U,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(U):this.encodeByteArray(ie(U),G)},decodeString(U,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(U):function(U){const G=[];let z=0,ve=0;for(;z<U.length;){const $=U[z++];if($<128)G[ve++]=String.fromCharCode($);else if($>191&&$<224){const X=U[z++];G[ve++]=String.fromCharCode((31&$)<<6|63&X)}else if($>239&&$<365){const dt=((7&$)<<18|(63&U[z++])<<12|(63&U[z++])<<6|63&U[z++])-65536;G[ve++]=String.fromCharCode(55296+(dt>>10)),G[ve++]=String.fromCharCode(56320+(1023&dt))}else{const X=U[z++],Ne=U[z++];G[ve++]=String.fromCharCode((15&$)<<12|(63&X)<<6|63&Ne)}}return G.join("")}(this.decodeStringToByteArray(U,G))},decodeStringToByteArray(U,G){this.init_();const z=G?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let $=0;$<U.length;){const X=z[U.charAt($++)],Qe=$<U.length?z[U.charAt($)]:0;++$;const Ot=$<U.length?z[U.charAt($)]:64;++$;const vt=$<U.length?z[U.charAt($)]:64;if(++$,null==X||null==Qe||null==Ot||null==vt)throw Error();ve.push(X<<2|Qe>>4),64!==Ot&&(ve.push(Qe<<4&240|Ot>>2),64!==vt&&ve.push(Ot<<6&192|vt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ae=function(U){return function(U){const G=ie(U);return fe.encodeByteArray(G,!0)}(U).replace(/\./g,"")},ge=function(U){try{return fe.decodeString(U,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function B(U,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return G}for(const z in G)!G.hasOwnProperty(z)||!Q(z)||(U[z]=B(U[z],G[z]));return U}function Q(U){return"__proto__"!==U}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,z)=>{this.resolve=G,this.reject=z})}wrapCallback(G){return(z,ve)=>{z?this.reject(z):this.resolve(ve),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(z):G(z,ve))}}}function ke(U,G){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=G||"demo-project",$=U.iat||0,X=U.sub||U.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:$,exp:$+3600,auth_time:$,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Ne)),""].join(".")}function Oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function tt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function Ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function De(){return"object"==typeof self&&self.self===self}function Ke(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){return Oe().indexOf("Electron/")>=0}function Pe(){const U=Oe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ce(){return Oe().indexOf("MSAppHost/")>=0}function ne(){return!Ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){return"object"==typeof indexedDB}function Ie(){return new Promise((U,G)=>{try{let z=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(ve);$.onsuccess=()=>{$.result.close(),z||self.indexedDB.deleteDatabase(ve),U(!0)},$.onupgradeneeded=()=>{z=!1},$.onerror=()=>{var X;G((null===(X=$.error)||void 0===X?void 0:X.message)||"")}}catch(z){G(z)}})}function K(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(G,z,ve){super(z),this.code=G,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(G,z,ve){this.service=G,this.serviceName=z,this.errors=ve}create(G,...z){const ve=z[0]||{},$=`${this.service}/${G}`,X=this.errors[G],Ne=X?function Ve(U,G){return U.replace(ct,(z,ve)=>{const $=G[ve];return null!=$?String($):`<${ve}?>`})}(X,ve):"Error";return new ye($,`${this.serviceName}: ${Ne} (${$}).`,ve)}}const ct=/\{\$([^}]+)}/g;function $t(U,G){return Object.prototype.hasOwnProperty.call(U,G)}function In(U){for(const G in U)if(Object.prototype.hasOwnProperty.call(U,G))return!1;return!0}function mr(U,G){if(U===G)return!0;const z=Object.keys(U),ve=Object.keys(G);for(const $ of z){if(!ve.includes($))return!1;const X=U[$],Ne=G[$];if(Sn(X)&&Sn(Ne)){if(!mr(X,Ne))return!1}else if(X!==Ne)return!1}for(const $ of ve)if(!z.includes($))return!1;return!0}function Sn(U){return null!==U&&"object"==typeof U}function $i(U){const G=[];for(const[z,ve]of Object.entries(U))Array.isArray(ve)?ve.forEach($=>{G.push(encodeURIComponent(z)+"="+encodeURIComponent($))}):G.push(encodeURIComponent(z)+"="+encodeURIComponent(ve));return G.length?"&"+G.join("&"):""}function ti(U){const G={};return U.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[$,X]=ve.split("=");G[decodeURIComponent($)]=decodeURIComponent(X)}}),G}function wi(U){const G=U.indexOf("?");if(!G)return"";const z=U.indexOf("#",G);return U.substring(G,z>0?z:void 0)}function Hi(U,G){const z=new ft(U,G);return z.subscribe.bind(z)}class ft{constructor(G,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{G(this)}).catch(ve=>{this.error(ve)})}next(G){this.forEachObserver(z=>{z.next(G)})}error(G){this.forEachObserver(z=>{z.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,z,ve){let $;if(void 0===G&&void 0===z&&void 0===ve)throw new Error("Missing Observer.");$=function Cn(U,G){if("object"!=typeof U||null===U)return!1;for(const z of G)if(z in U&&"function"==typeof U[z])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:z,complete:ve},void 0===$.next&&($.next=nn),void 0===$.error&&($.error=nn),void 0===$.complete&&($.complete=nn);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$.error(this.finalError):$.complete()}catch(Ne){}}),this.observers.push($),X}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,G)}sendOne(G,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{z(this.observers[G])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nn(){}function Ht(U,G=1e3,z=2){const ve=G*Math.pow(z,U),$=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+$)}function dn(U){return U&&U._delegate?U._delegate:U}},2790:(et,be,N)=>{var h=N(5e3);let L=null;function P(){return L}const de=new h.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ge(){return(0,h.LFG)(B)}()},providedIn:"platform"}),n})();const H=new h.OlP("Location Initialized");let B=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function He(){return new B((0,h.LFG)(de))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function tt(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function De(n){const e=(0,h.LFG)(de).location;return new Ze((0,h.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ke=new h.OlP("appBaseHref");let Ze=(()=>{class n extends Ee{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+tt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+tt(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+tt(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae),h.LFG(Ke,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+tt(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+tt(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae),h.LFG(Ke,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(ne(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+tt(r))}normalize(t){return n.stripTrailingSlash(function Ge(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ne(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+tt(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=tt,n.joinWithSlash=ke,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(h.LFG(Ee),h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ce(){return new Pe((0,h.LFG)(Ee),(0,h.LFG)(ae))}()},providedIn:"root"}),n})();function ne(n){return n.replace(/\/index.html$/,"")}let qn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new hn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Hl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Hl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class hn{constructor(){this.$implicit=null,this.ngIf=null}}function Hl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}class zl{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Hf{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const as=new Hf,Gf=new zl;let tu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return as;if((0,h.F4k)(t))return Gf;throw function zn(n,e){return new h.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1}),n})(),Rs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Er(n){return"server"===n}let ru=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new iu((0,h.LFG)(de),window)}),n})();class iu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function cs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=$u(this.window.history)||$u(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function $u(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ks extends class _a extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){L||(L=n)}(new ks)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function su(){return fn=fn||document.querySelector("base"),fn?fn.getAttribute("href"):null}();return null==t?null:function to(n){va=va||document.createElement("a"),va.setAttribute("href",n);const e=va.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){fn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Oo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let va,fn=null;const or=new h.OlP("TRANSITION_ID"),kn=[{provide:h.ip1,useFactory:function ou(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[or,de,h.zs3],multi:!0}];class ds{static init(){(0,h.VLi)(new ds)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let ar=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Vo=new h.OlP("EventManagerPlugins");let zi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vo),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Gu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let $r=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Fs=(()=>{class n extends $r{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ls),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ls))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ls(n){P().remove(n)}const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ea=/%COMP%/g;function Se(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Se(n,i,t):(i=i.replace(Ea,n),t.push(i))}return t}function Gt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let xn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Vs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new zu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Wu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Se(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zi),h.LFG(Fs),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Vs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=gt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Gt(r)):this.eventManager.addEventListener(e,t,Gt(r))}}class zu extends Vs{constructor(e,t,r,i){super(e),this.component=r;const u=Se(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Ca(n){return"_ngcontent-%COMP%".replace(Ea,n)}(i+"-"+r.id),this.hostAttr=function Cd(n){return"_nghost-%COMP%".replace(Ea,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Wu extends Vs{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Se(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ec=(()=>{class n extends Gu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const tc=["alt","control","meta","shift"],Uo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},er={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ii={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Zu=(()=>{class n extends Gu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(tc.forEach(_=>{const b=r.indexOf(_);b>-1&&(r.splice(b,1),c+=_+".")}),c+=u,0!=r.length||0===u.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function Wi(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&er.hasOwnProperty(e)&&(e=er[e]))}return Uo[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),tc.forEach(u=>{u!=i&&Ii[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const rc=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function hs(){ks.makeCurrent(),ds.init()},multi:!0},{provide:de,useFactory:function nc(){return(0,h.RDi)(document),document},deps:[]}]),no=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Aa(){return new h.qLn},deps:[]},{provide:Vo,useClass:ec,multi:!0,deps:[de,h.R0b,h.Lbi]},{provide:Vo,useClass:Zu,multi:!0,deps:[de]},{provide:xn,useClass:xn,deps:[zi,Fs,h.AFp]},{provide:h.FYo,useExisting:xn},{provide:$r,useExisting:Fs},{provide:Fs,useClass:Fs,deps:[de]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:zi,useClass:zi,deps:[Vo,h.R0b]},{provide:class vn{},useClass:ar,deps:[]}];let au=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:or,useExisting:h.AFp},kn]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:no,imports:[Rs,h.hGG]}),n})();"undefined"!=typeof window&&window;let gs=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):h.LFG(lc),r},providedIn:"root"}),n})(),lc=(()=>{class n extends gs{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.yhl)(r),(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function $o(n){return new lc(n.get(de))}(h.LFG(h.zs3)),r},providedIn:"root"}),n})();var Tn=N(8996),ms=N(9751);const{isArray:cr}=Array,{getPrototypeOf:Ad,prototype:Pa,keys:cu}=Object;function du(n){if(1===n.length){const e=n[0];if(cr(e))return{args:e,keys:null};if(function Ho(n){return n&&"object"==typeof n&&Ad(n)===Pa}(e)){const t=cu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ys=N(8421),En=N(7669),Wn=N(5403),Et=N(4004);const{isArray:Na}=Array;function Qu(n){return(0,Et.U)(e=>function hu(n,e){return Na(e)?n(...e):n(e)}(n,e))}function Ju(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let dc=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),fr=(()=>{class n extends dc{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Hr=new h.OlP("NgValueAccessor"),ai={provide:Hr,useExisting:(0,h.Gpc)(()=>Di),multi:!0},pu=new h.OlP("CompositionEventMode");let Di=(()=>{class n extends dc{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fu(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(pu,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([ai]),h.qOj]}),n})();function Ki(n){return null==n||0===n.length}function Go(n){return null!=n&&"number"==typeof n.length}const Fn=new h.OlP("NgValidators"),Yi=new h.OlP("NgAsyncValidators"),Xu=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Qi{static min(e){return function el(n){return e=>{if(Ki(e.value)||Ki(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function tl(n){return e=>{if(Ki(e.value)||Ki(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Ra(e)}static requiredTrue(e){return function oo(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function ao(n){return Ki(n.value)||Xu.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function gu(n){return e=>Ki(e.value)||!Go(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function uo(n){return e=>Go(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Bs(n){if(!n)return Ti;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ki(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Ln(e)}static composeAsync(e){return ep(e)}}function Ra(n){return Ki(n.value)?{required:!0}:null}function Ti(n){return null}function lo(n){return null!=n}function js(n){const e=(0,h.QGY)(n)?(0,Tn.D)(n):n;return(0,h.CqO)(e),e}function nl(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function co(n,e){return e.map(t=>t(n))}function qo(n){return n.map(e=>function Xf(n){return!n.validate}(e)?e:t=>e.validate(t))}function Ln(n){if(!n)return null;const e=n.filter(lo);return 0==e.length?null:function(t){return nl(co(t,e))}}function hc(n){return null!=n?Ln(qo(n)):null}function ep(n){if(!n)return null;const e=n.filter(lo);return 0==e.length?null:function(t){return function cc(...n){const e=(0,En.jO)(n),{args:t,keys:r}=du(n),i=new ms.y(u=>{const{length:c}=t;if(!c)return void u.complete();const f=new Array(c);let _=c,b=c;for(let A=0;A<c;A++){let x=!1;(0,ys.Xf)(t[A]).subscribe((0,Wn.x)(u,V=>{x||(x=!0,b--),f[A]=V},()=>_--,void 0,()=>{(!_||!x)&&(b||u.next(r?Ju(r,f):f),u.complete())}))}});return e?i.pipe(Qu(e)):i}(co(t,e).map(js)).pipe((0,Et.U)(nl))}}function Sd(n){return null!=n?ep(qo(n)):null}function Md(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function rl(n){return n._rawValidators}function fc(n){return n._rawAsyncValidators}function pc(n){return n?Array.isArray(n)?n:[n]:[]}function $s(n,e){return Array.isArray(n)?n.includes(e):n===e}function il(n,e){const t=pc(e);return pc(n).forEach(i=>{$s(t,i)||t.push(i)}),t}function jn(n,e){return pc(e).filter(t=>!$s(n,t))}class zo{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Sd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ui extends zo{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class wr extends zo{get formDirective(){return null}get path(){return null}}class gc{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let ho=(()=>{class n extends gc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ui,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),Hs=(()=>{class n extends gc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(wr,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function ci(n,e){qs(n,e),e.valueAccessor.writeValue(n.value),function Zo(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&al(n,e)})}(n,e),function I(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Od(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&al(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function fm(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ji(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ws(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Gr(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function qs(n,e){const t=rl(n);null!==e.validator?n.setValidators(Md(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=fc(n);null!==e.asyncValidator?n.setAsyncValidators(Md(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Gr(e._rawValidators,i),Gr(e._rawAsyncValidators,i)}function ws(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=rl(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=fc(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Gr(e._rawValidators,r),Gr(e._rawAsyncValidators,r),t}function al(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function At(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const zr="VALID",Ai="INVALID",Wr="PENDING",br="DISABLED";function Ko(n){return(vu(n)?n.validators:n)||null}function ul(n){return Array.isArray(n)?hc(n):n||null}function _u(n,e){return(vu(e)?e.asyncValidators:n)||null}function Ec(n){return Array.isArray(n)?Sd(n):n||null}function vu(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const tp=n=>n instanceof Eu,Yo=n=>n instanceof Qo;function wc(n){return tp(n)?n.value:n.getRawValue()}function pm(n,e){const t=Yo(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function Pd(n,e){Yo(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class bc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=ul(this._rawValidators),this._composedAsyncValidatorFn=Ec(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===zr}get invalid(){return this.status===Ai}get pending(){return this.status==Wr}get disabled(){return this.status===br}get enabled(){return this.status!==br}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=ul(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Ec(e)}addValidators(e){this.setValidators(il(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(il(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jn(e,this._rawAsyncValidators))}hasValidator(e){return $s(this._rawValidators,e)}hasAsyncValidator(e){return $s(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=br,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zr,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zr||this.status===Wr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?br:zr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wr,this._hasOwnPendingAsyncValidator=!0;const t=js(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function go(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Yo(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof gm)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?br:this.errors?Ai:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wr)?Wr:this._anyControlsHaveStatus(Ai)?Ai:zr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vu(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Eu extends bc{constructor(e=null,t,r){super(Ko(t),_u(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vu(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){At(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){At(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Qo extends bc{constructor(e,t,r){super(Ko(t),_u(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Pd(this,e),Object.keys(e).forEach(r=>{pm(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=wc(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class gm extends bc{constructor(e,t,r){super(Ko(t),_u(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Pd(this,e),e.forEach((r,i)=>{pm(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>wc(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let hl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Xi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Ld=new h.OlP("NgModelWithFormControlWarning"),Ud={provide:wr,useExisting:(0,h.Gpc)(()=>bu)};let bu=(()=>{class n extends wr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ws(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return ci(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ji(t.control||null,t,!1),At(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function wt(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Ji(r||null,t),tp(i)&&(ci(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function D(n,e){qs(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function O(n,e){return ws(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){qs(this.form,this),this._oldForm&&ws(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Fn,10),h.Y36(Yi,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Ud]),h.qOj,h.TTD]}),n})();const g={provide:ui,useExisting:(0,h.Gpc)(()=>m)};let m=(()=>{class n extends ui{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function kt(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Di?t=u:function Dt(n){return Object.getPrototypeOf(n.constructor)===fr}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Je(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Wo(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(wr,13),h.Y36(Fn,10),h.Y36(Yi,10),h.Y36(Hr,10),h.Y36(Ld,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([g]),h.qOj,h.TTD]}),n})(),ea=(()=>{class n{constructor(){this._validator=Ti}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ti,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const Cu={provide:Fn,useExisting:(0,h.Gpc)(()=>Fa),multi:!0};let Fa=(()=>{class n extends ea{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function bm(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>Ra}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([Cu]),h.qOj]}),n})(),qM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Xi]]}),n})(),Si=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ld,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[qM]}),n})();class Zr{}const mo="*";function rI(n,e){return{type:7,name:n,definitions:e,options:{}}}function d0(n,e=null){return{type:4,styles:e,timings:n}}function h0(n,e=null){return{type:2,steps:n,options:e}}function Ac(n){return{type:6,styles:n,offset:null}}function Im(n,e,t){return{type:0,name:n,styles:e,options:t}}function f0(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function m0(n){Promise.resolve(null).then(n)}class Hd{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){m0(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Gd{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?m0(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const rn=!1;function y0(n){return new h.vHH(3e3,rn)}function _I(){return"undefined"!=typeof window&&void 0!==window.document}function Pm(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Iu(n){switch(n.length){case 0:return new Hd;case 1:return n[0];default:return new Gd(n)}}function D0(n,e,t,r,i={},u={}){const c=[],f=[];let _=-1,b=null;if(r.forEach(A=>{const x=A.offset,V=x==_,W=V&&b||{};Object.keys(A).forEach(Y=>{let _e=Y,Ue=A[Y];if("offset"!==Y)switch(_e=e.normalizePropertyName(_e,c),Ue){case"!":Ue=i[Y];break;case mo:Ue=u[Y];break;default:Ue=e.normalizeStyleValue(Y,_e,Ue,c)}W[_e]=Ue}),V||f.push(W),b=W,_=x}),c.length)throw function b0(n){return new h.vHH(3502,rn)}();return f}function dp(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Wd(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Wd(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Wd(t,"destroy",n)))}}function Wd(n,e,t){const r=t.totalTime,u=hp(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function hp(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Mi(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function T0(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let Nm=(n,e)=>!1,Rm=(n,e,t)=>[],km=null;function La(n){const e=n.parentNode||n.host;return e===km?null:e}(Pm()||"undefined"!=typeof Element)&&(_I()?(km=(()=>document.documentElement)(),Nm=(n,e)=>{for(;e;){if(e===n)return!0;e=La(e)}return!1}):Nm=(n,e)=>n.contains(e),Rm=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let gl=null,Zd=!1;function S0(n){gl||(gl=function M0(){return"undefined"!=typeof document?document.body:null}()||{},Zd=!!gl.style&&"WebkitAppearance"in gl.style);let e=!0;return gl.style&&!function A0(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in gl.style,!e&&Zd&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in gl.style)),e}const Fm=Nm,Lm=Rm;let Vm=(()=>{class n{validateStyleProperty(t){return S0(t)}matchesElement(t,r){return!1}containsElement(t,r){return Fm(t,r)}getParentElement(t){return La(t)}query(t,r,i){return Lm(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],_){return new Hd(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Mc=(()=>{class n{}return n.NOOP=new Vm,n})();const pp="ng-enter",xc="ng-leave",Du="ng-trigger",gp=".ng-trigger",jm="ng-animating",$m=".ng-animating";function ml(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:mp(parseFloat(e[1]),e[2])}function mp(n,e){return"s"===e?1e3*n:n}function Oc(n,e,t){return n.hasOwnProperty("duration")?n:function O0(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(y0()),{duration:0,delay:0,easing:""};i=mp(parseFloat(f[1]),f[2]);const _=f[3];null!=_&&(u=mp(parseFloat(_),f[4]));const b=f[5];b&&(c=b)}else i=n;if(!t){let f=!1,_=e.length;i<0&&(e.push(function oI(){return new h.vHH(3100,rn)}()),f=!0),u<0&&(e.push(function _0(){return new h.vHH(3101,rn)}()),f=!0),f&&e.splice(_,0,y0())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Kd(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Tu(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Kd(n,t);return t}function Gm(n,e,t){return t?e+":"+t+";":""}function P0(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Gm(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Gm(0,EI(t),n.style[t]));n.setAttribute("style",e)}function ra(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=zm(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),Pm()&&P0(n))}function Kr(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=zm(t);n.style[r]=""}),Pm()&&P0(n))}function Yd(n){return Array.isArray(n)?1==n.length?n[0]:h0(n):n}const qm=new RegExp("{{\\s*(.+?)\\s*}}","g");function R0(n){let e=[];if("string"==typeof n){let t;for(;t=qm.exec(n);)e.push(t[1]);qm.lastIndex=0}return e}function yp(n,e,t){const r=n.toString(),i=r.replace(qm,(u,c)=>{let f=e[c];return e.hasOwnProperty(c)||(t.push(function uI(n){return new h.vHH(3003,rn)}()),f=""),f.toString()});return i==r?n:i}function _p(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const k0=/-+([a-z0-9])/g;function zm(n){return n.replace(k0,(...e)=>e[1].toUpperCase())}function EI(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function es(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function lI(n){return new h.vHH(3004,rn)}()}}function Wm(n,e){return window.getComputedStyle(n)[e]}function V0(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Zm(n,e,t){if(":"==n[0]){const _=function ex(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function gI(n){return new h.vHH(3016,rn)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Am(n){return new h.vHH(3015,rn)}()),e;const i=r[1],u=r[2],c=r[3];e.push(Xd(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(Xd(c,i))}(r,t,e)):t.push(n),t}const Jd=new Set(["true","1"]),Km=new Set(["false","0"]);function Xd(n,e){const t=Jd.has(n)||Km.has(n),r=Jd.has(e)||Km.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?Jd.has(n):Km.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?Jd.has(e):Km.has(e)),c&&f}}const Ym=new RegExp("s*:selfs*,?","g");function th(n,e,t,r){return new tx(n).build(e,t,r)}class tx{constructor(e){this._driver=e}build(e,t,r){const i=new DI(t);this._resetContextStyleTimingState(i);const u=es(this,Yd(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function dI(){return new h.vHH(3006,rn)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const _=f,b=_.name;b.toString().split(/\s*,\s*/).forEach(A=>{_.name=A,u.push(this.visitState(_,t))}),_.name=b}else if(1==f.type){const _=this.visitTransition(f,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function hI(){return new h.vHH(3007,rn)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{if(nh(f)){const _=f;Object.keys(_).forEach(b=>{R0(_[b]).forEach(A=>{c.hasOwnProperty(A)||u.add(A)})})}}),u.size&&(_p(u.values()),t.errors.push(function fI(n,e){return new h.vHH(3008,rn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=es(this,Yd(e.animation),t);return{type:1,matchers:V0(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:_l(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>es(this,r,t)),options:_l(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=es(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:_l(e.options)}}visitAnimate(e,t){const r=function nx(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return U0(Oc(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=U0(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||Oc(r,e),U0(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:Ac({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const b={};r.easing&&(b.easing=r.easing),c=Ac(b)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=f,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==mo?r.push(c):t.errors.push(function pI(n){return new h.vHH(3002,rn)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(nh(c)){const f=c,_=f.easing;if(_&&(u=_,delete f.easing),!i)for(let b in f)if(f[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(f=>{if(!this._driver.validateStyleProperty(f))return delete c[f],void t.unsupportedCSSPropertiesFound.add(f);const _=t.collectedStyles[t.currentQuerySelector],b=_[f];let A=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function ta(n,e,t,r,i){return new h.vHH(3010,rn)}()),A=!1),u=b.startTime),A&&(_[f]={startTime:u,endTime:i}),t.options&&function N0(n,e,t){const r=e.params||{},i=R0(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function aI(n){return new h.vHH(3001,rn)}())})}(c[f],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function KM(){return new h.vHH(3011,rn)}()),r;let u=0;const c=[];let f=!1,_=!1,b=0;const A=e.steps.map(yt=>{const _t=this._makeStyleAst(yt,t);let Ct=null!=_t.offset?_t.offset:function TI(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(nh(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(nh(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(_t.styles),ht=0;return null!=Ct&&(u++,ht=_t.offset=Ct),_=_||ht<0||ht>1,f=f||ht<b,b=ht,c.push(ht),_t});_&&t.errors.push(function YM(){return new h.vHH(3012,rn)}()),f&&t.errors.push(function v0(){return new h.vHH(3200,rn)}());const x=e.steps.length;let V=0;u>0&&u<x?t.errors.push(function QM(){return new h.vHH(3202,rn)}()):0==u&&(V=1/(x-1));const W=x-1,Y=t.currentTime,_e=t.currentAnimateTimings,Ue=_e.duration;return A.forEach((yt,_t)=>{const Ct=V>0?_t==W?1:V*_t:c[_t],ht=Ct*Ue;t.currentTime=Y+_e.delay+ht,_e.duration=ht,this._validateStyleAst(yt,t),yt.offset=Ct,r.styles.push(yt)}),r}visitReference(e,t){return{type:8,animation:es(this,Yd(e.animation),t),options:_l(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:_l(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:_l(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function CI(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Ym,"")),n=n.replace(/@\*/g,gp).replace(/@\w+/g,t=>gp+"-"+t.substr(1)).replace(/:animating/g,$m),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Mi(t.collectedStyles,t.currentQuerySelector,{});const f=es(this,Yd(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:_l(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function na(){return new h.vHH(3013,rn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Oc(e.timings,t.errors,!0);return{type:12,animation:es(this,Yd(e.animation),t),timings:r,options:null}}}class DI{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function nh(n){return!Array.isArray(n)&&"object"==typeof n}function _l(n){return n?(n=Kd(n)).params&&(n.params=function II(n){return n?Kd(n):null}(n.params)):n={},n}function U0(n,e,t){return{duration:n,delay:e,easing:t}}function Ep(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class rh{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const rx=new RegExp(":enter","g"),sx=new RegExp(":leave","g");function B0(n,e,t,r,i,u={},c={},f,_,b=[]){return(new ox).buildKeyframes(n,e,t,r,i,u,c,f,_,b)}class ox{buildKeyframes(e,t,r,i,u,c,f,_,b,A=[]){b=b||new rh;const x=new j0(e,t,b,i,u,A,[]);x.options=_,x.currentTimeline.setStyles([c],null,x.errors,_),es(this,r,x);const V=x.timelines.filter(W=>W.containsAnimation());if(Object.keys(f).length){let W;for(let Y=V.length-1;Y>=0;Y--){const _e=V[Y];if(_e.element===t){W=_e;break}}W&&!W.allowOnlyTimelineStyles()&&W.setStyles([f],null,x.errors,_)}return V.length?V.map(W=>W.buildKeyframes()):[Ep(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?ml(r.duration):null,f=null!=r.delay?ml(r.delay):null;return 0!==c&&e.forEach(_=>{const b=t.appendInstructionToTimeline(_,c,f);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),es(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Jm);const c=ml(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>es(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?ml(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),es(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Oc(t.params?yp(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(_=>{f.forwardTime((_.offset||0)*u),f.setStyles(_.styles,_.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?ml(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Jm);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let _=null;f.forEach((b,A)=>{t.currentQueryIndex=A;const x=t.createSubContext(e.options,b);u&&x.delayNextStep(u),b===t.element&&(_=x.currentTimeline),es(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=f-_;break;case"full":_=r.currentStaggerTime}const A=t.currentTimeline;_&&A.delayNextStep(_);const x=A.currentTime;es(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-x+(i.startTime-r.currentTimeline.startTime)}}const Jm={};class j0{constructor(e,t,r,i,u,c,f,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Jm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new Xm(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ml(r.duration)),null!=r.delay&&(i.delay=ml(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=yp(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new j0(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=Jm,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new ax(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(rx,"."+this._enterClassName)).replace(sx,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),f.push(...b)}return!u&&0==f.length&&c.push(function Tm(n){return new h.vHH(3014,rn)}()),f}}class Xm{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Xm(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||mo,this._currentKeyframe[t]=mo}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function Su(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=mo})):Tu(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(f=>{const _=yp(c[f],u,r);this._pendingStyles[f]=_,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:mo),this._updateStyle(f,_)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,_)=>{const b=Tu(f,!0);Object.keys(b).forEach(A=>{const x=b[A];"!"==x?e.add(A):x==mo&&t.add(A)}),r||(b.offset=_/this.duration),i.push(b)});const u=e.size?_p(e.values()):[],c=t.size?_p(t.values()):[];if(r){const f=i[0],_=Kd(f);f.offset=0,_.offset=1,i=[f,_]}return Ep(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class ax extends Xm{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,_=Tu(e[0],!1);_.offset=0,u.push(_);const b=Tu(e[0],!1);b.offset=SI(f),u.push(b);const A=e.length-1;for(let x=1;x<=A;x++){let V=Tu(e[x],!1);V.offset=SI((t+V.offset*r)/c),u.push(V)}r=c,t=0,i="",e=u}return Ep(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function SI(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ey{}class ty extends ey{normalizePropertyName(e,t){return zm(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(H0[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function cI(n,e){return new h.vHH(3005,rn)}())}return c+u}}const H0=(()=>function ny(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function G0(n,e,t,r,i,u,c,f,_,b,A,x,V){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:_,preStyleProps:b,postStyleProps:A,totalTime:x,errors:V}}const ia={};class ry{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function xI(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,f,_,b,A){const x=[],V=this.ast.options&&this.ast.options.params||ia,Y=this.buildStyles(r,f&&f.params||ia,x),_e=_&&_.params||ia,Ue=this.buildStyles(i,_e,x),yt=new Set,_t=new Map,Ct=new Map,ht="void"===i,Vt={params:Object.assign(Object.assign({},V),_e)},Qt=A?[]:B0(e,t,this.ast.animation,u,c,Y,Ue,Vt,b,x);let bn=0;if(Qt.forEach(jl=>{bn=Math.max(jl.duration+jl.delay,bn)}),x.length)return G0(t,this._triggerName,r,i,ht,Y,Ue,[],[],_t,Ct,bn,x);Qt.forEach(jl=>{const $l=jl.element,ER=Mi(_t,$l,{});jl.preStyleProps.forEach(Bf=>ER[Bf]=!0);const Xv=Mi(Ct,$l,{});jl.postStyleProps.forEach(Bf=>Xv[Bf]=!0),$l!==t&&yt.add($l)});const Ss=_p(yt.values());return G0(t,this._triggerName,r,i,ht,Y,Ue,Qt,Ss,_t,Ct,bn)}}class iy{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Kd(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(f=>{let _=c[f];_.length>1&&(_=yp(_,i,t));const b=this.normalizer.normalizePropertyName(f,t);_=this.normalizer.normalizeStyleValue(f,b,_,t),r[b]=_})}}),r}}class q0{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new iy(i.style,i.options&&i.options.params||{},r)}),z0(this.states,"true","1"),z0(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new ry(e,i,this.states))}),this.fallbackTransition=function PI(n,e,t){return new ry(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function z0(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const ih=new rh;class Nc{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=th(this._driver,t,r,[]);if(r.length)throw function Sm(n){return new h.vHH(3503,rn)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=D0(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const f=new Map;if(u?(c=B0(this._driver,t,u,pp,xc,{},{},r,ih,i),c.forEach(A=>{const x=Mi(f,A.element,{});A.postStyleProps.forEach(V=>x[V]=null)})):(i.push(function Mm(){return new h.vHH(3300,rn)}()),c=[]),i.length)throw function C0(n){return new h.vHH(3504,rn)}();f.forEach((A,x)=>{Object.keys(A).forEach(V=>{A[V]=this._driver.computeStyle(x,V,mo)})});const b=Iu(c.map(A=>{const x=f.get(A.element);return this._buildPlayer(A,{},x)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function JM(n){return new h.vHH(3301,rn)}();return t}listen(e,t,r,i){const u=hp(t,"","","");return dp(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const wp="ng-animate-queued",vl="ng-animate-disabled",Z0=[],bp={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},sy={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},bs="__ng_removed";class Fc{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Y0(n){return null!=n?n:null}(r?e.value:e),r){const u=Kd(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const sh="void",Cp=new Fc(sh);class ux{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,_o(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function Sc(n,e){return new h.vHH(3302,rn)}();if(null==r||0==r.length)throw function xm(n){return new h.vHH(3303,rn)}();if(!function kI(n){return"start"==n||"done"==n}(r))throw function I0(n,e){return new h.vHH(3400,rn)}();const u=Mi(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=Mi(this._engine.statesByElement,e,{});return f.hasOwnProperty(t)||(_o(e,Du),_o(e,Du+"-"+t),f[t]=Cp),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(c);_>=0&&u.splice(_,1),this._triggers[t]||delete f[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function mI(n){return new h.vHH(3401,rn)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new Ip(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(_o(e,Du),_o(e,Du+"-"+t),this._engine.statesByElement.set(e,f={}));let _=f[t];const b=new Fc(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&b.absorbOptions(_.options),f[t]=b,_||(_=Cp),b.value!==sh&&_.value===b.value){if(!function oy(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,b.params)){const _e=[],Ue=u.matchStyles(_.value,_.params,_e),yt=u.matchStyles(b.value,b.params,_e);_e.length?this._engine.reportError(_e):this._engine.afterFlush(()=>{Kr(e,Ue),ra(e,yt)})}return}const V=Mi(this._engine.playersByElement,e,[]);V.forEach(_e=>{_e.namespaceId==this.id&&_e.triggerName==t&&_e.queued&&_e.destroy()});let W=u.matchTransition(_.value,b.value,e,b.params),Y=!1;if(!W){if(!i)return;W=u.fallbackTransition,Y=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:W,fromState:_,toState:b,player:c,isFallbackTransition:Y}),Y||(_o(e,wp),c.onStart(()=>{oh(e,wp)})),c.onDone(()=>{let _e=this.players.indexOf(c);_e>=0&&this.players.splice(_e,1);const Ue=this._engine.playersByElement.get(e);if(Ue){let yt=Ue.indexOf(c);yt>=0&&Ue.splice(yt,1)}}),this.players.push(c),V.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,gp,!0);r.forEach(i=>{if(i[bs])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(Object.keys(u).forEach(_=>{if(c.set(_,u[_].value),this._triggers[_]){const b=this.trigger(e,_,sh,i);b&&f.push(b)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Iu(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const _=this._triggers[c].fallbackTransition,b=r[c]||Cp,A=new Fc(sh),x=new Ip(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:b,toState:A,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[bs];(!u||u===bp)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){_o(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const _=hp(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,dp(r.player,f.phase,_,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class K0{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new ux(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let f=this.driver.getParentElement(t);for(;f;){const _=i.get(f);if(_){const b=r.indexOf(_);r.splice(b+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}}else for(let f=u;f>=0;f--)if(this.driver.containsElement(r[f].hostElement,t)){r.splice(f+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const f=this._fetchNamespace(c);f&&t.add(f)}}}return t}trigger(e,t,r,i){if(Dp(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Dp(t))return;const u=t[bs];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),_o(e,vl)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),oh(e,vl))}removeNode(e,t,r,i){if(Dp(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[bs]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return Dp(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,gp,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,$m,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Iu(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[bs];if(r&&r.setForRemoval){if(e[bs]=bp,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(vl))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)_o(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Iu(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Om(n){return new h.vHH(3402,rn)}()}_flushAnimations(e,t){const r=new rh,i=[],u=new Map,c=[],f=new Map,_=new Map,b=new Map,A=new Set;this.disabledNodes.forEach(lt=>{A.add(lt);const It=this.driver.query(lt,".ng-animate-queued",!0);for(let xt=0;xt<It.length;xt++)A.add(It[xt])});const x=this.bodyNode,V=Array.from(this.statesByElement.keys()),W=J0(V,this.collectedEnterElements),Y=new Map;let _e=0;W.forEach((lt,It)=>{const xt=pp+_e++;Y.set(It,xt),lt.forEach(yn=>_o(yn,xt))});const Ue=[],yt=new Set,_t=new Set;for(let lt=0;lt<this.collectedLeaveElements.length;lt++){const It=this.collectedLeaveElements[lt],xt=It[bs];xt&&xt.setForRemoval&&(Ue.push(It),yt.add(It),xt.hasAnimation?this.driver.query(It,".ng-star-inserted",!0).forEach(yn=>yt.add(yn)):_t.add(It))}const Ct=new Map,ht=J0(V,Array.from(yt));ht.forEach((lt,It)=>{const xt=xc+_e++;Ct.set(It,xt),lt.forEach(yn=>_o(yn,xt))}),e.push(()=>{W.forEach((lt,It)=>{const xt=Y.get(It);lt.forEach(yn=>oh(yn,xt))}),ht.forEach((lt,It)=>{const xt=Ct.get(It);lt.forEach(yn=>oh(yn,xt))}),Ue.forEach(lt=>{this.processLeaveNode(lt)})});const Vt=[],Qt=[];for(let lt=this._namespaceList.length-1;lt>=0;lt--)this._namespaceList[lt].drainQueuedTransitions(t).forEach(xt=>{const yn=xt.player,Ei=xt.element;if(Vt.push(yn),this.collectedEnterElements.length){const Ms=Ei[bs];if(Ms&&Ms.setForMove){if(Ms.previousTriggersValues&&Ms.previousTriggersValues.has(xt.triggerName)){const jf=Ms.previousTriggersValues.get(xt.triggerName),vd=this.statesByElement.get(xt.element);vd&&vd[xt.triggerName]&&(vd[xt.triggerName].value=jf)}return void yn.destroy()}}const ju=!x||!this.driver.containsElement(x,Ei),xo=Ct.get(Ei),_d=Y.get(Ei),hr=this._buildInstruction(xt,r,_d,xo,ju);if(hr.errors&&hr.errors.length)return void Qt.push(hr);if(ju)return yn.onStart(()=>Kr(Ei,hr.fromStyles)),yn.onDestroy(()=>ra(Ei,hr.toStyles)),void i.push(yn);if(xt.isFallbackTransition)return yn.onStart(()=>Kr(Ei,hr.fromStyles)),yn.onDestroy(()=>ra(Ei,hr.toStyles)),void i.push(yn);const CR=[];hr.timelines.forEach(Ms=>{Ms.stretchStartingKeyframe=!0,this.disabledNodes.has(Ms.element)||CR.push(Ms)}),hr.timelines=CR,r.append(Ei,hr.timelines),c.push({instruction:hr,player:yn,element:Ei}),hr.queriedElements.forEach(Ms=>Mi(f,Ms,[]).push(yn)),hr.preStyleProps.forEach((Ms,jf)=>{const vd=Object.keys(Ms);if(vd.length){let $f=_.get(jf);$f||_.set(jf,$f=new Set),vd.forEach($M=>$f.add($M))}}),hr.postStyleProps.forEach((Ms,jf)=>{const vd=Object.keys(Ms);let $f=b.get(jf);$f||b.set(jf,$f=new Set),vd.forEach($M=>$f.add($M))})});if(Qt.length){const lt=[];Qt.forEach(It=>{lt.push(function yI(n,e){return new h.vHH(3505,rn)}())}),Vt.forEach(It=>It.destroy()),this.reportError(lt)}const bn=new Map,Ss=new Map;c.forEach(lt=>{const It=lt.element;r.has(It)&&(Ss.set(It,It),this._beforeAnimationBuild(lt.player.namespaceId,lt.instruction,bn))}),i.forEach(lt=>{const It=lt.element;this._getPreviousPlayers(It,!1,lt.namespaceId,lt.triggerName,null).forEach(yn=>{Mi(bn,It,[]).push(yn),yn.destroy()})});const jl=Ue.filter(lt=>ay(lt,_,b)),$l=new Map;Q0($l,this.driver,_t,b,mo).forEach(lt=>{ay(lt,_,b)&&jl.push(lt)});const Xv=new Map;W.forEach((lt,It)=>{Q0(Xv,this.driver,new Set(lt),_,"!")}),jl.forEach(lt=>{const It=$l.get(lt),xt=Xv.get(lt);$l.set(lt,Object.assign(Object.assign({},It),xt))});const Bf=[],wR=[],bR={};c.forEach(lt=>{const{element:It,player:xt,instruction:yn}=lt;if(r.has(It)){if(A.has(It))return xt.onDestroy(()=>ra(It,yn.toStyles)),xt.disabled=!0,xt.overrideTotalTime(yn.totalTime),void i.push(xt);let Ei=bR;if(Ss.size>1){let xo=It;const _d=[];for(;xo=xo.parentNode;){const hr=Ss.get(xo);if(hr){Ei=hr;break}_d.push(xo)}_d.forEach(hr=>Ss.set(hr,Ei))}const ju=this._buildAnimation(xt.namespaceId,yn,bn,u,Xv,$l);if(xt.setRealPlayer(ju),Ei===bR)Bf.push(xt);else{const xo=this.playersByElement.get(Ei);xo&&xo.length&&(xt.parentPlayer=Iu(xo)),i.push(xt)}}else Kr(It,yn.fromStyles),xt.onDestroy(()=>ra(It,yn.toStyles)),wR.push(xt),A.has(It)&&i.push(xt)}),wR.forEach(lt=>{const It=u.get(lt.element);if(It&&It.length){const xt=Iu(It);lt.setRealPlayer(xt)}}),i.forEach(lt=>{lt.parentPlayer?lt.syncPlayerEvents(lt.parentPlayer):lt.destroy()});for(let lt=0;lt<Ue.length;lt++){const It=Ue[lt],xt=It[bs];if(oh(It,xc),xt&&xt.hasAnimation)continue;let yn=[];if(f.size){let ju=f.get(It);ju&&ju.length&&yn.push(...ju);let xo=this.driver.query(It,$m,!0);for(let _d=0;_d<xo.length;_d++){let hr=f.get(xo[_d]);hr&&hr.length&&yn.push(...hr)}}const Ei=yn.filter(ju=>!ju.destroyed);Ei.length?X0(this,It,Ei):this.processLeaveNode(It)}return Ue.length=0,Bf.forEach(lt=>{this.players.push(lt),lt.onDone(()=>{lt.destroy();const It=this.players.indexOf(lt);this.players.splice(It,1)}),lt.play()}),Bf}elementContainsData(e,t){let r=!1;const i=t[bs];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const _=!u||u==sh;f.forEach(b=>{b.queued||!_&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const b=_.element,A=b!==u,x=Mi(r,b,[]);this._getPreviousPlayers(b,A,c,f,t.toState).forEach(W=>{const Y=W.getRealPlayer();Y.beforeDestroy&&Y.beforeDestroy(),W.destroy(),x.push(W)})}Kr(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,_=t.element,b=[],A=new Set,x=new Set,V=t.timelines.map(Y=>{const _e=Y.element;A.add(_e);const Ue=_e[bs];if(Ue&&Ue.removedBeforeQueried)return new Hd(Y.duration,Y.delay);const yt=_e!==_,_t=function lx(n){const e=[];return eE(n,e),e}((r.get(_e)||Z0).map(bn=>bn.getRealPlayer())).filter(bn=>!!bn.element&&bn.element===_e),Ct=u.get(_e),ht=c.get(_e),Vt=D0(0,this._normalizer,0,Y.keyframes,Ct,ht),Qt=this._buildPlayer(Y,Vt,_t);if(Y.subTimeline&&i&&x.add(_e),yt){const bn=new Ip(e,f,_e);bn.setRealPlayer(Qt),b.push(bn)}return Qt});b.forEach(Y=>{Mi(this.playersByQueriedElement,Y.element,[]).push(Y),Y.onDone(()=>function RI(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,Y.element,Y))}),A.forEach(Y=>_o(Y,jm));const W=Iu(V);return W.onDestroy(()=>{A.forEach(Y=>oh(Y,jm)),ra(_,t.toStyles)}),x.forEach(Y=>{Mi(i,Y,[]).push(W)}),W}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Hd(e.duration,e.delay)}}class Ip{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Hd,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>dp(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Mi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Dp(n){return n&&1===n.nodeType}function ts(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function Q0(n,e,t,r,i){const u=[];t.forEach(_=>u.push(ts(_)));const c=[];r.forEach((_,b)=>{const A={};_.forEach(x=>{const V=A[x]=e.computeStyle(b,x,i);(!V||0==V.length)&&(b[bs]=sy,c.push(b))}),n.set(b,A)});let f=0;return t.forEach(_=>ts(_,u[f++])),c}function J0(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let _=u.get(f);if(_)return _;const b=f.parentNode;return _=t.has(b)?b:i.has(b)?1:c(b),u.set(f,_),_}return e.forEach(f=>{const _=c(f);1!==_&&t.get(_).push(f)}),t}function _o(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function oh(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function X0(n,e,t){Iu(t).onDone(()=>n.processLeaveNode(e))}function eE(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Gd?eE(r.players,e):e.push(r)}}function ay(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class Tp{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new K0(e,t,r),this._timelineEngine=new Nc(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const _=[],A=th(this._driver,u,_,[]);if(_.length)throw function w0(n,e){return new h.vHH(3404,rn)}();f=function OI(n,e,t){return new q0(n,e,t)}(i,A,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=T0(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=T0(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let LI=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&ra(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ra(this._element,this._initialStyles),this._endStyles&&(ra(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Kr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Kr(this._element,this._endStyles),this._endStyles=null),ra(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Ap(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];VI(i)&&(e=e||{},e[i]=n[i])}return e}function VI(n){return"display"===n||"position"===n}class uy{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:Wm(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class UI{validateStyleProperty(e){return S0(e)}matchesElement(e,t){return!1}containsElement(e,t){return Fm(e,t)}getParentElement(e){return La(e)}query(e,t,r){return Lm(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(_.easing=u);const b={},A=c.filter(V=>V instanceof uy);(function wI(n,e){return 0===n||0===e})(r,i)&&A.forEach(V=>{let W=V.currentSnapshot;Object.keys(W).forEach(Y=>b[Y]=W[Y])}),t=function Ft(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(f=>{u.hasOwnProperty(f)||c.push(f),u[f]=t[f]}),c.length)for(var i=1;i<e.length;i++){let f=e[i];c.forEach(function(_){f[_]=Wm(n,_)})}}return e}(e,t=t.map(V=>Tu(V,!1)),b);const x=function FI(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Ap(e[0]),e.length>1&&(r=Ap(e[e.length-1]))):e&&(t=Ap(e)),t||r?new LI(n,t,r):null}(e,t);return new uy(e,t,_,x)}}let BI=(()=>{class n extends Zr{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?h0(t):t;return rE(this._renderer,null,r,"register",[i]),new tE(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class tE extends class $d{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new nE(this._id,e,t||{},this._renderer)}}class nE{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return rE(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function rE(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Sp="@.disabled";let jI=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=null==c?void 0:c.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let A=this._rendererCache.get(u);return A||(A=new iE("",u,this.engine),this._rendererCache.set(u,A)),A}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const _=A=>{Array.isArray(A)?A.forEach(_):this.engine.registerTrigger(c,f,t,A.name,A)};return r.data.animation.forEach(_),new cx(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(Tp),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class iE{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Sp?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class cx extends iE{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Sp?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function sE(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function $I(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let HI=(()=>{class n extends Tp{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de),h.LFG(Mc),h.LFG(ey))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const oE=new h.OlP("AnimationModuleType"),aE=[{provide:Zr,useClass:BI},{provide:ey,useFactory:function GI(){return new ty}},{provide:Tp,useClass:HI},{provide:h.FYo,useFactory:function ly(n,e,t){return new jI(n,e,t)},deps:[xn,Tp,h.R0b]}],ah=[{provide:Mc,useFactory:()=>new UI},{provide:oE,useValue:"BrowserAnimations"},...aE],cy=[{provide:Mc,useClass:Vm},{provide:oE,useValue:"NoopAnimations"},...aE];let qI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?cy:ah}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:ah,imports:[au]}),n})();function Tt(...n){const e=(0,En.yG)(n);return(0,Tn.D)(n,e)}var hi=N(7579);class vo extends hi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var uh=N(4671),dy=N(9672);function hy(n,e,t){n?(0,dy.f)(t,n,e):e()}var Mp=N(576);function lh(n,e){const t=(0,Mp.m)(n)?n:()=>n,r=i=>i.error(t());return new ms.y(e?i=>e.schedule(r,0,i):r)}const ch=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ws=N(8189);function fy(...n){return function xp(){return(0,Ws.J)(1)}()((0,Tn.D)(n,(0,En.yG)(n)))}function cE(n){return new ms.y(e=>{(0,ys.Xf)(n()).subscribe(e)})}var dh=N(515),Op=N(727),ns=N(4482);function Pp(){return(0,ns.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Wn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class hh extends ms.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ns.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Op.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Wn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Op.w0.EMPTY)}return e}refCount(){return Pp()(this)}}function fi(n,e){return(0,ns.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,Wn.x)(r,_=>{null==i||i.unsubscribe();let b=0;const A=u++;(0,ys.Xf)(n(_,A)).subscribe(i=(0,Wn.x)(r,x=>r.next(e?e(_,x,A,b++):x),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var Lc=N(5698);function fh(...n){const e=(0,En.yG)(n);return(0,ns.e)((t,r)=>{(e?fy(n,t,e):fy(n,t)).subscribe(r)})}function dE(n,e,t,r,i){return(u,c)=>{let f=t,_=e,b=0;u.subscribe((0,Wn.x)(c,A=>{const x=b++;_=f?n(_,A,x):(f=!0,A),r&&c.next(_)},i&&(()=>{f&&c.next(_),c.complete()})))}}function Vc(n,e){return(0,ns.e)(dE(n,e,arguments.length>=2,!0))}function Va(n,e){return(0,ns.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function sa(n){return(0,ns.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Wn.x)(t,void 0,void 0,c=>{u=(0,ys.Xf)(n(c,sa(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var pi=N(5577);function ph(n,e){return(0,Mp.m)(e)?(0,pi.z)(n,e,1):(0,pi.z)(n,1)}function Np(n){return n<=0?()=>dh.E:(0,ns.e)((e,t)=>{let r=[];e.subscribe((0,Wn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function El(n=hE){return(0,ns.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function hE(){return new ch}function fE(n){return(0,ns.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Zs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Va((i,u)=>n(i,u,r)):uh.y,(0,Lc.q)(1),t?fE(e):El(()=>new ch))}var Is=N(8505);class Ua{constructor(e,t){this.id=e,this.url=t}}class py extends Ua{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xi extends Ua{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Rp extends Ua{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class pE extends Ua{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gE extends Ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mE extends Ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yE extends Ua{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class KI extends Ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class YI extends Ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _E{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vE{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class EE{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hx{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wE{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QI{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bE{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const en="primary";class fx{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Mu(n){return new fx(n)}const CE="ngNavigationCancelingError";function kp(n){const e=Error("NavigationCancelingError: "+n);return e[CE]=!0,e}function px(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ba(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!JI(n[i],e[i]))return!1;return!0}function JI(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function gy(n){return Array.prototype.concat.apply([],n)}function my(n){return n.length>0?n[n.length-1]:null}function Yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ja(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Tn.D)(Promise.resolve(n)):Tt(n)}const yy={exact:function AE(n,e,t){if(!wl(n.segments,e.segments)||!Lp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!AE(n.children[r],e.children[r],t))return!1;return!0},subset:SE},TE={exact:function eD(n,e){return Ba(n,e)},subset:function tD(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>JI(n[t],e[t]))},ignored:()=>!0};function Fp(n,e,t){return yy[t.paths](n.root,e.root,t.matrixParams)&&TE[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function SE(n,e,t){return ME(n,e,e.segments,t)}function ME(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!wl(i,t)||e.hasChildren()||!Lp(i,t,r))}if(n.segments.length===t.length){if(!wl(n.segments,t)||!Lp(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!SE(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(wl(n.segments,i)&&Lp(n.segments,i,r)&&n.children[en])&&ME(n.children[en],e,u,r)}}function Lp(n,e,t){return e.every((r,i)=>TE[t](n[i].parameters,r.parameters))}class oa{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mu(this.queryParams)),this._queryParamMap}toString(){return yh.serialize(this)}}class zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cr(this)}}class gh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Mu(this.parameters)),this._parameterMap}toString(){return Cl(this)}}function wl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Vp{}class wo{parse(e){const t=new NE(e);return new oa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${bo(e.root,!0)}`,r=function Bc(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Oi(t)}=${Oi(i)}`).join("&"):`${Oi(t)}=${Oi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function _y(n){return encodeURI(n)}(e.fragment)}`:""}`}}const yh=new wo;function Cr(n){return n.segments.map(e=>Cl(e)).join("/")}function bo(n,e){if(!n.hasChildren())return Cr(n);if(e){const t=n.children[en]?bo(n.children[en],!1):"",r=[];return Yr(n.children,(i,u)=>{u!==en&&r.push(`${u}:${bo(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function nD(n,e){let t=[];return Yr(n.children,(r,i)=>{i===en&&(t=t.concat(e(r,i)))}),Yr(n.children,(r,i)=>{i!==en&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===en?[bo(n.children[en],!1)]:[`${i}:${bo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[en]?`${Cr(n)}/${t[0]}`:`${Cr(n)}/(${t.join("//")})`}}function _h(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oi(n){return _h(n).replace(/%3B/gi,";")}function xu(n){return _h(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $a(n){return decodeURIComponent(n)}function bl(n){return $a(n.replace(/\+/g,"%20"))}function Cl(n){return`${xu(n.path)}${function Uc(n){return Object.keys(n).map(e=>`;${xu(e)}=${xu(n[e])}`).join("")}(n.parameters)}`}const jc=/^[^\/()?;=#]+/;function Ha(n){const e=n.match(jc);return e?e[0]:""}const $c=/^[^=?&#]+/,OE=/^[^&#]+/;class NE{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[en]=new zt(e,t)),r}parseSegment(){const e=Ha(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new gh($a(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ha(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ha(this.remaining);i&&(r=i,this.capture(r))}e[$a(t)]=$a(r)}parseQueryParam(e){const t=function xE(n){const e=n.match($c);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function PE(n){const e=n.match(OE);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=bl(t),u=bl(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ha(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=en);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[en]:new zt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class vy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Up(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Up(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Bp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Bp(e,this._root).map(t=>t.value)}}function Up(n,e){if(n===e.value)return e;for(const t of e.children){const r=Up(n,t);if(r)return r}return null}function Bp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Bp(n,t);if(r.length)return r.unshift(e),r}return[]}class aa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Il(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class RE extends vy{constructor(e,t){super(e),this.snapshot=t,Cy(this,e)}toString(){return this.snapshot.toString()}}function Ey(n,e){const t=function rD(n,e){const c=new jp([],{},{},"",{},en,e,null,n.root,-1,{});return new by("",new aa(c,[]))}(n,e),r=new vo([new gh("",{})]),i=new vo({}),u=new vo({}),c=new vo({}),f=new vo(""),_=new Dl(r,i,c,f,u,en,e,t.root);return _.snapshot=t.root,new RE(new aa(_,[]),t)}class Dl{constructor(e,t,r,i,u,c,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Et.U)(e=>Mu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Et.U)(e=>Mu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wy(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function iD(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class jp{constructor(e,t,r,i,u,c,f,_,b,A,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=A,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class by extends vy{constructor(e,t){super(t),this.url=e,Cy(this,t)}toString(){return Iy(this._root)}}function Cy(n,e){e.value._routerState=n,e.children.forEach(t=>Cy(n,t))}function Iy(n){const e=n.children.length>0?` { ${n.children.map(Iy).join(", ")} } `:"";return`${n.value}${e}`}function Dy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ba(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ba(e.params,t.params)||n.params.next(t.params),function Eo(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ba(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ba(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ty(n,e){const t=Ba(n.params,e.params)&&function mh(n,e){return wl(n,e)&&n.every((t,r)=>Ba(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ty(n.parent,e.parent))}function vh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Ay(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return vh(n,r,i);return vh(n,r)})}(n,e,t);return new aa(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>vh(n,f)),c}}const r=function Sy(n){return new Dl(new vo(n.url),new vo(n.params),new vo(n.queryParams),new vo(n.fragment),new vo(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>vh(n,u));return new aa(r,i)}}function My(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function $p(n){return"object"==typeof n&&null!=n&&n.outlets}function kE(n,e,t,r,i){let u={};if(r&&Yr(r,(f,_)=>{u[_]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),n===e)return new oa(t,u,i);const c=FE(n,e,t);return new oa(c,u,i)}function FE(n,e,t){const r={};return Yr(n.children,(i,u)=>{r[u]=i===e?t:FE(i,e,t)}),new zt(n.segments,r)}class xy{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&My(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find($p);if(i&&i!==my(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Oy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function VE(n,e,t){if(n||(n=new zt([],{})),0===n.segments.length&&n.hasChildren())return Eh(n,e,t);const r=function Hp(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if($p(f))break;const _=`${f}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!jE(_,b,c))return u;r+=2}else{if(!jE(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new zt(n.segments.slice(0,r.pathIndex),{});return u.children[en]=new zt(n.segments.slice(r.pathIndex),n.children),Eh(u,0,i)}return r.match&&0===i.length?new zt(n.segments,{}):r.match&&!n.hasChildren()?Py(n,e,t):r.match?Eh(n,0,i):Py(n,e,t)}function Eh(n,e,t){if(0===t.length)return new zt(n.segments,{});{const r=function LE(n){return $p(n[0])?n[0].outlets:{[en]:n}}(t),i={};return Yr(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=VE(n.children[c],e,u))}),Yr(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new zt(n.segments,i)}}function Py(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if($p(u)){const _=UE(u.outlets);return new zt(r,_)}if(0===i&&My(t[0])){r.push(new gh(n.segments[e].path,BE(t[0]))),i++;continue}const c=$p(u)?u.outlets[en]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&My(f)?(r.push(new gh(c,BE(f))),i+=2):(r.push(new gh(c,{})),i++)}return new zt(r,{})}function UE(n){const e={};return Yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Py(new zt([],{}),0,t))}),e}function BE(n){const e={};return Yr(n,(t,r)=>e[r]=`${t}`),e}function jE(n,e,t){return n==t.path&&Ba(e,t.parameters)}class uD{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Dy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Il(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Yr(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Il(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Il(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Il(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new QI(u.value.snapshot))}),e.children.length&&this.forwardEvent(new hx(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Dy(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),Dy(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=function lD(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=f?f.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Gp{constructor(e,t){this.routes=e,this.module=t}}function Ou(n){return"function"==typeof n}function Pu(n){return n instanceof oa}const qp=Symbol("INITIAL_VALUE");function Ga(){return fi(n=>function dx(...n){const e=(0,En.yG)(n),t=(0,En.jO)(n),{args:r,keys:i}=du(n);if(0===r.length)return(0,Tn.D)([],e);const u=new ms.y(function zI(n,e,t=uh.y){return r=>{hy(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let _=0;_<i;_++)hy(e,()=>{const b=(0,Tn.D)(n[_],e);let A=!1;b.subscribe((0,Wn.x)(r,x=>{u[_]=x,A||(A=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Ju(i,c):uh.y));return t?u.pipe(Qu(t)):u}(n.map(e=>e.pipe((0,Lc.q)(1),fh(qp)))).pipe(Vc((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==qp?i:(u===qp&&(r=!0),r||!1!==u&&c!==t.length-1&&!Pu(u)?i:u),e)},qp),Va(e=>e!==qp),(0,Et.U)(e=>Pu(e)?e:!0===e),(0,Lc.q)(1)))}class HE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Tl,this.attachRef=null}}class Tl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new HE,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let wh=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||en,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,_=new dD(t,f,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Tl),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class dD{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Dl?this.route:e===Tl?this.childContexts:this.parent.get(e,t)}}let bh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[wh],encapsulation:2}),n})();function Ch(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];ky(r,_x(e,r))}}function ky(n,e){n.children&&Ch(n.children,e)}function _x(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Fy(n){const e=n.children&&n.children.map(Fy),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==en&&(t.component=bh),t}function Pi(n){return n.outlet||en}function Ih(n,e){const t=n.filter(r=>Pi(r)===e);return t.push(...n.filter(r=>Pi(r)!==e)),t}const Ly={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Dh(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Ly):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||px)(t,n,e);if(!u)return Object.assign({},Ly);const c={};Yr(u.posParams,(_,b)=>{c[b]=_.path});const f=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:f,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Gc(n,e,t,r,i="corrected"){if(t.length>0&&function Vy(n,e,t){return t.some(r=>zp(n,e,r)&&Pi(r)!==en)}(n,t,r)){const c=new zt(e,function qE(n,e,t,r){const i={};i[en]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Pi(u)!==en){const c=new zt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Pi(u)]=c}return i}(n,e,r,new zt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function zE(n,e,t){return t.some(r=>zp(n,e,r))}(n,t,r)){const c=new zt(n.segments,function GE(n,e,t,r,i,u){const c={};for(const f of r)if(zp(n,t,f)&&!i[Pi(f)]){const _=new zt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Pi(f)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new zt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function zp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Uy(n,e,t,r){return!!(Pi(n)===r||r!==en&&zp(e,t,n))&&("**"===n.path||Dh(e,n,t).matched)}function By(n,e,t){return 0===e.length&&!n.children[t]}class qc{constructor(e){this.segmentGroup=e||null}}class jy{constructor(e){this.urlTree=e}}function Th(n){return lh(new qc(n))}function WE(n){return lh(new jy(n))}class KE{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=Gc(this.urlTree.root,[],[],this.config).segmentGroup,t=new zt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,en).pipe((0,Et.U)(u=>this.createUrlTree(Wp(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(sa(u=>{if(u instanceof jy)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof qc?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,en).pipe((0,Et.U)(i=>this.createUrlTree(Wp(i),e.queryParams,e.fragment))).pipe(sa(i=>{throw i instanceof qc?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new zt([],{[en]:e}):e;return new oa(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Et.U)(u=>new zt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Tn.D)(i).pipe(ph(u=>{const c=r.children[u],f=Ih(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,Et.U)(_=>({segment:_,outlet:u})))}),Vc((u,c)=>(u[c.outlet]=c.segment,u),{}),function WI(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Va((i,u)=>n(i,u,r)):uh.y,Np(1),t?fE(e):El(()=>new ch))}())}expandSegment(e,t,r,i,u,c){return(0,Tn.D)(r).pipe(ph(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(sa(b=>{if(b instanceof qc)return Tt(null);throw b}))),Zs(f=>!!f),sa((f,_)=>{if(f instanceof ch||"EmptyError"===f.name)return By(t,i,u)?Tt(new zt([],{})):Th(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return Uy(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Th(t):Th(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?WE(u):this.lineralizeSegments(r,u).pipe((0,pi.z)(c=>{const f=new zt(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:_,remainingSegments:b,positionalParamSegments:A}=Dh(t,i,u);if(!f)return Th(t);const x=this.applyRedirectCommands(_,i.redirectTo,A);return i.redirectTo.startsWith("/")?WE(x):this.lineralizeSegments(i,x).pipe((0,pi.z)(V=>this.expandSegment(e,t,r,V.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Tt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Et.U)(x=>(r._loadedConfig=x,new zt(i,{})))):Tt(new zt(i,{}));const{matched:c,consumedSegments:f,remainingSegments:_}=Dh(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,pi.z)(A=>{const x=A.module,V=A.routes,{segmentGroup:W,slicedSegments:Y}=Gc(t,f,_,V),_e=new zt(W.segments,W.children);if(0===Y.length&&_e.hasChildren())return this.expandChildren(x,V,_e).pipe((0,Et.U)(Ct=>new zt(f,Ct)));if(0===V.length&&0===Y.length)return Tt(new zt(f,{}));const Ue=Pi(r)===u;return this.expandSegment(x,_e,V,Y,Ue?en:u,!0).pipe((0,Et.U)(_t=>new zt(f.concat(_t.segments),_t.children)))})):Th(t)}getChildConfig(e,t,r){return t.children?Tt(new Gp(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Tt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,pi.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Et.U)(u=>(t._loadedConfig=u,u))):function ZE(n){return lh(kp(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Tt(new Gp([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Tt(i.map(c=>{const f=e.get(c);let _;if(function Ny(n){return n&&Ou(n.canLoad)}(f))_=f.canLoad(t,r);else{if(!Ou(f))throw new Error("Invalid CanLoad guard");_=f(t,r)}return ja(_)})).pipe(Ga(),(0,Is.b)(c=>{if(!Pu(c))return;const f=kp(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,Et.U)(c=>!0===c)):Tt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Tt(r);if(i.numberOfChildren>1||!i.children[en])return lh(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[en]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new oa(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Yr(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Yr(t.children,(f,_)=>{c[_]=this.createSegmentGroup(e,f,r,i)}),new zt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Wp(n){const e={};for(const r of Object.keys(n.children)){const u=Wp(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function YE(n){if(1===n.numberOfChildren&&n.children[en]){const e=n.children[en];return new zt(n.segments.concat(e.segments),e.children)}return n}(new zt(n.segments,e))}class Hy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ah{constructor(e,t){this.component=e,this.route=t}}function JE(n,e,t){const r=n._root;return Sh(r,e?e._root:null,t,[r.value])}function Gy(n,e,t){const r=function fD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Sh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Il(e);return n.children.forEach(c=>{(function ew(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function pD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!wl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!wl(n.url,e.url)||!Ba(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ty(n,e)||!Ba(n.queryParams,e.queryParams);default:return!Ty(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Hy(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Sh(n,e,u.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Ah(f.outlet.component,c))}else c&&Kn(e,f,i),i.canActivateChecks.push(new Hy(r)),Sh(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Yr(u,(c,f)=>Kn(c,t.getContext(f),i)),i}function Kn(n,e,t){const r=Il(n),i=n.value;Yr(r,(u,c)=>{Kn(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Ah(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class _D{}function sw(n){return new ms.y(e=>e.error(n))}class vD{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=Gc(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,en);if(null===t)return null;const r=new jp([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},en,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new aa(r,t),u=new by(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=wy(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],f=Ih(e,u),_=this.processSegmentGroup(f,c,u);if(null===_)return null;r.push(..._)}const i=Zp(r);return function aw(n){n.sort((e,t)=>e.value.outlet===en?-1:t.value.outlet===en?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return By(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Uy(e,t,r,i))return null;let u,c=[],f=[];if("**"===e.path){const W=r.length>0?my(r).parameters:{};u=new jp(r,W,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Co(e),Pi(e),e.component,e,uw(t),zy(t)+r.length,Ks(e))}else{const W=Dh(t,e,r);if(!W.matched)return null;c=W.consumedSegments,f=W.remainingSegments,u=new jp(c,W.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Co(e),Pi(e),e.component,e,uw(t),zy(t)+c.length,Ks(e))}const _=function vx(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=Gc(t,c,f,_.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const W=this.processChildren(_,b);return null===W?null:[new aa(u,W)]}if(0===_.length&&0===A.length)return[new aa(u,[])];const x=Pi(e)===i,V=this.processSegment(_,b,A,x?en:i);return null===V?null:[new aa(u,V)]}}function qy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Zp(n){const e=[],t=new Set;for(const r of n){if(!qy(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Zp(r.children);e.push(new aa(r.value,i))}return e.filter(r=>!t.has(r))}function uw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zy(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Co(n){return n.data||{}}function Ks(n){return n.resolve||{}}function dw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Wy(n){return fi(e=>{const t=n(e);return t?(0,Tn.D)(t).pipe((0,Et.U)(()=>e)):Tt(e)})}class bD extends class Mh{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Kp=new h.OlP("ROUTES");class hw{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Et.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Gp(gy(c.injector.get(Kp,void 0,h.XFs.Self|h.XFs.Optional)).map(Fy),c)}),sa(u=>{throw t._loader$=void 0,u}));return t._loader$=new hh(i,()=>new hi.x).pipe(Pp()),t._loader$}loadModuleFactory(e){return ja(e()).pipe((0,pi.z)(t=>t instanceof h.YKP?Tt(t):(0,Tn.D)(this.compiler.compileModuleAsync(t))))}}class pw{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Yp(n){throw n}function CD(n,e,t){return e.parse("/")}function Ky(n,e){return Tt(null)}const gw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let dr=(()=>{class n{constructor(t,r,i,u,c,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new hi.x,this.errorHandler=Yp,this.malformedUriErrorHandler=CD,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ky,afterPreactivation:Ky},this.urlHandlingStrategy=new pw,this.routeReuseStrategy=new bD,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(h.h0i),this.console=c.get(h.c2e);const x=c.get(h.R0b);this.isNgZoneEnabled=x instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function DE(){return new oa(new zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new hw(c,f,V=>this.triggerEvent(new _E(V)),V=>this.triggerEvent(new vE(V))),this.routerState=Ey(this.currentUrlTree,this.rootComponentType),this.transitions=new vo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Va(i=>0!==i.id),(0,Et.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),fi(i=>{let u=!1,c=!1;return Tt(i).pipe((0,Is.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),fi(f=>{const _=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return Yy(f.source)&&(this.browserUrlTree=f.extractedUrl),Tt(f).pipe(fi(x=>{const V=this.transitions.getValue();return r.next(new py(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),V!==this.transitions.getValue()?dh.E:Promise.resolve(x)}),function QE(n,e,t,r){return fi(i=>function $y(n,e,t,r,i){return new KE(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Et.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Is.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function Io(n,e,t,r,i){return(0,pi.z)(u=>function ow(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new vD(n,e,t,r,i,u).recognize();return null===c?sw(new _D):Tt(c)}catch(c){return sw(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Et.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Is.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const W=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(W,x)}this.browserUrlTree=x.urlAfterRedirects}const V=new gE(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(V)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:V,extractedUrl:W,source:Y,restoredState:_e,extras:Ue}=f,yt=new py(V,this.serializeUrl(W),Y,_e);r.next(yt);const _t=Ey(W,this.rootComponentType).snapshot;return Tt(Object.assign(Object.assign({},f),{targetSnapshot:_t,urlAfterRedirects:W,extras:Object.assign(Object.assign({},Ue),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),dh.E}),Wy(f=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:W}}=f;return this.hooks.beforePreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!W})}),(0,Is.b)(f=>{const _=new mE(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,Et.U)(f=>Object.assign(Object.assign({},f),{guards:JE(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function tw(n,e){return(0,pi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?Tt(Object.assign(Object.assign({},t),{guardsResult:!0})):function gD(n,e,t,r){return(0,Tn.D)(n).pipe((0,pi.z)(i=>function zc(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Tt(u.map(f=>{const _=Gy(f,e,i);let b;if(function cD(n){return n&&Ou(n.canDeactivate)}(_))b=ja(_.canDeactivate(n,e,t,r));else{if(!Ou(_))throw new Error("Invalid CanDeactivate guard");b=ja(_(n,e,t,r))}return b.pipe(Zs())})).pipe(Ga()):Tt(!0)}(i.component,i.route,t,e,r)),Zs(i=>!0!==i,!0))}(c,r,i,n).pipe((0,pi.z)(f=>f&&function $E(n){return"boolean"==typeof n}(f)?function mD(n,e,t,r){return(0,Tn.D)(e).pipe(ph(i=>fy(function yD(n,e){return null!==n&&e&&e(new EE(n)),Tt(!0)}(i.route.parent,r),function nw(n,e){return null!==n&&e&&e(new wE(n)),Tt(!0)}(i.route,r),function iw(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function XE(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>cE(()=>Tt(c.guards.map(_=>{const b=Gy(_,c.node,t);let A;if(function Ry(n){return n&&Ou(n.canActivateChild)}(b))A=ja(b.canActivateChild(r,n));else{if(!Ou(b))throw new Error("Invalid CanActivateChild guard");A=ja(b(r,n))}return A.pipe(Zs())})).pipe(Ga())));return Tt(u).pipe(Ga())}(n,i.path,t),function rw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Tt(!0);const i=r.map(u=>cE(()=>{const c=Gy(u,e,t);let f;if(function yx(n){return n&&Ou(n.canActivate)}(c))f=ja(c.canActivate(e,n));else{if(!Ou(c))throw new Error("Invalid CanActivate guard");f=ja(c(e,n))}return f.pipe(Zs())}));return Tt(i).pipe(Ga())}(n,i.route,t))),Zs(i=>!0!==i,!0))}(r,u,n,e):Tt(f)),(0,Et.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Is.b)(f=>{if(Pu(f.guardsResult)){const b=kp(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const _=new yE(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),Va(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),Wy(f=>{if(f.guards.canActivateChecks.length)return Tt(f).pipe((0,Is.b)(_=>{const b=new KI(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),fi(_=>{let b=!1;return Tt(_).pipe(function lw(n,e){return(0,pi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Tt(t);let u=0;return(0,Tn.D)(i).pipe(ph(c=>function cw(n,e,t,r){return function ED(n,e,t,r){const i=dw(n);if(0===i.length)return Tt({});const u={};return(0,Tn.D)(i).pipe((0,pi.z)(c=>function wD(n,e,t,r){const i=Gy(n,e,r);return ja(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Is.b)(f=>{u[c]=f}))),Np(1),(0,pi.z)(()=>dw(u).length===i.length?Tt(u):dh.E))}(n._resolve,n,e,r).pipe((0,Et.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),wy(n,t).resolve),null)))}(c.route,r,n,e)),(0,Is.b)(()=>u++),Np(1),(0,pi.z)(c=>u===i.length?Tt(t):dh.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Is.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Is.b)(_=>{const b=new YI(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}))}),Wy(f=>{const{targetSnapshot:_,id:b,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:V,replaceUrl:W}}=f;return this.hooks.afterPreactivation(_,{navigationId:b,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!V,replaceUrl:!!W})}),(0,Et.U)(f=>{const _=function gx(n,e,t){const r=vh(n,e._root,t?t._root:void 0);return new RE(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:_})}),(0,Is.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,Et.U)(r=>(new uD(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Is.b)({next(){u=!0},complete(){u=!0}}),function ZI(n){return(0,ns.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),sa(f=>{if(c=!0,function IE(n){return n&&n[CE]}(f)){const _=Pu(f.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const b=new Rp(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),_?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Yy(i.source)};this.scheduleNavigation(A,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new pE(i.id,this.serializeUrl(i.extractedUrl),f);r.next(_);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return dh.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Ch(t),this.config=t.map(Fy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:_}=r,b=i||this.routerState.root,A=_?this.currentUrlTree.fragment:c;let x=null;switch(f){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function sD(n,e,t,r,i){if(0===t.length)return kE(e.root,e.root,e.root,r,i);const u=function mx(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new xy(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return Yr(u.outlets,(_,b)=>{f[b]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new xy(t,e,r)}(t);if(u.toRoot())return kE(e.root,e.root,new zt([],{}),r,i);const c=function Hc(n,e,t){if(n.isAbsolute)return new Oy(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Oy(u,u===e.root,0)}const r=My(n.commands[0])?0:1;return function oD(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Oy(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),f=c.processChildren?Eh(c.segmentGroup,c.index,u.commands):VE(c.segmentGroup,c.index,u.commands);return kE(e.root,c.segmentGroup,f,r,i)}(b,this.currentUrlTree,t,x,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Pu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function yw(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},gw):!1===r?Object.assign({},mw):r,Pu(t))return Fp(this.currentUrlTree,t,i);const u=this.parseUrl(t);return Fp(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new xi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var f,_;if(this.disposed)return Promise.resolve(!1);let b,A,x;c?(b=c.resolve,A=c.reject,x=c.promise):x=new Promise((Y,_e)=>{b=Y,A=_e});const V=++this.navigationId;let W;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),W=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):W=0,this.setTransition({id:V,targetPageId:W,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:A,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(Y=>Promise.reject(Y))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Rp(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Yy(n){return"imperative"!==n}let xh=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new hi.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Al(this.skipLocationChange),replaceUrl:Al(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Al(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(dr),h.Y36(Dl),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})(),Wc=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new hi.x,this.subscription=t.events.subscribe(u=>{u instanceof xi&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){if(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const f={skipLocationChange:Al(this.skipLocationChange),replaceUrl:Al(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Al(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(dr),h.Y36(Dl),h.Y36(Ee))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function Al(n){return""===n||!!n}class Qy{}class Ew{preload(e,t){return Tt(null)}}let ww=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new hw(i,r,_=>t.triggerEvent(new _E(_)),_=>t.triggerEvent(new vE(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Va(t=>t instanceof xi),ph(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Tn.D)(i).pipe((0,Ws.J)(),(0,Et.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Tt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,pi.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(dr),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(Qy))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Jy=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof py?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof bE&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new bE(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Sl=new h.OlP("ROUTER_CONFIGURATION"),bw=new h.OlP("ROUTER_FORROOT_GUARD"),DD=[Pe,{provide:Vp,useClass:wo},{provide:dr,useFactory:function xD(n,e,t,r,i,u,c={},f,_){const b=new dr(null,n,e,t,r,i,gy(u));return f&&(b.urlHandlingStrategy=f),_&&(b.routeReuseStrategy=_),function OD(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(A=>{var x,V;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(V=console.groupEnd)||void 0===V||V.call(console)}),b},deps:[Vp,Tl,Pe,h.zs3,h.Sil,Kp,Sl,[class fw{},new h.FiY],[class Zy{},new h.FiY]]},Tl,{provide:Dl,useFactory:function PD(n){return n.routerState.root},deps:[dr]},ww,Ew,class ID{preload(e,t){return t().pipe(sa(()=>Tt(null)))}},{provide:Sl,useValue:{enableTracing:!1}}];function TD(){return new h.PXZ("Router",dr)}let Cw=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[DD,Iw(t),{provide:bw,useFactory:MD,deps:[[dr,new h.FiY,new h.tp0]]},{provide:Sl,useValue:r||{}},{provide:Ee,useFactory:SD,deps:[ae,[new h.tBr(Ke),new h.FiY],Sl]},{provide:Jy,useFactory:AD,deps:[dr,ru,Sl]},{provide:Qy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Ew},{provide:h.PXZ,multi:!0,useFactory:TD},[Xy,{provide:h.ip1,multi:!0,useFactory:Dw,deps:[Xy]},{provide:e_,useFactory:Tw,deps:[Xy]},{provide:h.tb,multi:!0,useExisting:e_}]]}}static forChild(t){return{ngModule:n,providers:[Iw(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(bw,8),h.LFG(dr,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function AD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Jy(n,e,t)}function SD(n,e,t={}){return t.useHash?new Fe(n,e):new Ze(n,e)}function MD(n){return"guarded"}function Iw(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:Kp,multi:!0,useValue:n}]}let Xy=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new hi.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),u=this.injector.get(dr),c=this.injector.get(Sl);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?Tt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Sl),i=this.injector.get(ww),u=this.injector.get(Jy),c=this.injector.get(dr),f=this.injector.get(h.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Dw(n){return n.appInitializer.bind(n)}function Tw(n){return n.bootstrapListener.bind(n)}const e_=new h.OlP("Router Initializer");var wn=N(5813),Nu=N(5867);class Zc{constructor(e){return e}}class t_{constructor(){return(0,Nu.C6)()}}const za=new h.OlP("angularfire2._apps"),kD={provide:Zc,useFactory:function n_(n){return n&&1===n.length?n[0]:new Zc((0,Nu.Mq)())},deps:[[new h.FiY,za]]},FD={provide:t_,deps:[[new h.FiY,za]]};function Kc(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Zc(r)}}let wx=(()=>{class n{constructor(t){(0,Nu.KN)("angularfire",wn.q4.full,"core"),(0,Nu.KN)("angularfire",wn.q4.full,"app"),(0,Nu.KN)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[kD,FD]}),n})();function r_(n,...e){return{ngModule:wx,providers:[{provide:za,useFactory:Kc(n),multi:!0,deps:[h.R0b,h.zs3,wn.HU,...e]}]}}const bx=(0,wn.u3)(Nu.ZF,!0);var Te=N(5861),ua=N(9681),Qp=N(4859),Wt=N(2090),Do=N(1877);const Yn=new Map,Dx={activated:!1,tokenObservers:[]},Sw={initialized:!1,enabled:!1};function Pr(n){return Yn.get(n)||Dx}function To(n,e){Yn.set(n,e)}function Oh(){return Sw}class Ph{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Te.Z)(function*(){t.stop();try{t.pending=new Wt.BH,yield function jD(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Wt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ni=new Wt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function i_(n){if(!Pr(n).activated)throw Ni.create("use-before-activation",{appName:n.name})}function xl(n,e){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,Te.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const x=yield i.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,u)}catch(x){throw Ni.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw Ni.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(x){throw Ni.create("fetch-parse-error",{originalErrorMessage:x.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Ni.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(_[1]),A=Date.now();return{token:f.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}})).apply(this,arguments)}function qD(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Yc="firebase-app-check-store";let Nh=null;function Fw(){return Nh||(Nh=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ni.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Yc,{keyPath:"compositeKey"})}}catch(t){e(Ni.create("storage-open",{originalErrorMessage:t.message}))}}),Nh)}function tg(){return(tg=(0,Te.Z)(function*(n,e){const r=(yield Fw()).transaction(Yc,"readwrite"),u=r.objectStore(Yc).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var b;f(Ni.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Qc=new Do.Yd("@firebase/app-check");function Vw(n,e){return(0,Wt.hl)()?function Tx(n,e){return function WD(n,e){return tg.apply(this,arguments)}(function Lw(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Qc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Uw(){return Oh().enabled}function u_(){return l_.apply(this,arguments)}function l_(){return(l_=(0,Te.Z)(function*(){const n=Oh();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Jc={error:"UNKNOWN_ERROR"};function YD(n){return Wt.US.encodeString(JSON.stringify(n),!1)}function Fh(n){return c_.apply(this,arguments)}function c_(){return(c_=(0,Te.Z)(function*(n,e=!1){const t=n.app;i_(t);const r=Pr(t);let u,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&ig(_)&&(i=_)}if(!e&&i&&ig(i))return{token:i.token};let f,c=!1;if(Uw()){r.exchangeTokenPromise||(r.exchangeTokenPromise=xl(qD(t,yield u_()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const _=yield r.exchangeTokenPromise;return yield Vw(t,_),To(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Qc.warn(_.message):Qc.error(_),u=_}return i?(f={token:i.token},To(t,Object.assign(Object.assign({},r),{token:i})),yield Vw(t,i)):f=Bw(u),c&&rg(t,f),f})).apply(this,arguments)}function d_(n,e){const t=Pr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),To(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function h_(n){const{app:e}=n,t=Pr(e);let r=t.tokenRefresher;r||(r=function QD(n){const{app:e}=n;return new Ph((0,Te.Z)(function*(){let r;if(r=Pr(e).token?yield Fh(n,!0):yield Fh(n),r.error)throw r.error}),()=>!0,()=>{const t=Pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),To(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function rg(n,e){const t=Pr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function ig(n){return n.expireTimeMillis-Date.now()>0}function Bw(n){return{token:YD(Jc),error:n}}class jw{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Pr(this.app);for(const t of e)d_(this.app,t.next);return Promise.resolve()}}const Jw="app-check-internal";!function y_(){(0,ua._registerComponent)(new Qp.wA("app-check",n=>function JD(n,e){return new jw(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Jw).initialize()})),(0,ua._registerComponent)(new Qp.wA(Jw,n=>function XD(n){return{getToken:e=>Fh(n,e),addTokenListener:e=>function ng(n,e,t,r){const{app:i}=n,u=Pr(i),c={next:t,error:r,type:e};if(To(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&ig(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),h_(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>h_(n))}(n,"INTERNAL",e),removeTokenListener:e=>d_(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ua.registerVersion)("@firebase/app-check","0.5.8")}();class ug{constructor(){return(0,wn.vb)("app-check")}}"undefined"!=typeof window&&window;var Ru=N(198);function eb(n){return new ms.y(function(e){return{unsubscribe:(0,Ru.v)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}function v_(n){return new ms.y(function(e){return{unsubscribe:(0,Ru.q)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class Wa{constructor(e){return e}}const dg=new h.OlP("angularfire2.auth-instances");function mT(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Wa(r)}}const E_={provide:class fT{constructor(){return(0,wn.vb)("auth")}},deps:[[new h.FiY,dg]]},yT={provide:Wa,useFactory:function gT(n,e){const t=(0,wn.JM)("auth",n,e);return t&&new Wa(t)},deps:[[new h.FiY,dg],Zc]};let kx=(()=>{class n{constructor(){(0,Nu.KN)("angularfire",wn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[yT,E_]}),n})();function _T(n,...e){return{ngModule:kx,providers:[{provide:dg,useFactory:mT(n),multi:!0,deps:[h.R0b,h.zs3,wn.HU,t_,[new h.FiY,ug],...e]}]}}const vT=(0,wn.u3)(eb,!0),Xc=(0,wn.u3)(v_,!0),w_=(0,wn.u3)(Ru.n,!0),sb=["toast-component",""];function RT(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){return h.CHM(t),h.oxw().remove()}),h.TgZ(1,"span",6),h._uU(2,"\xd7"),h.qZA()()}}function sO(n,e){if(1&n&&(h.ynx(0),h._uU(1),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.hij("[",t.duplicatesCount+1,"]")}}function I_(n,e){if(1&n&&(h.TgZ(0,"div"),h._uU(1),h.YNc(2,sO,2,1,"ng-container",4),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.titleClass),h.uIk("aria-label",t.title),h.xp6(1),h.hij(" ",t.title," "),h.xp6(1),h.Q6J("ngIf",t.duplicatesCount)}}function D_(n,e){if(1&n&&h._UZ(0,"div",7),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.Q6J("innerHTML",t.message,h.oJD)}}function ob(n,e){if(1&n&&(h.TgZ(0,"div",8),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.uIk("aria-label",t.message),h.xp6(1),h.hij(" ",t.message," ")}}function T_(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"div",9),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Udp("width",t.width+"%")}}function A_(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){return h.CHM(t),h.oxw().remove()}),h.TgZ(1,"span",6),h._uU(2,"\xd7"),h.qZA()()}}function kT(n,e){if(1&n&&(h.ynx(0),h._uU(1),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.hij("[",t.duplicatesCount+1,"]")}}function FT(n,e){if(1&n&&(h.TgZ(0,"div"),h._uU(1),h.YNc(2,kT,2,1,"ng-container",4),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.titleClass),h.uIk("aria-label",t.title),h.xp6(1),h.hij(" ",t.title," "),h.xp6(1),h.Q6J("ngIf",t.duplicatesCount)}}function LT(n,e){if(1&n&&h._UZ(0,"div",7),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.Q6J("innerHTML",t.message,h.oJD)}}function VT(n,e){if(1&n&&(h.TgZ(0,"div",8),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.uIk("aria-label",t.message),h.xp6(1),h.hij(" ",t.message," ")}}function ab(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"div",9),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Udp("width",t.width+"%")}}class BT{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Bh{constructor(e,t,r,i,u,c){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=u,this.toastRef=c,this._onTap=new hi.x,this._onAction=new hi.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const cb={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},S_=new h.OlP("ToastConfig");class db{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new hi.x,this._activate=new hi.x,this._manualClose=new hi.x,this._resetTimeout=new hi.x,this._countDuplicate=new hi.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class jT{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===Bh?this._toastPackage:this._parentInjector.get(e,t,r)}}class hb extends class lb{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class fb{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let Ri=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ed=(()=>{class n{constructor(t,r,i,u){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=u,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new hb(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new fb(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ri),h.LFG(h._Vd),h.LFG(h.z2F),h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jh=(()=>{class n{constructor(t,r,i,u,c){this.overlay=r,this._injector=i,this.sanitizer=u,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,r,i={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,u){const{includeTitleDuplicates:c}=this.toastrConfig;for(const f of this.toasts){const _=c&&f.title===t;if((!c||_)&&f.message===r)return f.toastRef.onDuplicate(i,u),f}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,u)):this._buildNotification(t,r,i,u)}_buildNotification(t,r,i,u){if(!u.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let f=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(f=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let b=r;r&&u.enableHtml&&(b=this.sanitizer.sanitize(h.q3G.HTML,r));const A=new db(_),x=new Bh(this.index,u,b,i,t,A),V=new jT(x,this._injector),W=new BT(u.toastComponent,V),Y=_.attach(W,this.toastrConfig.newestOnTop);A.componentInstance=Y.instance;const _e={toastId:this.index,title:i||"",message:r||"",toastRef:A,onShown:A.afterActivate(),onHidden:A.afterClosed(),onTap:x.onTap(),onAction:x.onAction(),portal:Y};return f||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{_e.toastRef.activate()})),this.toasts.push(_e),_e}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(S_),h.LFG(ed),h.LFG(h.zs3),h.LFG(gs),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),$T=(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(jh),h.Y36(Bh),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(h.d8E("@flyInOut",r.state),h.Tol(r.toastClasses),h.Udp("display",r.displayStyle))},attrs:sb,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(h.YNc(0,RT,3,0,"button",0),h.YNc(1,I_,3,5,"div",1),h.YNc(2,D_,1,3,"div",2),h.YNc(3,ob,2,4,"div",3),h.YNc(4,T_,2,2,"div",4)),2&t&&(h.Q6J("ngIf",r.options.closeButton),h.xp6(1),h.Q6J("ngIf",r.title),h.xp6(1),h.Q6J("ngIf",r.message&&r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.message&&!r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.options.progressBar))},directives:[qn],encapsulation:2,data:{animation:[rI("flyInOut",[Im("inactive",Ac({opacity:0})),Im("active",Ac({opacity:1})),Im("removed",Ac({opacity:0})),f0("inactive => active",d0("{{ easeTime }}ms {{ easing }}")),f0("active => removed",d0("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const oO=Object.assign(Object.assign({},cb),{toastComponent:$T});let $h=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:S_,useValue:{default:oO,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Rs]]}),n})(),M_=(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.appRef=i,this.width=-1,this.toastClasses="",this.state="inactive",this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(jh),h.Y36(Bh),h.Y36(h.z2F))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(h.Tol(r.toastClasses),h.Udp("display",r.displayStyle))},attrs:sb,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(h.YNc(0,A_,3,0,"button",0),h.YNc(1,FT,3,5,"div",1),h.YNc(2,LT,1,3,"div",2),h.YNc(3,VT,2,4,"div",3),h.YNc(4,ab,2,2,"div",4)),2&t&&(h.Q6J("ngIf",r.options.closeButton),h.xp6(1),h.Q6J("ngIf",r.title),h.xp6(1),h.Q6J("ngIf",r.message&&r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.message&&!r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.options.progressBar))},directives:[qn],encapsulation:2}),n})();Object.assign(Object.assign({},cb),{toastComponent:M_});var GT=N(6451),gg=N(5363),x_=N(6063);class pb extends hi.x{constructor(e=1/0,t=1/0,r=x_.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)f=_;f&&r.splice(0,f+1)}}}var gb=N(3099);function Hh(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,gb.B)({connector:()=>new pb(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function mg(n,e){return(0,Mp.m)(e)?fi(()=>n,e):fi(()=>n)}var mb=N(9468),Ys=N(2011),O_=N(127);const Gh=new h.OlP("angularfire2.auth.use-emulator"),P_=new h.OlP("angularfire2.auth.settings"),_b=new h.OlP("angularfire2.auth.tenant-id"),yg=new h.OlP("angularfire2.auth.langugage-code"),_g=new h.OlP("angularfire2.auth.use-device-language"),qT=new h.OlP("angularfire.auth.persistence"),vb=(n,e,t,r,i,u,c,f)=>(0,Ys.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[b,A]of Object.entries(c))_.settings[b]=A;return f&&_.setPersistence(f),_},[t,r,i,u,c,f]);let vg=(()=>{class n{constructor(t,r,i,u,c,f,_,b,A,x,V,W){const Y=new hi.x,_e=Tt(void 0).pipe((0,gg.Q)(c.outsideAngular),fi(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,5881)))),(0,Et.U)(()=>(0,Ys.on)(t,u,r)),(0,Et.U)(Ue=>vb(Ue,u,f,b,A,x,_,V)),Hh({bufferSize:1,refCount:!1}));if(Er(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Tt(null);else{_e.pipe(Zs()).subscribe();const yt=_e.pipe(fi(ht=>ht.getRedirectResult().then(Vt=>Vt,()=>null)),wn.iC,Hh({bufferSize:1,refCount:!1})),_t=_e.pipe(fi(ht=>new ms.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>ht.onAuthStateChanged(Qt=>Vt.next(Qt),Qt=>Vt.error(Qt),()=>Vt.complete()))})))),Ct=_e.pipe(fi(ht=>new ms.y(Vt=>({unsubscribe:u.runOutsideAngular(()=>ht.onIdTokenChanged(Qt=>Vt.next(Qt),Qt=>Vt.error(Qt),()=>Vt.complete()))}))));this.authState=yt.pipe(mg(_t),(0,mb.R)(c.outsideAngular),(0,gg.Q)(c.insideAngular)),this.user=yt.pipe(mg(Ct),(0,mb.R)(c.outsideAngular),(0,gg.Q)(c.insideAngular)),this.idToken=this.user.pipe(fi(ht=>ht?(0,Tn.D)(ht.getIdToken()):Tt(null))),this.idTokenResult=this.user.pipe(fi(ht=>ht?(0,Tn.D)(ht.getIdTokenResult()):Tt(null))),this.credential=(0,GT.T)(yt,Y,this.authState.pipe(Va(ht=>!ht))).pipe((0,Et.U)(ht=>(null==ht?void 0:ht.user)?ht:null),(0,mb.R)(c.outsideAngular),(0,gg.Q)(c.insideAngular))}return(0,Ys.pX)(this,_e,u,{spy:{apply:(Ue,yt,_t)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&_t.then(Ct=>Y.next(Ct))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ys.Dh),h.LFG(Ys.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(wn.HU),h.LFG(Gh,8),h.LFG(P_,8),h.LFG(_b,8),h.LFG(yg,8),h.LFG(_g,8),h.LFG(qT,8),h.LFG(ug,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Eb=(()=>{class n{constructor(){O_.Z.registerVersion("angularfire",wn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[vg]}),n})(),qh=(()=>{class n{constructor(t,r,i,u){this.auth=t,this.router=r,this.toastr=i,this.fireauth=u,this.currentUser$=vT(this.auth)}login(t,r){return(0,Tn.D)((0,Ru.a6)(this.auth,t,r))}signUp(t,r,i){return(0,Tn.D)((0,Ru.a5)(this.auth,r,i)).pipe(fi(({user:u})=>(0,Ru.af)(u,{displayName:t})))}logout(){return(0,Tn.D)(this.auth.signOut())}googleSignIn(){return this.fireauth.signInWithPopup(new Ru.Q).then(()=>{this.router.navigate(["/home"]),this.toastr.success("Sign In Successfully")},()=>{this.toastr.error("Sign In Failed")})}facebookSignIn(){return this.fireauth.signInWithPopup(new Ru.N).then(()=>{this.router.navigate(["/home"]),this.toastr.success("Sign In Successfully")},()=>{this.toastr.error("Sign In Failed")})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Wa),h.LFG(dr),h.LFG(jh),h.LFG(vg))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zT(n,e){if(1&n&&(h.TgZ(0,"h5"),h._uU(1),h.qZA()),2&n){const t=e.ngIf;h.xp6(1),h.hij(" Welcome ",t.displayName,"")}}let wb=(()=>{class n{constructor(t){this.authService=t,this.user$=this.authService.currentUser$}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(qh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:24,vars:3,consts:[[1,"container-fluid"],[1,"container"],[4,"ngIf"],[1,"row"],[1,"col-md-6"],[1,"imgwithtxt"],["src","assets/3.png","alt","heart arrow"],["routerLink","/login"],["src","assets/lol.png","alt","Doctor help patient",1,"lol"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1),h.YNc(2,zT,2,1,"h5",2),h.ALo(3,"async"),h.TgZ(4,"div",3)(5,"div",4)(6,"div",5),h._UZ(7,"img",6),h.TgZ(8,"h5"),h._uU(9,"WE GIVE YOU THE BEST!"),h.qZA()(),h.TgZ(10,"h1"),h._uU(11," We Provide Medical "),h._UZ(12,"br"),h._uU(13," Services That You "),h._UZ(14,"br"),h._uU(15," Can Trust "),h.qZA(),h.TgZ(16,"p"),h._uU(17,"i realized that becoming a doctor, i can only help a small community. But by "),h._UZ(18,"br"),h._uU(19," becoming a doctor, i can help my whole country"),h.qZA(),h.TgZ(20,"button",7),h._uU(21,"SEE HOW WE HELP YOU"),h.qZA()(),h.TgZ(22,"div",4),h._UZ(23,"img",8),h.qZA()()()()),2&t&&(h.xp6(2),h.Q6J("ngIf",h.lcZ(3,1,r.user$)))},directives:[qn,xh],pipes:[tu],styles:[".container-fluid[_ngcontent-%COMP%]{background-image:url(2.596f0b40973a4a99.jpg);padding-top:100px;background-size:cover;background-position:center top;background-repeat:no-repeat}.container-fluid[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{margin-top:36px}.container-fluid[_ngcontent-%COMP%]   .imgwithtxt[_ngcontent-%COMP%]{display:flex;margin-top:100px;margin-bottom:15px}.container-fluid[_ngcontent-%COMP%]   .imgwithtxt[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:15px;color:#524f4f;font-weight:400;padding-top:14px}.container-fluid[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{white-space:nowrap;font-size:55px;line-height:55px;font-weight:600;color:#002e3a;letter-spacing:0px;font-family:Saira;opacity:1}.container-fluid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{white-space:nowrap;font-size:17px;line-height:25px;font-weight:400;color:#9dabaf;font-family:Ubuntu}.container-fluid[_ngcontent-%COMP%]   .lol[_ngcontent-%COMP%]{width:100%}.container-fluid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#00d6a3;outline:none;border:0;color:#fff;padding:15px;border-radius:4px;font-weight:500;font-size:15px;margin-top:15px}.container-fluid[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#033b4a;border:0;color:#fff;transition:.5s}@media (min-width: 320px) and (max-width:359px){.container-fluid[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px;line-height:1}.container-fluid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:9px;line-height:2}}@media (min-width: 360px) and (max-width:374px){.container-fluid[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:30px;line-height:1}.container-fluid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px;line-height:2}}@media (min-width: 375px) and (max-width:410px){.container-fluid[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:33px;line-height:1}.container-fluid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px;line-height:2}}@media (min-width: 411px) and (max-width: 575px){.container-fluid[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:34px;line-height:1}.container-fluid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;line-height:2}}@media (min-width: 768px) and (max-width: 991px){.container-fluid[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:34px;line-height:1}.container-fluid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;line-height:2}}"]}),n})();function bb(n,e){1&n&&(h.TgZ(0,"small"),h._uU(1,"Your email is required"),h.qZA())}function WT(n,e){1&n&&(h.TgZ(0,"small"),h._uU(1,"Your email should contain A or a @"),h.qZA())}function ZT(n,e){if(1&n&&(h.TgZ(0,"div",34),h.YNc(1,bb,2,0,"small",35),h.YNc(2,WT,2,0,"small",35),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.required),h.xp6(1),h.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.email)}}function Cb(n,e){1&n&&(h.TgZ(0,"small"),h._uU(1,"Your password is required"),h.qZA())}function KT(n,e){if(1&n&&(h.TgZ(0,"div",34),h.YNc(1,Cb,2,0,"small",35),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",null==t.password||null==t.password.errors?null:t.password.errors.required)}}let N_=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.toastr=i,this.loginForm=new Qo({email:new Eu("",[Qi.required,Qi.email]),password:new Eu("",Qi.required)})}ngOnInit(){}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}showSuccess(){this.toastr.success("Login Successfully")}showError(){this.toastr.error("Login Failed")}submit(){if(!this.loginForm.valid)return;const{email:t,password:r}=this.loginForm.value;this.authService.login(t,r).subscribe(()=>{this.showSuccess(),this.router.navigate(["/home"])},()=>{this.showError()})}signWithGoogle(){this.authService.googleSignIn()}signWithFacebook(){this.authService.facebookSignIn()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(qh),h.Y36(dr),h.Y36(jh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:55,vars:10,consts:[[1,"container-fluid"],[1,"container"],[1,"row"],[1,"col-lg-2"],[1,"col-lg-3","bgForLeftSection","col-md-12","col-sm-12"],[1,"insidegrid"],[1,"text-center"],["src","assets/IHistopathology-Logo-White.png","alt","IHistopathology Image"],[1,"col-lg-5","all","col-md-12","col-sm-12"],[1,"header"],["src","assets/IHistopathology-Logo.png","alt",""],[3,"formGroup","ngSubmit"],[1,"form-group","inpField"],[1,"fa","fa-envelope","fa-1x","ic1"],["type","email","id","email","placeholder","email","required","","formControlName","email"],["class","text-danger",4,"ngIf"],[1,"fa","fa-lock","fa-1x","ic2"],["type","email","type","password","id","password","placeholder","password","required","","formControlName","password",1,"lastinp"],[1,"form-group"],["mat-flat-button","","color","primary","type","submit",1,"btn","btn-primary","center",3,"disabled"],[1,"afterForm"],[1,"checkbox"],["type","checkbox","name","","id",""],[1,"footer"],[1,"firstparagraph"],["routerLink","/sign-up"],[1,"lineparagraph"],[1,"icons"],[3,"click"],[1,"fa","fa-google","fa-1x","ic1"],[1,"fa","fa-facebook-f","fa-1x","ic1"],[1,"fa","fa-linkedin","fa-1x","ic1"],[1,"lastone"],[1,"terms"],[1,"text-danger"],[4,"ngIf"]],template:function(t,r){if(1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h._UZ(3,"div",3),h.TgZ(4,"div",4)(5,"div",5)(6,"h6",6),h._uU(7,"WELCOME BACK!"),h.qZA(),h._UZ(8,"img",7),h.qZA()(),h.TgZ(9,"div",8)(10,"div",9),h._UZ(11,"img",10),h.TgZ(12,"p",6),h._uU(13,"Log in to your IHistopathology Account! "),h.qZA()(),h.TgZ(14,"form",11),h.NdJ("ngSubmit",function(){return r.submit()}),h.TgZ(15,"div",12),h._UZ(16,"i",13)(17,"input",14),h.YNc(18,ZT,3,2,"div",15),h.qZA(),h.TgZ(19,"div",12),h._UZ(20,"i",16)(21,"input",17),h.YNc(22,KT,2,1,"div",15),h.qZA(),h.TgZ(23,"div",18)(24,"button",19),h._uU(25," LOG IN "),h.qZA()()(),h.TgZ(26,"div",20)(27,"div",21),h._UZ(28,"input",22),h.TgZ(29,"p"),h._uU(30,"remember password"),h.qZA()(),h.TgZ(31,"p"),h._uU(32,"Forget password"),h.qZA()(),h.TgZ(33,"div",23)(34,"p",24),h._uU(35,"Don't have an account? "),h.TgZ(36,"a",25),h._uU(37,"Sign up"),h.qZA()(),h.TgZ(38,"p",26),h._uU(39,"or Log in"),h.qZA(),h.TgZ(40,"div",27)(41,"button",28),h.NdJ("click",function(){return r.signWithGoogle()}),h._UZ(42,"i",29),h.qZA(),h.TgZ(43,"button",28),h.NdJ("click",function(){return r.signWithFacebook()}),h._UZ(44,"i",30),h.qZA(),h.TgZ(45,"button"),h._UZ(46,"i",31),h.qZA()(),h.TgZ(47,"p",32),h._uU(48,"By signing up, you agree to our "),h.TgZ(49,"span",33),h._uU(50," Terms of use "),h.qZA(),h._uU(51," and "),h.TgZ(52,"span",33),h._uU(53," Privacy Policy "),h.qZA()()()(),h._UZ(54,"div",3),h.qZA()()()),2&t){let i,u;h.xp6(14),h.Q6J("formGroup",r.loginForm),h.xp6(1),h.ekj("error-form",(null==r.email?null:r.email.invalid)&&(null==r.email?null:r.email.touched)),h.xp6(2),h.ekj("is-invalid",(null==(i=r.loginForm.get("email"))?null:i.invalid)&&(null==(i=r.loginForm.get("email"))?null:i.touched)),h.xp6(1),h.Q6J("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email?null:r.email.invalid)&&(null==r.email?null:r.email.errors)),h.xp6(3),h.ekj("is-invalid",(null==(u=r.loginForm.get("password"))?null:u.invalid)&&(null==(u=r.loginForm.get("password"))?null:u.touched)),h.xp6(1),h.Q6J("ngIf",(null==r.password?null:r.password.touched)&&(null==r.password?null:r.password.invalid)&&(null==r.password?null:r.password.errors)),h.xp6(2),h.Q6J("disabled",r.loginForm.invalid)}},directives:[hl,Hs,bu,Di,Fa,ho,m,qn,Wc],styles:['.container-fluid[_ngcontent-%COMP%]{padding-top:30px}.insidegrid[_ngcontent-%COMP%]{top:38%;position:relative}.bgForLeftSection[_ngcontent-%COMP%]{background-image:url(login.932de4e07f1cc0ce.png);background-repeat:no-repeat;background-size:cover;border-radius:15px 0 0 15px}.bgForLeftSection[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff}.bgForLeftSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:185px;margin:10px 0 10px 56px}.all[_ngcontent-%COMP%]{background:white;box-shadow:7px 6px 15px -3px #000000a8;border-radius:0 15px 15px 0}.header[_ngcontent-%COMP%]{padding-top:50px}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:185px;margin:10px 0 10px 165px}.inpField[_ngcontent-%COMP%]{position:relative}.ic1[_ngcontent-%COMP%]{position:absolute;top:17px;left:117px;z-index:2}.ic2[_ngcontent-%COMP%]{position:absolute;top:29px;left:117px;z-index:2}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{padding-left:20px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 10px 10px 30px;transform:translate(35%);width:58%;outline:none}.lastinp[_ngcontent-%COMP%]{margin:10px 0}.col-md-5[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:108px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px 109px;width:58%;background-color:#2e3190}.afterForm[_ngcontent-%COMP%]{display:flex;margin:10px 0 10px 100px}.checkbox[_ngcontent-%COMP%]{display:flex;margin-right:50px}.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:8px 10px 0 0}.icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;top:0;left:0}.icons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border-radius:50%;outline:none;border:1px solid #b9b8b8;margin:0 14px;padding:10px 16px}.lineparagraph[_ngcontent-%COMP%]{position:relative;text-align:center}.lineparagraph[_ngcontent-%COMP%]:before{content:"";display:block;width:130px;height:1px;background:#afa5a5;left:77px;top:55%;position:absolute}.lineparagraph[_ngcontent-%COMP%]:after{content:"";display:block;width:130px;height:1px;background:#afa5a5;right:90px;top:55%;position:absolute}.firstparagraph[_ngcontent-%COMP%], .icons[_ngcontent-%COMP%]{text-align:center}.footer[_ngcontent-%COMP%]{padding-bottom:50px}.terms[_ngcontent-%COMP%]{color:#2e3190;font-weight:700}.lastone[_ngcontent-%COMP%]{font-size:11px;text-align:center;padding-top:20px}small[_ngcontent-%COMP%]{margin-left:110px}@media (min-width: 320px) and (max-width: 575px){.container-fluid[_ngcontent-%COMP%]{padding:0}.bgForLeftSection[_ngcontent-%COMP%]{border-radius:0}.insidegrid[_ngcontent-%COMP%]{top:0;padding:20px 0}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 42px}.all[_ngcontent-%COMP%]{border-radius:0;box-shadow:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{transform:none;width:100%}.ic1[_ngcontent-%COMP%], .ic2[_ngcontent-%COMP%], .ic3[_ngcontent-%COMP%]{left:11px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px;width:100%}.afterForm[_ngcontent-%COMP%]{margin:10px 0}.lineparagraph[_ngcontent-%COMP%]:before{width:90px;left:11px}.lineparagraph[_ngcontent-%COMP%]:after{width:90px;right:11px}small[_ngcontent-%COMP%]{margin:0}}@media (min-width: 576px) and (max-width: 767px){.container-fluid[_ngcontent-%COMP%]{padding:0}.bgForLeftSection[_ngcontent-%COMP%]{border-radius:0;width:100%;margin:0}.bgForLeftSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:184px;margin:10px 0 10px 187px}.insidegrid[_ngcontent-%COMP%]{top:0;padding:20px 0}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 187px}.afterForm[_ngcontent-%COMP%]{justify-content:space-between}.all[_ngcontent-%COMP%]{border-radius:0;margin:auto;box-shadow:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{transform:none;width:100%}.ic1[_ngcontent-%COMP%], .ic2[_ngcontent-%COMP%], .ic3[_ngcontent-%COMP%]{left:11px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px;width:100%}.afterForm[_ngcontent-%COMP%]{margin:10px 0}.lineparagraph[_ngcontent-%COMP%]:before{width:199px;left:15px}.lineparagraph[_ngcontent-%COMP%]:after{width:199px;right:15px}small[_ngcontent-%COMP%]{margin:0}}@media (min-width: 768px) and (max-width: 991px){.container-fluid[_ngcontent-%COMP%]{padding:0}.bgForLeftSection[_ngcontent-%COMP%]{border-radius:0;width:100%;margin:0}.bgForLeftSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:184px;margin:10px 0 10px 267px}.insidegrid[_ngcontent-%COMP%]{top:0;padding:20px 0}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 245px}.afterForm[_ngcontent-%COMP%]{justify-content:space-between}.all[_ngcontent-%COMP%]{border-radius:0;margin:auto;box-shadow:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{transform:none;width:100%}.ic1[_ngcontent-%COMP%], .ic2[_ngcontent-%COMP%], .ic3[_ngcontent-%COMP%]{left:11px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px;width:100%}.afterForm[_ngcontent-%COMP%]{margin:10px 0}.lineparagraph[_ngcontent-%COMP%]:before{width:199px;left:87px}.lineparagraph[_ngcontent-%COMP%]:after{width:199px;right:87px}small[_ngcontent-%COMP%]{margin:0}}@media (min-width: 992px) and (max-width: 1199px){.bgForLeftSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 24px}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 77px}.ic1[_ngcontent-%COMP%], .ic2[_ngcontent-%COMP%], .ic3[_ngcontent-%COMP%]{left:52px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 10px 10px 30px;transform:translate(14%);width:77%;outline:none}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px 38px;width:78%}small[_ngcontent-%COMP%]{margin-left:44px}.afterForm[_ngcontent-%COMP%]{margin:10px 0 10px 25px}.lineparagraph[_ngcontent-%COMP%]:before{left:12px}.lineparagraph[_ngcontent-%COMP%]:after{right:12px}}@media (min-width: 1200px) and (max-width:1439px){.bgForLeftSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 56px}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 140px}.ic1[_ngcontent-%COMP%], .ic2[_ngcontent-%COMP%], .ic3[_ngcontent-%COMP%]{left:60px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 10px 10px 30px;transform:translate(14%);width:77%;outline:none}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px 38px;width:78%}small[_ngcontent-%COMP%]{margin-left:44px}.afterForm[_ngcontent-%COMP%]{margin:10px 0 10px 25px}.lineparagraph[_ngcontent-%COMP%]:before{left:12px}.lineparagraph[_ngcontent-%COMP%]:after{right:12px}}']}),n})();function Ib(n,e){1&n&&(h.TgZ(0,"small"),h._uU(1,"Your username is required"),h.qZA())}function Db(n,e){if(1&n&&(h.TgZ(0,"div",37),h.YNc(1,Ib,2,0,"small",38),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",null==t.username||null==t.username.errors?null:t.username.errors.required)}}function Tb(n,e){1&n&&(h.TgZ(0,"small"),h._uU(1,"Your email is required"),h.qZA())}function YT(n,e){1&n&&(h.TgZ(0,"small"),h._uU(1,"Your email should contain A or a @"),h.qZA())}function QT(n,e){if(1&n&&(h.TgZ(0,"div",37),h.YNc(1,Tb,2,0,"small",38),h.YNc(2,YT,2,0,"small",38),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.required),h.xp6(1),h.Q6J("ngIf",null==t.email||null==t.email.errors?null:t.email.errors.email)}}function lO(n,e){1&n&&(h.TgZ(0,"small"),h._uU(1,"Your password is required"),h.qZA())}function Ab(n,e){if(1&n&&(h.TgZ(0,"div",37),h.YNc(1,lO,2,0,"small",38),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Q6J("ngIf",null==t.password||null==t.password.errors?null:t.password.errors.required)}}let cO=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.toastr=i,this.signUpForm=new Qo({username:new Eu("",Qi.required),email:new Eu("",[Qi.required,Qi.email]),password:new Eu("",Qi.required)})}ngOnInit(){}get username(){return this.signUpForm.get("username")}get email(){return this.signUpForm.get("email")}get password(){return this.signUpForm.get("password")}showSuccess(){this.toastr.success("Signup Successfully")}showError(){this.toastr.error("Email Already Exist")}submitForm(){if(!this.signUpForm.valid)return;const{username:t,email:r,password:i}=this.signUpForm.value;this.authService.signUp(t,r,i).subscribe(()=>{this.router.navigate(["home"]),this.showSuccess()},()=>{this.showError()})}signWithGoogle(){this.authService.googleSignIn()}signWithFacebook(){this.authService.facebookSignIn()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(qh),h.Y36(dr),h.Y36(jh))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-sign-up"]],decls:59,vars:13,consts:[[1,"container-fluid"],[1,"container"],[1,"row"],[1,"col-md-2"],[1,"col-md-3","bgForLeftSection"],[1,"insidegrid"],[1,"text-center"],["src","assets/IHistopathology-Logo-White.png","alt","IHistopathology Image"],[1,"col-md-5","all"],[1,"header"],["src","assets/IHistopathology-Logo.png","alt",""],[3,"formGroup","ngSubmit"],[1,"form-group","user"],[1,"fa","fa-user","fa-1x","ic3"],["type","email","type","text","id","username","placeholder","username","required","","formControlName","username",1,"firstinp"],["class","text-danger",4,"ngIf"],[1,"form-group","inpField"],[1,"fa","fa-envelope","fa-1x","ic1"],["type","email","id","email","placeholder","email","required","","formControlName","email"],[1,"fa","fa-lock","fa-1x","ic2"],["type","email","type","password","id","password","placeholder","password","required","","formControlName","password",1,"lastinp"],[1,"form-group"],["mat-flat-button","","color","primary","type","submit",1,"btn","btn-primary","center",3,"disabled"],[1,"afterForm"],[1,"checkbox"],["type","checkbox","name","","id",""],[1,"footer"],[1,"firstparagraph"],["routerLink","/login"],[1,"lineparagraph"],[1,"icons"],[3,"click"],[1,"fa","fa-google","fa-1x","ic1"],[1,"fa","fa-facebook-f","fa-1x","ic1"],[1,"fa","fa-linkedin","fa-1x","ic1"],[1,"lastone"],[1,"terms"],[1,"text-danger"],[4,"ngIf"]],template:function(t,r){if(1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2),h._UZ(3,"div",3),h.TgZ(4,"div",4)(5,"div",5)(6,"h6",6),h._uU(7,"WELCOME BACK!"),h.qZA(),h._UZ(8,"img",7),h.qZA()(),h.TgZ(9,"div",8)(10,"div",9),h._UZ(11,"img",10),h.TgZ(12,"p",6),h._uU(13,"Sign Up and Start Learning! "),h.qZA()(),h.TgZ(14,"form",11),h.NdJ("ngSubmit",function(){return r.submitForm()}),h.TgZ(15,"div",12),h._UZ(16,"i",13)(17,"input",14),h.YNc(18,Db,2,1,"div",15),h.qZA(),h.TgZ(19,"div",16),h._UZ(20,"i",17)(21,"input",18),h.YNc(22,QT,3,2,"div",15),h.qZA(),h.TgZ(23,"div",16),h._UZ(24,"i",19)(25,"input",20),h.YNc(26,Ab,2,1,"div",15),h.qZA(),h.TgZ(27,"div",21)(28,"button",22),h._uU(29," SIGN UP "),h.qZA()()(),h.TgZ(30,"div",23)(31,"div",24),h._UZ(32,"input",25),h.TgZ(33,"p"),h._uU(34,"remember password"),h.qZA()(),h.TgZ(35,"p"),h._uU(36,"Forget password"),h.qZA()(),h.TgZ(37,"div",26)(38,"p",27),h._uU(39,"Don't have an account? "),h.TgZ(40,"a",28),h._uU(41,"Log in"),h.qZA()(),h.TgZ(42,"p",29),h._uU(43,"or Create account with"),h.qZA(),h.TgZ(44,"div",30)(45,"button",31),h.NdJ("click",function(){return r.signWithGoogle()}),h._UZ(46,"i",32),h.qZA(),h.TgZ(47,"button",31),h.NdJ("click",function(){return r.signWithFacebook()}),h._UZ(48,"i",33),h.qZA(),h.TgZ(49,"button"),h._UZ(50,"i",34),h.qZA()(),h.TgZ(51,"p",35),h._uU(52,"By signing up, you agree to our "),h.TgZ(53,"span",36),h._uU(54," Terms of use "),h.qZA(),h._uU(55," and "),h.TgZ(56,"span",36),h._uU(57," Privacy Policy "),h.qZA()()()(),h._UZ(58,"div",3),h.qZA()()()),2&t){let i,u,c;h.xp6(14),h.Q6J("formGroup",r.signUpForm),h.xp6(3),h.ekj("is-invalid",(null==(i=r.signUpForm.get("username"))?null:i.invalid)&&(null==(i=r.signUpForm.get("username"))?null:i.touched)),h.xp6(1),h.Q6J("ngIf",(null==r.username?null:r.username.touched)&&(null==r.username?null:r.username.invalid)&&(null==r.username?null:r.username.errors)),h.xp6(1),h.ekj("error-form",(null==r.email?null:r.email.invalid)&&(null==r.email?null:r.email.touched)),h.xp6(2),h.ekj("is-invalid",(null==(u=r.signUpForm.get("email"))?null:u.invalid)&&(null==(u=r.signUpForm.get("email"))?null:u.touched)),h.xp6(1),h.Q6J("ngIf",(null==r.email?null:r.email.touched)&&(null==r.email?null:r.email.invalid)&&(null==r.email?null:r.email.errors)),h.xp6(3),h.ekj("is-invalid",(null==(c=r.signUpForm.get("password"))?null:c.invalid)&&(null==(c=r.signUpForm.get("password"))?null:c.touched)),h.xp6(1),h.Q6J("ngIf",(null==r.password?null:r.password.touched)&&(null==r.password?null:r.password.invalid)&&(null==r.password?null:r.password.errors)),h.xp6(2),h.Q6J("disabled",r.signUpForm.invalid)}},directives:[hl,Hs,bu,Di,Fa,ho,m,qn,Wc],styles:['.container-fluid[_ngcontent-%COMP%]{padding-top:30px}.insidegrid[_ngcontent-%COMP%]{top:38%;position:relative}.bgForLeftSection[_ngcontent-%COMP%]{background-image:url(login.932de4e07f1cc0ce.png);background-repeat:no-repeat;background-size:cover;border-radius:15px 0 0 15px}.bgForLeftSection[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#fff}.bgForLeftSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:185px;margin:10px 0 10px 56px}.all[_ngcontent-%COMP%]{background:white;box-shadow:7px 6px 15px -3px #000000a8;border-radius:0 15px 15px 0}.header[_ngcontent-%COMP%]{padding-top:50px}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:185px;margin:10px 0 10px 165px}.inpField[_ngcontent-%COMP%]{position:relative}.ic1[_ngcontent-%COMP%]{position:absolute;top:17px;left:117px;z-index:2}.ic2[_ngcontent-%COMP%]{position:absolute;top:29px;left:117px;z-index:2}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{padding-left:20px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 10px 10px 30px;transform:translate(35%);width:58%;outline:none}.lastinp[_ngcontent-%COMP%]{margin:10px 0}.col-md-5[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-left:108px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px 109px;width:58%;background-color:#2e3190}.afterForm[_ngcontent-%COMP%]{display:flex;margin:10px 0 10px 100px}.checkbox[_ngcontent-%COMP%]{display:flex;margin-right:50px}.checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:8px 10px 0 0}.icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;top:0;left:0}.icons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border-radius:50%;outline:none;border:1px solid #b9b8b8;margin:0 14px;padding:10px 16px}.lineparagraph[_ngcontent-%COMP%]{position:relative;text-align:center}.lineparagraph[_ngcontent-%COMP%]:before{content:"";display:block;width:130px;height:1px;background:#afa5a5;left:43px;top:55%;position:absolute}.lineparagraph[_ngcontent-%COMP%]:after{content:"";display:block;width:130px;height:1px;background:#afa5a5;right:43px;top:55%;position:absolute}.firstparagraph[_ngcontent-%COMP%], .icons[_ngcontent-%COMP%]{text-align:center}.footer[_ngcontent-%COMP%]{padding-bottom:10px}.user[_ngcontent-%COMP%]{margin-bottom:10px;position:relative}.ic3[_ngcontent-%COMP%]{position:absolute;top:17px;left:117px;z-index:2}.firstinp[_ngcontent-%COMP%]{border:1px solid black}.terms[_ngcontent-%COMP%]{color:#2e3190;font-weight:700}.lastone[_ngcontent-%COMP%]{font-size:11px;text-align:center;margin-top:20px}small[_ngcontent-%COMP%]{margin-left:110px}@media (min-width: 320px) and (max-width: 575px){.container-fluid[_ngcontent-%COMP%]{padding:0}.bgForLeftSection[_ngcontent-%COMP%]{border-radius:0}.insidegrid[_ngcontent-%COMP%]{top:0;padding:20px 0}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 42px}.all[_ngcontent-%COMP%]{border-radius:0;box-shadow:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{transform:none;width:100%}.ic1[_ngcontent-%COMP%], .ic2[_ngcontent-%COMP%], .ic3[_ngcontent-%COMP%]{left:11px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px;width:100%}.afterForm[_ngcontent-%COMP%]{margin:10px 0}.lineparagraph[_ngcontent-%COMP%]:before{width:51px;left:11px}.lineparagraph[_ngcontent-%COMP%]:after{width:51px;right:11px}small[_ngcontent-%COMP%]{margin-left:0!important}}@media (min-width: 576px) and (max-width: 767px){.container-fluid[_ngcontent-%COMP%]{padding:0}.bgForLeftSection[_ngcontent-%COMP%]{border-radius:0;width:100%;margin:0}.bgForLeftSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:184px;margin:10px 0 10px 187px}.insidegrid[_ngcontent-%COMP%]{top:0;padding:20px 0}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 187px}.afterForm[_ngcontent-%COMP%]{justify-content:space-between}.all[_ngcontent-%COMP%]{border-radius:0;margin:auto;box-shadow:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{transform:none;width:100%}.ic1[_ngcontent-%COMP%], .ic2[_ngcontent-%COMP%], .ic3[_ngcontent-%COMP%]{left:11px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px;width:100%}.afterForm[_ngcontent-%COMP%]{margin:10px 0}.lineparagraph[_ngcontent-%COMP%]:before{width:155px;left:15px}.lineparagraph[_ngcontent-%COMP%]:after{width:155px;right:15px}small[_ngcontent-%COMP%]{margin-left:0!important}}@media (min-width: 768px) and (max-width: 991px){.container-fluid[_ngcontent-%COMP%]{padding:0}.bgForLeftSection[_ngcontent-%COMP%]{border-radius:0;width:100%;margin:0}.bgForLeftSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:184px;margin:10px 0 10px 267px}.insidegrid[_ngcontent-%COMP%]{top:0;padding:20px 0}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 245px}.afterForm[_ngcontent-%COMP%]{justify-content:space-between}.all[_ngcontent-%COMP%]{border-radius:0;margin:auto;box-shadow:none;width:100%}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{transform:none;width:100%}.ic1[_ngcontent-%COMP%], .ic2[_ngcontent-%COMP%], .ic3[_ngcontent-%COMP%]{left:11px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px;width:100%}.afterForm[_ngcontent-%COMP%]{margin:10px 0}.lineparagraph[_ngcontent-%COMP%]:before{width:173px;left:87px}.lineparagraph[_ngcontent-%COMP%]:after{width:173px;right:87px}small[_ngcontent-%COMP%]{margin-left:0!important}}@media (min-width: 992px) and (max-width: 1199px){.bgForLeftSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 24px}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 77px}.ic1[_ngcontent-%COMP%], .ic2[_ngcontent-%COMP%], .ic3[_ngcontent-%COMP%]{left:52px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 10px 10px 30px;transform:translate(14%);width:77%;outline:none}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px 38px;width:78%}small[_ngcontent-%COMP%]{margin-left:44px!important}.afterForm[_ngcontent-%COMP%]{margin:10px 0 10px 25px}.lineparagraph[_ngcontent-%COMP%]:before{left:12px;width:85px}.lineparagraph[_ngcontent-%COMP%]:after{right:12px;width:85px}}@media (min-width: 1200px) and (max-width:1439px){.bgForLeftSection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 56px}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:10px 0 10px 140px}.ic1[_ngcontent-%COMP%], .ic2[_ngcontent-%COMP%], .ic3[_ngcontent-%COMP%]{left:60px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px 10px 10px 30px;transform:translate(14%);width:77%;outline:none}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:15px 0 10px 38px;width:78%}small[_ngcontent-%COMP%]{margin-left:44px}.afterForm[_ngcontent-%COMP%]{margin:10px 0 10px 25px}.lineparagraph[_ngcontent-%COMP%]:before{left:12px}.lineparagraph[_ngcontent-%COMP%]:after{right:12px}}']}),n})();var JT=N(9635);const Sb=(0,Et.U)(n=>!!n);let dO=(()=>{class n{constructor(t,r){this.router=t,this.auth=r,this.canActivate=(i,u)=>{const c=i.data.authGuardPipe||(()=>Sb);return Xc(this.auth).pipe((0,Lc.q)(1),c(i,u),(0,Et.U)(f=>"boolean"==typeof f?f:Array.isArray(f)?this.router.createUrlTree(f):this.router.parseUrl(f)))}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(dr),h.LFG(Wa))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const Mb=n=>({canActivate:[dO],data:{authGuardPipe:n}}),k_=()=>{return n=["home"],(0,JT.z)(Sb,(0,Et.U)(e=>e&&n||!0));var n},F_=[{path:"",pathMatch:"full",component:N_},Object.assign({path:"login",component:N_},Mb(k_)),Object.assign({path:"sign-up",component:cO},Mb(k_)),Object.assign({path:"home",component:wb},Mb(()=>{return n=["login"],(0,JT.z)(Sb,(0,Et.U)(e=>e||n));var n}))];let Ob=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Cw.forRoot(F_)],Cw]}),n})();function Pb(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"nav",2)(1,"div",3),h._UZ(2,"img",4),h.TgZ(3,"form",5)(4,"span"),h._UZ(5,"i",6),h._uU(6),h.qZA(),h.TgZ(7,"button",7),h.NdJ("click",function(){return h.CHM(t),h.oxw().logout()}),h._uU(8,"logout"),h.qZA()()()()}if(2&n){const t=e.ngIf;h.xp6(6),h.hij(" ",t.displayName," ")}}function Nb(n,e){}let fO=(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.title="webtask"}logout(){this.authService.logout().subscribe(()=>{this.router.navigate(["login"])})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(qh),h.Y36(dr))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:4,consts:[["class","navbar bg-light",4,"ngIf","ngIfElse"],["none",""],[1,"navbar","bg-light"],[1,"container-fluid"],["src","assets/IHistopathology-Logo.png","alt","logo"],["role","search",1,"d-flex"],[1,"fa","fa-user","fa-1x","ic2"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){if(1&t&&(h.YNc(0,Pb,9,1,"nav",0),h.ALo(1,"async"),h.YNc(2,Nb,0,0,"ng-template",null,1,h.W1O),h._UZ(4,"router-outlet")),2&t){const i=h.MAs(3);h.Q6J("ngIf",h.lcZ(1,2,r.authService.currentUser$))("ngIfElse",i)}},directives:[qn,hl,Hs,wh],pipes:[tu],styles:["img[_ngcontent-%COMP%]{width:150px}span[_ngcontent-%COMP%]{margin:10px}nav[_ngcontent-%COMP%]{background-color:#07eeb6!important}"]}),n})();const zh_firebase={apiKey:"AIzaSyA9vMSvZDteH91gJwQKT9SynBkJnRJcs4U",authDomain:"webtask-66e39.firebaseapp.com",projectId:"webtask-66e39",storageBucket:"webtask-66e39.appspot.com",messagingSenderId:"1039464438403",appId:"1:1039464438403:web:2b28554e56ede06a8b19b6"};var eA=N(4986);function Wh(){return(0,ns.e)((n,e)=>{let t,r=!1;n.subscribe((0,Wn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function pO(n,e){return n===e}N(5881);var st,gO=N(3942),nA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ka={},Rb=Rb||{},Nt=nA||self;function td(){}function L_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ki(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Zh="closure_uid_"+(1e9*Math.random()>>>0),iA=0;function sA(n,e,t){return n.call.apply(n.bind,arguments)}function V_(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Nr(n,e,t){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sA:V_).apply(null,arguments)}function Kh(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Qr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Ya(){this.s=this.s,this.o=this.o}var oA={};Ya.prototype.s=!1,Ya.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function rA(n){return Object.prototype.hasOwnProperty.call(n,Zh)&&n[Zh]||(n[Zh]=++iA)}(this);delete oA[n]}},Ya.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Fb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},wg=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function Lb(n){return Array.prototype.concat.apply([],arguments)}function Vb(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function bg(n){return/^[\s\xa0]*$/.test(n)}var gi,U_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fi(n,e){return-1!=n.indexOf(e)}function B_(n,e){return n<e?-1:n>e?1:0}e:{var Ub=Nt.navigator;if(Ub){var aA=Ub.userAgent;if(aA){gi=aA;break e}}gi=""}function Cg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function j_(n){const e={};for(const t in n)e[t]=n[t];return e}var Bb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jb(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<Bb.length;u++)t=Bb[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ig(n){return Ig[" "](n),n}Ig[" "]=td;var q_,n,H_=Fi(gi,"Opera"),Pl=Fi(gi,"Trident")||Fi(gi,"MSIE"),$b=Fi(gi,"Edge"),Dg=$b||Pl,G_=Fi(gi,"Gecko")&&!(Fi(gi.toLowerCase(),"webkit")&&!Fi(gi,"Edge"))&&!(Fi(gi,"Trident")||Fi(gi,"MSIE"))&&!Fi(gi,"Edge"),uA=Fi(gi.toLowerCase(),"webkit")&&!Fi(gi,"Edge");function Hb(){var n=Nt.document;return n?n.documentMode:void 0}e:{var Gb="",Tg=(n=gi,G_?/rv:([^\);]+)(\)|;)/.exec(n):$b?/Edge\/([\d\.]+)/.exec(n):Pl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uA?/WebKit\/(\S+)/.exec(n):H_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Tg&&(Gb=Tg?Tg[1]:""),Pl){var z_=Hb();if(null!=z_&&z_>parseFloat(Gb)){q_=String(z_);break e}}q_=Gb}var lA={};var mO=Nt.document&&Pl&&(Hb()||parseInt(q_,10))||void 0,yO=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",td,e),Nt.removeEventListener("test",td,e)}catch(t){}return n}();function Li(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Yh(n,e){if(Li.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(G_){e:{try{Ig(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ag[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yh.Z.h.call(this)}}Li.prototype.h=function(){this.defaultPrevented=!0},Qr(Yh,Li);var Ag={2:"touch",3:"pen",4:"mouse"};Yh.prototype.h=function(){Yh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Qh="closure_listenable_"+(1e6*Math.random()|0),hA=0;function zb(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++hA,this.ca=this.fa=!1}function la(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Jh(n){this.src=n,this.g={},this.h=0}function Xh(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Fb(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(la(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ef(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}Jh.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=ef(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new zb(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var W_="closure_lm_"+(1e6*Math.random()|0),tf={};function Sg(n,e,t,r,i){if(r&&r.once)return fA(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Sg(n,e[u],t,r,i);return null}return t=Q_(t),n&&n[Qh]?n.N(e,t,ki(r)?!!r.capture:!!r,i):nf(n,e,t,!1,r,i)}function nf(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=ki(i)?!!i.capture:!!i,f=K_(n);if(f||(n[W_]=f=new Jh(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function _O(){var e=gA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)yO||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Z_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function fA(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)fA(n,e[u],t,r,i);return null}return t=Q_(t),n&&n[Qh]?n.O(e,t,ki(r)?!!r.capture:!!r,i):nf(n,e,t,!0,r,i)}function pA(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)pA(n,e[u],t,r,i);else r=ki(r)?!!r.capture:!!r,t=Q_(t),n&&n[Qh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ef(u=n.g[e],t,r,i))&&(la(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=K_(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ef(e,t,r,i)),(t=-1<n?e[n]:null)&&Wb(t))}function Wb(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Qh])Xh(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Z_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=K_(e))?(Xh(t,n),0==t.h&&(t.src=null,e[W_]=null)):la(n)}}}function Z_(n){return n in tf?tf[n]:tf[n]="on"+n}function gA(n,e){if(n.ca)n=!0;else{e=new Yh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Wb(n),n=t.call(r,e)}return n}function K_(n){return(n=n[W_])instanceof Jh?n:null}var Y_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Q_(n){return"function"==typeof n?n:(n[Y_]||(n[Y_]=function(e){return n.handleEvent(e)}),n[Y_])}function Ir(){Ya.call(this),this.i=new Jh(this),this.P=this,this.I=null}function Rr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Li(e,n);else if(e instanceof Li)e.target=e.target||n;else{var i=e;jb(e=new Li(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=rf(c,r,!0,e)&&i}if(i=rf(c=e.g=n,r,!0,e)&&i,i=rf(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=rf(c=e.g=t[u],r,!1,e)&&i}function rf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var f=c.listener,_=c.ia||c.src;c.fa&&Xh(n.i,c),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}Qr(Ir,Ya),Ir.prototype[Qh]=!0,Ir.prototype.removeEventListener=function(n,e,t,r){pA(this,n,e,t,r)},Ir.prototype.M=function(){if(Ir.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)la(t[r]);delete n.g[e],n.h--}}this.I=null},Ir.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ir.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var J_=Nt.JSON.stringify;function mA(){var n=_A;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var X_,Mg=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new vO,n=>n.reset());class vO{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Kb(n){Nt.setTimeout(()=>{throw n},0)}function sf(n,e){X_||function yA(){var n=Nt.Promise.resolve(void 0);X_=function(){n.then(EO)}}(),Yb||(X_(),Yb=!0),_A.add(n,e)}var Yb=!1,_A=new class Zb{constructor(){this.h=this.g=null}add(e,t){const r=Mg.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function EO(){for(var n;n=mA();){try{n.h.call(n.g)}catch(t){Kb(t)}var e=Mg;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yb=!1}function xg(n,e){Ir.call(this),this.h=n||1,this.g=e||Nt,this.j=Nr(this.kb,this),this.l=Date.now()}function ev(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Qb(n,e,t){if("function"==typeof n)t&&(n=Nr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Nr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function vA(n){n.g=Qb(()=>{n.g=null,n.i&&(n.i=!1,vA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Qr(xg,Ir),(st=xg.prototype).da=!1,st.S=null,st.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Rr(this,"tick"),this.da&&(ev(this),this.start()))}},st.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.M=function(){xg.Z.M.call(this),ev(this),delete this.g};class wO extends Ya{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vA(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Og(n){Ya.call(this),this.h=n,this.g={}}Qr(Og,Ya);var EA=[];function Jb(n,e,t,r){Array.isArray(t)||(t&&(EA[0]=t.toString()),t=EA);for(var i=0;i<t.length;i++){var u=Sg(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function wA(n){Cg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Wb(e)},n),n.g={}}function tv(){this.g=!0}function s(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function a(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return J_(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}Og.prototype.M=function(){Og.Z.M.call(this),wA(this)},Og.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tv.prototype.Aa=function(){this.g=!1},tv.prototype.info=function(){};var l={},d=null;function p(){return d=d||new Ir}function y(n){Li.call(this,l.Ma,n)}function E(n){const e=p();Rr(e,new y(e,n))}function C(n,e){Li.call(this,l.STAT_EVENT,n),this.stat=e}function T(n){const e=p();Rr(e,new C(e,n))}function M(n,e){Li.call(this,l.Na,n),this.size=e}function k(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}l.Ma="serverreachability",Qr(y,Li),l.STAT_EVENT="statevent",Qr(C,Li),l.Na="timingevent",Qr(M,Li);var j={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ee={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function we(){}function ze(){}we.prototype.h=null;var Jt,nt={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function xe(){Li.call(this,"d")}function mt(){Li.call(this,"c")}function un(){}function Jr(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Og(this),this.P=nv,this.W=new xg(n=Dg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ku}function ku(){this.i=null,this.g="",this.h=!1}Qr(xe,Li),Qr(mt,Li),Qr(un,we),un.prototype.g=function(){return new XMLHttpRequest},un.prototype.i=function(){return{}},Jt=new un;var nv=45e3,af={},nd={};function uf(n,e,t){n.K=1,n.v=rC(Rl(e)),n.s=t,n.U=!0,Pg(n,null)}function Pg(n,e){n.F=Date.now(),Nl(n),n.A=Rl(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),xO(t.h,"t",r),n.C=0,t=n.l.H,n.h=new ku,n.g=XO(n.l,t?e:null,!n.s),0<n.O&&(n.L=new wO(Nr(n.Ia,n,n.g),n.O)),Jb(n.V,n.g,"readystatechange",n.gb),e=n.H?j_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),E(1),function bO(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),_=0;_<f.length;_++){var b=f[_].split("=");if(1<b.length){var A=b[0];b=b[1];var x=A.split("_");c=2<=x.length&&"type"==x[1]?c+(A+"=")+b+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Ng(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Rg(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=rv(n,t),i==nd){4==e&&(n.o=4,T(14),r=!1),s(n.j,n.m,null,"[Incomplete Response]");break}if(i==af){n.o=4,T(15),s(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}s(n.j,n.m,i,null),bA(n,i)}Ng(n)&&i!=nd&&i!=af&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,T(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),NA(e),e.L=!0,T(11))):(s(n.j,n.m,t,"[Invalid Chunked Response]"),lf(n),iv(n))}function rv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?nd:(t=Number(e.substring(t,r)),isNaN(t)?af:(r+=1)+t>e.length?nd:(e=e.substr(r,t),n.C=r+t,e))}function Nl(n){n.Y=Date.now()+n.P,IO(n,n.P)}function IO(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=k(Nr(n.eb,n),e)}function Xb(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function iv(n){0==n.l.G||n.I||KO(n.l,n)}function lf(n){Xb(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ev(n.W),wA(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function bA(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||DA(t.i,n)))if(t.I=n.N,!n.J&&DA(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=k(Nr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;lC(t),aC(t)}PA(t),T(18)}if(1>=NO(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else hf(t,11)}else if((n.J||t.g==n)&&lC(t),!bg(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const x=b[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const V=b[5];null!=V&&"number"==typeof V&&0<V&&(t.K=r=1.5*V,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const W=n.g;if(W){const Y=W.g?W.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Y){var u=r.i;!u.g&&(Fi(Y,"spdy")||Fi(Y,"quic")||Fi(Y,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(TA(u,u.h),u.h=null))}if(r.D){const _e=W.g?W.g.getResponseHeader("X-HTTP-Session-Id"):null;_e&&(r.sa=_e,tr(r.F,r.D,_e))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=JO(r,r.H?r.la:null,r.W),c.J){RO(r.i,c);var f=c,_=r.K;_&&f.setTimeout(_),f.B&&(Xb(f),Nl(f)),r.g=c}else WO(r);0<t.l.length&&uC(t)}else"stop"!=b[0]&&"close"!=b[0]||hf(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?hf(t,7):xA(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}E(4)}catch(b){}}function CA(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(L_(n)||"string"==typeof n)wg(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(L_(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function UR(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(L_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function kg(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof kg)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function IA(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];cf(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)cf(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function cf(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(st=Jr.prototype).setTimeout=function(n){this.P=n},st.gb=function(n){n=n.target;const e=this.L;e&&3==kl(n)?e.l():this.Ia(n)},st.Ia=function(n){try{if(n==this.g)e:{const A=kl(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>A)&&(3!=A||Dg||this.g&&(this.h.h||this.g.ga()||$O(this.g)))){this.I||4!=A||7==e||E(8==e||0>=x?3:2),Xb(this);var t=this.g.ba();this.N=t;t:if(Ng(this)){var r=$O(this.g);n="";var i=r.length,u=4==kl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){lf(this),iv(this);var c="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function CO(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bg(f)){var b=f;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,T(12),lf(this),iv(this);break e}s(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bA(this,t)}this.U?(Rg(this,A,c),Dg&&this.i&&3==A&&(Jb(this.V,this.W,"tick",this.fb),this.W.start())):(s(this.j,this.m,c,null),bA(this,c)),4==A&&lf(this),this.i&&!this.I&&(4==A?KO(this.l,this):(this.i=!1,Nl(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,T(12)):(this.o=0,T(13)),lf(this),iv(this)}}}catch(A){}},st.fb=function(){if(this.g){var n=kl(this.g),e=this.g.ga();this.C<e.length&&(Xb(this),Rg(this,n,e),this.i&&4!=n&&Nl(this))}},st.cancel=function(){this.I=!0,lf(this)},st.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function o(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(E(3),T(17)),lf(this),this.o=2,iv(this)):IO(this,this.Y-n)},(st=kg.prototype).R=function(){IA(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},st.T=function(){return IA(this),this.g.concat()},st.get=function(n,e){return cf(this.h,n)?this.h[n]:e},st.set=function(n,e){cf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},st.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var DO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function df(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof df){this.g=void 0!==e?e:n.g,eC(this,n.j),this.s=n.s,tC(this,n.i),nC(this,n.m),this.l=n.l,e=n.h;var t=new av;t.i=e.i,e.g&&(t.g=new kg(e.g),t.h=e.h),TO(this,t),this.o=n.o}else n&&(t=String(n).match(DO))?(this.g=!!e,eC(this,t[1]||"",!0),this.s=sv(t[2]||""),tC(this,t[3]||"",!0),nC(this,t[4]),this.l=sv(t[5]||"",!0),TO(this,t[6]||"",!0),this.o=sv(t[7]||"")):(this.g=!!e,this.h=new av(null,this.g))}function Rl(n){return new df(n)}function eC(n,e,t){n.j=t?sv(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function tC(n,e,t){n.i=t?sv(e,!0):e}function nC(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function TO(n,e,t){e instanceof av?(n.h=e,function ZR(n,e){e&&!n.j&&(rd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(SO(this,r),xO(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=ov(e,zR)),n.h=new av(e,n.g))}function tr(n,e,t){n.h.set(e,t)}function rC(n){return tr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function sv(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ov(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,HR),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function HR(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}df.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ov(e,AO,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ov(e,AO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(ov(t,"/"==t.charAt(0)?qR:GR,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ov(t,WR)),n.join("")};var AO=/[#\/\?@]/g,GR=/[#\?:]/g,qR=/[#\?]/g,zR=/[#\?@]/g,WR=/#/g;function av(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function rd(n){n.g||(n.g=new kg,n.h=0,n.i&&function BR(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function SO(n,e){rd(n),e=Fg(n,e),cf(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,cf((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&IA(n)))}function MO(n,e){return rd(n),e=Fg(n,e),cf(n.g.h,e)}function xO(n,e,t){SO(n,e),0<t.length&&(n.i=null,n.g.set(Fg(n,e),Vb(t)),n.h+=t.length)}function Fg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function OO(n){this.l=n||YR,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ea&&Nt.g.Ea()&&Nt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=av.prototype).add=function(n,e){rd(this),this.i=null,n=Fg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){rd(this),this.g.forEach(function(t,r){wg(t,function(i){n.call(e,i,r,this)},this)},this)},st.T=function(){rd(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},st.R=function(n){rd(this);var e=[];if("string"==typeof n)MO(this,n)&&(e=Lb(e,this.g.get(Fg(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Lb(e,n[t])}return e},st.set=function(n,e){return rd(this),this.i=null,MO(this,n=Fg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var YR=10;function PO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function NO(n){return n.h?1:n.g?n.g.size:0}function DA(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function TA(n,e){n.g?n.g.add(e):n.h=e}function RO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function kO(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Vb(n.i)}function AA(){}function QR(){this.g=new AA}function JR(n,e,t){const r=t||"";try{CA(n,function(i,u){let c=i;ki(i)&&(c=J_(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function iC(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function uv(n){this.l=n.$b||null,this.j=n.ib||!1}function sC(n,e){Ir.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=SA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}OO.prototype.cancel=function(){if(this.i=kO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},AA.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},AA.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},Qr(uv,we),uv.prototype.g=function(){return new sC(this.l,this.j)},uv.prototype.i=function(n){return function(){return n}}({}),Qr(sC,Ir);var SA=0;function FO(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function lv(n){n.readyState=4,n.l=null,n.j=null,n.A=null,cv(n)}function cv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=sC.prototype).open=function(n,e){if(this.readyState!=SA)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,cv(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,lv(this)),this.readyState=SA},st.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,cv(this)),this.g&&(this.readyState=3,cv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Nt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;FO(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},st.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?lv(this):cv(this),3==this.readyState&&FO(this)}},st.Ua=function(n){this.g&&(this.response=this.responseText=n,lv(this))},st.Ta=function(n){this.g&&(this.response=n,lv(this))},st.ha=function(){this.g&&lv(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(sC.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ek=Nt.JSON.parse;function kr(n){Ir.call(this),this.headers=new kg,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=LO,this.K=this.L=!1}Qr(kr,Ir);var LO="",tk=/^https?$/i,nk=["POST","PUT"];function ik(n){return"content-type"==n.toLowerCase()}function VO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,UO(n),oC(n)}function UO(n){n.D||(n.D=!0,Rr(n,"complete"),Rr(n,"error"))}function BO(n){if(n.h&&void 0!==Rb&&(!n.C[1]||4!=kl(n)||2!=n.ba()))if(n.v&&4==kl(n))Qb(n.Fa,0,n);else if(Rr(n,"readystatechange"),4==kl(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(DO)[1]||null;if(!i&&Nt.self&&Nt.self.location){var u=Nt.self.location.protocol;i=u.substr(0,u.length-1)}r=!tk.test(i?i.toLowerCase():"")}t=r}if(t)Rr(n,"complete"),Rr(n,"success");else{n.m=6;try{var c=2<kl(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",UO(n)}}finally{oC(n)}}}function oC(n,e){if(n.g){jO(n);const t=n.g,r=n.C[0]?td:null;n.g=null,n.C=null,e||Rr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function jO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function kl(n){return n.g?n.g.readyState:0}function $O(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case LO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function MA(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function sk(n){let e="";return Cg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):tr(n,e,t))}function dv(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function HO(n){this.za=0,this.l=[],this.h=new tv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=dv("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=dv("baseRetryDelayMs",5e3,n),this.$a=dv("retryDelaySeedMs",1e4,n),this.Ya=dv("forwardChannelMaxRetries",2,n),this.ra=dv("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new OO(n&&n.concurrentRequestLimit),this.Ca=new QR,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function xA(n){if(GO(n),3==n.G){var e=n.V++,t=Rl(n.F);tr(t,"SID",n.J),tr(t,"RID",e),tr(t,"TYPE","terminate"),hv(n,t),(e=new Jr(n,n.h,e,void 0)).K=2,e.v=rC(Rl(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=XO(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Nl(e)}QO(n)}function aC(n){n.g&&(NA(n),n.g.cancel(),n.g=null)}function GO(n){aC(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),lC(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function OA(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&uC(n)}function uC(n){PO(n.i)||n.m||(n.m=!0,sf(n.Ha,n),n.C=0)}function qO(n,e){var t;t=e?e.m:n.V++;const r=Rl(n.F);tr(r,"SID",n.J),tr(r,"RID",t),tr(r,"AID",n.U),hv(n,r),n.o&&n.s&&MA(r,n.o,n.s),t=new Jr(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=zO(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),TA(n.i,t),uf(t,r,e)}function hv(n,e){n.j&&CA({},function(t,r){tr(e,r,t)})}function zO(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Nr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let _=0;_<t;_++){let b=i[_].h;const A=i[_].g;if(b-=u,0>b)u=Math.max(0,i[_].h-100),f=!1;else try{JR(A,c,"req"+b+"_")}catch(x){r&&r(A)}}if(f){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function WO(n){n.g||n.u||(n.Y=1,sf(n.Ga,n),n.A=0)}function PA(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=k(Nr(n.Ga,n),YO(n,n.A)),n.A++,0))}function NA(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function ZO(n){n.g=new Jr(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Rl(n.oa);tr(e,"RID","rpc"),tr(e,"SID",n.J),tr(e,"CI",n.N?"0":"1"),tr(e,"AID",n.U),hv(n,e),tr(e,"TYPE","xmlhttp"),n.o&&n.s&&MA(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=rC(Rl(e)),t.s=null,t.U=!0,Pg(t,n)}function lC(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function KO(n,e){var t=null;if(n.g==e){lC(n),NA(n),n.g=null;var r=2}else{if(!DA(n.i,e))return;t=e.D,RO(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Rr(r=p(),new M(r,t,e,i)),uC(n)}else WO(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function ok(n,e){return!(NO(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=k(Nr(n.Ha,n,e),YO(n,n.C)),n.C++,0)))}(n,e)||2==r&&PA(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:hf(n,5);break;case 4:hf(n,10);break;case 3:hf(n,6);break;default:hf(n,2)}}function YO(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function hf(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Nr(n.jb,n);t||(t=new df("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||eC(t,"https"),rC(t)),function XR(n,e){const t=new tv;if(Nt.Image){const r=new Image;r.onload=Kh(iC,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Kh(iC,t,r,"TestLoadImage: error",!1,e),r.onabort=Kh(iC,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Kh(iC,t,r,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else T(2);n.G=0,n.j&&n.j.va(e),QO(n),GO(n)}function QO(n){n.G=0,n.I=-1,n.j&&((0!=kO(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Vb(n.l),n.l.length=0),n.j.ua())}function JO(n,e,t){let r=function jR(n){return n instanceof df?Rl(n):new df(n,void 0)}(t);if(""!=r.i)e&&tC(r,e+"."+r.i),nC(r,r.m);else{const i=Nt.location;r=function $R(n,e,t,r){var i=new df(null,void 0);return n&&eC(i,n),e&&tC(i,e),t&&nC(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Cg(n.aa,function(i,u){tr(r,u,i)}),t=n.sa,(e=n.D)&&t&&tr(r,e,t),tr(r,"VER",n.ma),hv(n,r),r}function XO(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new kr(t&&n.Ba&&!n.qa?new uv({ib:!0}):n.qa)).L=n.H,e}function e1(){}function cC(){if(Pl&&!(10<=Number(mO)))throw Error("Environmental error: no available transport.")}function So(n,e){Ir.call(this),this.g=new HO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!bg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Lg(this)}function t1(n){xe.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function n1(){mt.call(this),this.status=1}function Lg(n){this.g=n}(st=kr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jt.g(),this.C=function je(n){return n.h||(n.h=n.i())}(this.u?this.u:Jt),this.g.onreadystatechange=Nr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void VO(this,u)}n=t||"";const i=new kg(this.headers);r&&CA(r,function(u,c){i.set(c,u)}),r=function Ao(n){e:{var e=ik;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Nt.FormData&&n instanceof Nt.FormData,!(0<=Fb(nk,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jO(this),0<this.B&&((this.K=function rk(n){return Pl&&function cA(){return function $_(n){var e=lA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=U_(String(q_)).split("."),t=U_("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=B_(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||B_(0==i[2].length,0==u[2].length)||B_(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.pa,this)):this.A=Qb(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){VO(this,u)}},st.pa=function(){void 0!==Rb&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Rr(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Rr(this,"complete"),Rr(this,"abort"),oC(this))},st.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oC(this,!0)),kr.Z.M.call(this)},st.Fa=function(){this.s||(this.F||this.v||this.l?BO(this):this.cb())},st.cb=function(){BO(this)},st.ba=function(){try{return 2<kl(this)?this.g.status:-1}catch(n){return-1}},st.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},st.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ek(e)}},st.Da=function(){return this.m},st.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=HO.prototype).ma=8,st.G=1,st.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},st.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Jr(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=j_(u),jb(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zO(this,i,e),tr(t=Rl(this.F),"RID",n),tr(t,"CVER",22),this.D&&tr(t,"X-HTTP-Session-Id",this.D),hv(this,t),this.o&&u&&MA(t,this.o,u),TA(this.i,i),this.Ra&&tr(t,"TYPE","init"),this.ja?(tr(t,"$req",e),tr(t,"SID","null"),i.$=!0,uf(i,t,null)):uf(i,t,e),this.G=2}}else 3==this.G&&(n?qO(this,n):0==this.l.length||PO(this.i)||qO(this))},st.Ga=function(){if(this.u=null,ZO(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=k(Nr(this.bb,this),n)}},st.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,T(10),aC(this),ZO(this))},st.ab=function(){null!=this.v&&(this.v=null,aC(this),PA(this),T(19))},st.jb=function(n){n?(this.h.info("Successfully pinged google.com"),T(2)):(this.h.info("Failed to ping google.com"),T(1))},(st=e1.prototype).xa=function(){},st.wa=function(){},st.va=function(){},st.ua=function(){},st.Oa=function(){},cC.prototype.g=function(n,e){return new So(n,e)},Qr(So,Ir),So.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),sf(Nr(n.hb,n,e))),T(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=JO(n,null,n.W),uC(n)},So.prototype.close=function(){xA(this.g)},So.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,OA(this.g,e)}else this.v?((e={}).__data__=J_(n),OA(this.g,e)):OA(this.g,n)},So.prototype.M=function(){this.g.j=null,delete this.j,xA(this.g),delete this.g,So.Z.M.call(this)},Qr(t1,xe),Qr(n1,mt),Qr(Lg,e1),Lg.prototype.xa=function(){Rr(this.g,"a")},Lg.prototype.wa=function(n){Rr(this.g,new t1(n))},Lg.prototype.va=function(n){Rr(this.g,new n1(n))},Lg.prototype.ua=function(){Rr(this.g,"b")},cC.prototype.createWebChannel=cC.prototype.g,So.prototype.send=So.prototype.u,So.prototype.open=So.prototype.m,So.prototype.close=So.prototype.close,j.NO_ERROR=0,j.TIMEOUT=8,j.HTTP_ERROR=6,ee.COMPLETE="complete",ze.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",Ir.prototype.listen=Ir.prototype.N,kr.prototype.listenOnce=kr.prototype.O,kr.prototype.getLastError=kr.prototype.La,kr.prototype.getLastErrorCode=kr.prototype.Da,kr.prototype.getStatus=kr.prototype.ba,kr.prototype.getResponseJson=kr.prototype.Qa,kr.prototype.getResponseText=kr.prototype.ga,kr.prototype.send=kr.prototype.ea;var ak=Ka.createWebChannelTransport=function(){return new cC},uk=Ka.getStatEventTarget=function(){return p()},RA=Ka.ErrorCode=j,lk=Ka.EventType=ee,ck=Ka.Event=l,r1=Ka.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dk=Ka.FetchXmlHttpFactory=uv,dC=Ka.WebChannel=ze,hk=Ka.XhrIo=kr;const i1="@firebase/firestore";class Vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vi.UNAUTHENTICATED=new Vi(null),Vi.GOOGLE_CREDENTIALS=new Vi("google-credentials-uid"),Vi.FIRST_PARTY=new Vi("first-party-uid"),Vi.MOCK_USER=new Vi("mock-user");let Vg="9.8.0";const id=new Do.Yd("@firebase/firestore");function kA(){return id.logLevel}function $e(n,...e){if(id.logLevel<=Do.in.DEBUG){const t=e.map(FA);id.debug(`Firestore (${Vg}): ${n}`,...t)}}function Fr(n,...e){if(id.logLevel<=Do.in.ERROR){const t=e.map(FA);id.error(`Firestore (${Vg}): ${n}`,...t)}}function fv(n,...e){if(id.logLevel<=Do.in.WARN){const t=e.map(FA);id.warn(`Firestore (${Vg}): ${n}`,...t)}}function FA(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${Vg}) INTERNAL ASSERTION FAILED: `+n;throw Fr(e),new Error(e)}function Rt(n,e){n||at()}function Xe(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Wt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class s1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vi.UNAUTHENTICATED))}shutdown(){}}class mk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yk{constructor(e){this.t=e,this.currentUser=Vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new mi,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const b=c;e.enqueueRetryable((0,Te.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new mi)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new s1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new Vi(e)}}class _k{constructor(e,t,r){this.type="FirstParty",this.user=Vi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class vk{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new _k(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class o1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ek{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.p=t.token,new o1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Mo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function wk(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Mo.A=-1;class a1{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=wk(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Yt(n,e){return n<e?-1:n>e?1:0}function Ug(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function u1(n){return n+"\0"}class Dr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dr.fromMillis(Date.now())}static fromDate(e){return Dr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Dr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class St{constructor(e){this.timestamp=e}static fromTimestamp(e){return new St(e)}static min(){return new St(new Dr(0,0))}static max(){return new St(new Dr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function l1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ff(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function c1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class pv{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===pv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pv?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends pv{construct(e,t,r){return new pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const bk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xr extends pv{construct(e,t,r){return new Xr(e,t,r)}static isValidIdentifier(e){return bk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Le(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Le(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Le(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new Le(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xr(t)}static emptyPath(){return new Xr([])}}class Bg{constructor(e){this.fields=e,e.sort(Xr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ug(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ei(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const Ik=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sd(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=Ik.exec(n);if(Rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gr(n.seconds),nanos:gr(n.nanos)}}function gr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function pf(n){return"string"==typeof n?ei.fromBase64String(n):ei.fromUint8Array(n)}function LA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function d1(n){const e=n.mapValue.fields.__previous_value__;return LA(e)?d1(e):e}function gv(n){const e=sd(n.mapValue.fields.__local_write_time__.timestampValue);return new Dr(e.seconds,e.nanos)}class Dk{constructor(e,t,r,i,u,c,f,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=_}}class Fl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fl&&e.projectId===this.projectId&&e.database===this.database}}function mv(n){return null==n}function yv(n){return 0===n&&1/n==-1/0}function h1(n){return"number"==typeof n&&Number.isInteger(n)&&!yv(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(pn.fromString(e))}static fromName(e){return new Ye(pn.fromString(e).popFirst(5))}static empty(){return new Ye(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new pn(e.slice()))}}const od={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},hC={nullValue:"NULL_VALUE"};function gf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?LA(n)?4:m1(n)?9007199254740991:10:at()}function Fu(n,e){if(n===e)return!0;const t=gf(n);if(t!==gf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gv(n).isEqual(gv(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=sd(r.timestampValue),c=sd(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,pf(n.bytesValue).isEqual(pf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return gr(r.geoPointValue.latitude)===gr(i.geoPointValue.latitude)&&gr(r.geoPointValue.longitude)===gr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return gr(r.integerValue)===gr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=gr(r.doubleValue),c=gr(i.doubleValue);return u===c?yv(u)===yv(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Ug(n.arrayValue.values||[],e.arrayValue.values||[],Fu);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(l1(u)!==l1(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!Fu(u[f],c[f])))return!1;return!0}(n,e);default:return at()}var i}function _v(n,e){return void 0!==(n.values||[]).find(t=>Fu(t,e))}function ad(n,e){if(n===e)return 0;const t=gf(n),r=gf(e);if(t!==r)return Yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Yt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=gr(i.integerValue||i.doubleValue),f=gr(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return f1(n.timestampValue,e.timestampValue);case 4:return f1(gv(n),gv(e));case 5:return Yt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=pf(i),f=pf(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let _=0;_<c.length&&_<f.length;_++){const b=Yt(c[_],f[_]);if(0!==b)return b}return Yt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Yt(gr(i.latitude),gr(u.latitude));return 0!==c?c:Yt(gr(i.longitude),gr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let _=0;_<c.length&&_<f.length;++_){const b=ad(c[_],f[_]);if(b)return b}return Yt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===od.mapValue&&u===od.mapValue)return 0;if(i===od.mapValue)return 1;if(u===od.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),_=u.fields||{},b=Object.keys(_);f.sort(),b.sort();for(let A=0;A<f.length&&A<b.length;++A){const x=Yt(f[A],b[A]);if(0!==x)return x;const V=ad(c[f[A]],_[b[A]]);if(0!==V)return V}return Yt(f.length,b.length)}(n.mapValue,e.mapValue);default:throw at()}}function f1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Yt(n,e);const t=sd(n),r=sd(e),i=Yt(t.seconds,r.seconds);return 0!==i?i:Yt(t.nanos,r.nanos)}function jg(n){return VA(n)}function VA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=sd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?pf(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=VA(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${VA(r.fields[f])}`;return u+"}"}(n.mapValue):at();var e}function mf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function UA(n){return!!n&&"integerValue"in n}function vv(n){return!!n&&"arrayValue"in n}function p1(n){return!!n&&"nullValue"in n}function g1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function fC(n){return!!n&&"mapValue"in n}function Ev(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ff(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ev(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ev(n.arrayValue.values[t]);return e}return Object.assign({},n)}function m1(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Tk(n){return"nullValue"in n?hC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?mf(Fl.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:at()}function Ak(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?mf(Fl.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?od:at()}function y1(n,e){const t=ad(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function _1(n,e){const t=ad(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class rs{constructor(e){this.value=e}static empty(){return new rs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!fC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ev(t)}setAll(e){let t=Xr.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Ev(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());fC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];fC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ff(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new rs(Ev(this.value))}}function v1(n){const e=[];return ff(n.fields,(t,r)=>{const i=new Xr([t]);if(fC(r)){const u=v1(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Bg(e)}class Qn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Qn(e,0,St.min(),St.min(),rs.empty(),0)}static newFoundDocument(e,t,r){return new Qn(e,1,t,St.min(),r,0)}static newNoDocument(e,t){return new Qn(e,2,t,St.min(),rs.empty(),0)}static newUnknownDocument(e,t){return new Qn(e,3,t,St.min(),rs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pC{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function BA(n){return n.fields.find(e=>2===e.kind)}function yf(n){return n.fields.filter(e=>2!==e.kind)}pC.UNKNOWN_ID=-1;class gC{constructor(e,t){this.fieldPath=e,this.kind=t}}class wv{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wv(0,Qa.min())}}function E1(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=St.fromTimestamp(1e9===r?new Dr(t+1,0):new Dr(t,r));return new Qa(i,Ye.empty(),e)}function Sk(n){return new Qa(n.readTime,n.key,-1)}class Qa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Qa(St.min(),Ye.empty(),-1)}static max(){return new Qa(St.max(),Ye.empty(),-1)}}function w1(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:Yt(n.largestBatchId,e.largestBatchId))}class Tr{constructor(e,t){this.comparator=e,this.root=t||Ui.EMPTY}insert(e,t){return new Tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ui.BLACK,null,null))}remove(e){return new Tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mC(this.root,e,this.comparator,!1)}getReverseIterator(){return new mC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mC(this.root,e,this.comparator,!0)}}class mC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ui{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:Ui.RED,this.left=null!=i?i:Ui.EMPTY,this.right=null!=u?u:Ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Ui(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ui.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}Ui.EMPTY=null,Ui.RED=!0,Ui.BLACK=!1,Ui.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ui(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(e){this.comparator=e,this.data=new Tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b1(this.data.getIterator())}getIteratorFrom(e){return new b1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new $n(this.comparator);return t.data=e,t}}class b1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $g(n){return n.hasNext()?n.getNext():void 0}class Mk{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.P=null}}function C1(n,e=null,t=[],r=[],i=null,u=null,c=null){return new Mk(n,e,t,r,i,u,c)}function _f(n){const e=Xe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+jg(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),mv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jg(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jg(r)).join(",")),e.P=t}return e.P}function bv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Vk(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Fu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!S1(n.startAt,e.startAt)&&S1(n.endAt,e.endAt)}function yC(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function _C(n,e){return n.filters.filter(t=>t instanceof Bi&&t.field.isEqual(e))}function I1(n,e,t){let r=hC,i=!0;for(const u of _C(n,e)){let c=hC,f=!0;switch(u.op){case"<":case"<=":c=Tk(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=hC}y1({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];y1({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function D1(n,e,t){let r=od,i=!0;for(const u of _C(n,e)){let c=od,f=!0;switch(u.op){case">=":case">":c=Ak(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=od}_1({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];_1({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Bi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Ok(e,t,r):"array-contains"===t?new Rk(e,r):"in"===t?new kk(e,r):"not-in"===t?new Fk(e,r):"array-contains-any"===t?new Lk(e,r):new Bi(e,t,r)}static V(e,t,r){return"in"===t?new Pk(e,r):new Nk(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ad(t,this.value)):null!==t&&gf(this.value)===gf(t)&&this.v(ad(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Ok extends Bi{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.v(t)}}class Pk extends Bi{constructor(e,t){super(e,"in",t),this.keys=T1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Nk extends Bi{constructor(e,t){super(e,"not-in",t),this.keys=T1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function T1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class Rk extends Bi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vv(t)&&_v(t.arrayValue,this.value)}}class kk extends Bi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_v(this.value.arrayValue,t)}}class Fk extends Bi{constructor(e,t){super(e,"not-in",t)}matches(e){if(_v(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_v(this.value.arrayValue,t)}}class Lk extends Bi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_v(this.value.arrayValue,r))}}class ud{constructor(e,t){this.position=e,this.inclusive=t}}class Hg{constructor(e,t="asc"){this.field=e,this.dir=t}}function Vk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function A1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Ye.comparator(Ye.fromName(c.referenceValue),t.key):ad(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function S1(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fu(n.position[t],e.position[t]))return!1;return!0}class Ll{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=_,this.D=null,this.C=null}}function M1(n,e,t,r,i,u,c,f){return new Ll(n,e,t,r,i,u,c,f)}function Gg(n){return new Ll(n)}function jA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function $A(n){for(const e of n.filters)if(e.S())return e.field;return null}function HA(n){return null!==n.collectionGroup}function qg(n){const e=Xe(n);if(null===e.D){e.D=[];const t=$A(e),r=jA(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Hg(t)),e.D.push(new Hg(Xr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Hg(Xr.keyField(),u))}}}return e.D}function ca(n){const e=Xe(n);if(!e.C)if("F"===e.limitType)e.C=C1(e.path,e.collectionGroup,qg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of qg(e))t.push(new Hg(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ud(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ud(e.startAt.position,e.startAt.inclusive):null;e.C=C1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function x1(n,e,t){return new Ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cv(n,e){return bv(ca(n),ca(e))&&n.limitType===e.limitType}function O1(n){return`${_f(ca(n))}|lt:${n.limitType}`}function GA(n){return`Query(target=${function xk(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${jg(r.value)}`;var r}).join(", ")}]`),mv(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>jg(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>jg(t)).join(",")),`Target(${e})`}(ca(n))}; limitType=${n.limitType})`}function qA(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ye.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=A1(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,qg(t),r)||t.endAt&&!function(i,u,c){const f=A1(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,qg(t),r)));var t,r}function P1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function N1(n){return(e,t)=>{let r=!1;for(const i of qg(n)){const u=Bk(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function Bk(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),_=c.data.field(i);return null!==f&&null!==_?ad(f,_):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}function R1(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yv(e)?"-0":e}}function k1(n){return{integerValue:""+n}}function F1(n,e){return h1(e)?k1(e):R1(n,e)}class vC{constructor(){this._=void 0}}function jk(n,e,t){return n instanceof zg?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof vf?V1(n,e):n instanceof Ef?U1(n,e):function(r,i){const u=L1(r,i),c=B1(u)+B1(r.k);return UA(u)&&UA(r.k)?k1(c):R1(r.M,c)}(n,e)}function $k(n,e,t){return n instanceof vf?V1(n,e):n instanceof Ef?U1(n,e):t}function L1(n,e){return n instanceof Wg?UA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class zg extends vC{}class vf extends vC{constructor(e){super(),this.elements=e}}function V1(n,e){const t=j1(e);for(const r of n.elements)t.some(i=>Fu(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ef extends vC{constructor(e){super(),this.elements=e}}function U1(n,e){let t=j1(e);for(const r of n.elements)t=t.filter(i=>!Fu(i,r));return{arrayValue:{values:t}}}class Wg extends vC{constructor(e,t){super(),this.M=e,this.k=t}}function B1(n){return gr(n.integerValue||n.doubleValue)}function j1(n){return vv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Iv{constructor(e,t){this.field=e,this.transform=t}}class Gk{constructor(e,t){this.version=e,this.transformResults=t}}class Lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Lr}static exists(e){return new Lr(void 0,e)}static updateTime(e){return new Lr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function EC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wC{}function qk(n,e,t){n instanceof Dv?function(r,i,u){const c=r.value.clone(),f=q1(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof wf?function(r,i,u){if(!EC(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=q1(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(G1(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zA(n,e,t){var i;n instanceof Dv?function(r,i,u){if(!EC(r.precondition,i))return;const c=r.value.clone(),f=z1(r.fieldTransforms,u,i);c.setAll(f),i.convertToFoundDocument(H1(i),c).setHasLocalMutations()}(n,e,t):n instanceof wf?function(r,i,u){if(!EC(r.precondition,i))return;const c=z1(r.fieldTransforms,u,i),f=i.data;f.setAll(G1(r)),f.setAll(c),i.convertToFoundDocument(H1(i),f).setHasLocalMutations()}(n,e,t):EC(n.precondition,i=e)&&i.convertToNoDocument(St.min())}function zk(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=L1(r.transform,i||null);null!=u&&(null==t&&(t=rs.empty()),t.set(r.field,u))}return t||null}function $1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ug(t,r,(i,u)=>function Hk(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof vf&&r instanceof vf||t instanceof Ef&&r instanceof Ef?Ug(t.elements,r.elements,Fu):t instanceof Wg&&r instanceof Wg?Fu(t.k,r.k):t instanceof zg&&r instanceof zg);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function H1(n){return n.isFoundDocument()?n.version:St.min()}class Dv extends wC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class wf extends wC{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function G1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function q1(n,e,t){const r=new Map;Rt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,$k(c,f,t[i]))}return r}function z1(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,jk(u,c,e))}return r}class Tv extends wC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class WA extends wC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Wk{constructor(e){this.count=e}}var Vr,gn;function W1(n){switch(n){default:return at();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function Z1(n){if(void 0===n)return Fr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Vr.OK:return pe.OK;case Vr.CANCELLED:return pe.CANCELLED;case Vr.UNKNOWN:return pe.UNKNOWN;case Vr.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Vr.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Vr.INTERNAL:return pe.INTERNAL;case Vr.UNAVAILABLE:return pe.UNAVAILABLE;case Vr.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Vr.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Vr.NOT_FOUND:return pe.NOT_FOUND;case Vr.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Vr.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Vr.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Vr.ABORTED:return pe.ABORTED;case Vr.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Vr.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Vr.DATA_LOSS:return pe.DATA_LOSS;default:return at()}}(gn=Vr||(Vr={}))[gn.OK=0]="OK",gn[gn.CANCELLED=1]="CANCELLED",gn[gn.UNKNOWN=2]="UNKNOWN",gn[gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gn[gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gn[gn.NOT_FOUND=5]="NOT_FOUND",gn[gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",gn[gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",gn[gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",gn[gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gn[gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gn[gn.ABORTED=10]="ABORTED",gn[gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",gn[gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",gn[gn.INTERNAL=13]="INTERNAL",gn[gn.UNAVAILABLE=14]="UNAVAILABLE",gn[gn.DATA_LOSS=15]="DATA_LOSS";class ld{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ff(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return c1(this.inner)}size(){return this.innerSize}}const Zk=new Tr(Ye.comparator);function da(){return Zk}const Kk=new Tr(Ye.comparator);function ZA(...n){let e=Kk;for(const t of n)e=e.insert(t.key,t);return e}function Av(){return new ld(n=>n.toString(),(n,e)=>n.isEqual(e))}const Yk=new Tr(Ye.comparator),Qk=new $n(Ye.comparator);function An(...n){let e=Qk;for(const t of n)e=e.add(t);return e}const Jk=new $n(Yt);function bC(){return Jk}class Sv{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Mv.createSynthesizedTargetChangeForCurrentChange(e,t)),new Sv(St.min(),r,bC(),da(),An())}}class Mv{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Mv(ei.EMPTY_BYTE_STRING,t,An(),An(),An())}}class CC{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class K1{constructor(e,t){this.targetId=e,this.$=t}}class Y1{constructor(e,t,r=ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Q1{constructor(){this.B=0,this.L=X1(),this.U=ei.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=An(),t=An(),r=An();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new Mv(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=X1()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Xk{constructor(e){this.nt=e,this.st=new Map,this.it=da(),this.rt=J1(),this.ot=new $n(Yt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(yC(u))if(0===r){const c=new Ye(u.path);this.ct(t,c,Qn.newNoDocument(c,St.min()))}else Rt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const f=this.wt(c);if(f){if(u.current&&yC(f.target)){const _=new Ye(f.target.path);null!==this.it.get(_)||this.It(c,_)||this.ct(c,_,Qn.newNoDocument(_,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=An();this.rt.forEach((u,c)=>{let f=!0;c.forEachWhile(_=>{const b=this.wt(_);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new Sv(e,t,this.ot,this.it,r);return this.it=da(),this.rt=J1(),this.ot=new $n(Yt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Q1,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new $n(Yt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||$e("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Q1),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function J1(){return new Tr(Ye.comparator)}function X1(){return new Tr(Ye.comparator)}const eF={asc:"ASCENDING",desc:"DESCENDING"},tF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class nF{constructor(e,t){this.databaseId=e,this.N=t}}function xv(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eP(n,e){return n.N?e.toBase64():e.toUint8Array()}function rF(n,e){return xv(n,e.toTimestamp())}function yi(n){return Rt(!!n),St.fromTimestamp(function(e){const t=sd(e);return new Dr(t.seconds,t.nanos)}(n))}function KA(n,e){return(t=n,new pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function tP(n){const e=pn.fromString(n);return Rt(cP(e)),e}function Ov(n,e){return KA(n.databaseId,e.path)}function Lu(n,e){const t=tP(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(rP(t))}function YA(n,e){return KA(n.databaseId,e)}function nP(n){const e=tP(n);return 4===e.length?pn.emptyPath():rP(e)}function Pv(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rP(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function iP(n,e,t){return{name:Ov(n,e),fields:t.value.mapValue.fields}}function sP(n,e,t){const r=Lu(n,e.name),i=yi(e.updateTime),u=new rs({mapValue:{fields:e.fields}}),c=Qn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Nv(n,e){let t;if(e instanceof Dv)t={update:iP(n,e.key,e.value)};else if(e instanceof Tv)t={delete:Ov(n,e.key)};else if(e instanceof wf)t={update:iP(n,e.key,e.data),updateMask:hF(e.fieldMask)};else{if(!(e instanceof WA))return at();t={verify:Ov(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof zg)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vf)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ef)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Wg)return{fieldPath:u.field.canonicalString(),increment:c.k};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:rF(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function QA(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Lr.updateTime(yi(i.updateTime)):void 0!==i.exists?Lr.exists(i.exists):Lr.none():Lr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(Rt("REQUEST_TIME"===c.setToServerValue),f=new zg):"appendMissingElements"in c?f=new vf(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Ef(c.removeAllFromArray.values||[]):"increment"in c?f=new Wg(u,c.increment):at();const _=Xr.fromServerFormat(c.fieldPath);return new Iv(_,f)}(n,i)):[];var i;if(e.update){const i=Lu(n,e.update.name),u=new rs({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Bg((e.updateMask.fieldPaths||[]).map(b=>Xr.fromServerFormat(b)));return new wf(i,u,c,t,r)}return new Dv(i,u,t,r)}if(e.delete){const i=Lu(n,e.delete);return new Tv(i,t)}if(e.verify){const i=Lu(n,e.verify);return new WA(i,t)}return at()}function oP(n,e){return{documents:[YA(n,e.path)]}}function aP(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=YA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=YA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const b=_.map(A=>function(x){if("=="===x.op){if(g1(x.value))return{unaryFilter:{field:Zg(x.field),op:"IS_NAN"}};if(p1(x.value))return{unaryFilter:{field:Zg(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(g1(x.value))return{unaryFilter:{field:Zg(x.field),op:"IS_NOT_NAN"}};if(p1(x.value))return{unaryFilter:{field:Zg(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zg(x.field),op:lF(x.op),value:x.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:Zg((A=b).field),direction:uF(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||mv(b)?b:{value:b});var b,f,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function uP(n){let e=nP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Rt(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=lP(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new Hg(Kg((x=A).field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let f=null;t.limit&&(f=function(A){let x;return x="object"==typeof A?A.value:A,mv(x)?null:x}(t.limit));let _=null;var A;t.startAt&&(_=new ud((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new ud(A.values||[],!A.before)}(t.endAt)),M1(e,i,c,u,f,"F",_,b)}function lP(n){return n?void 0!==n.unaryFilter?[dF(n)]:void 0!==n.fieldFilter?[cF(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>lP(e)).reduce((e,t)=>e.concat(t)):at():[]}function uF(n){return eF[n]}function lF(n){return tF[n]}function Zg(n){return{fieldPath:n.canonicalString()}}function Kg(n){return Xr.fromServerFormat(n.fieldPath)}function cF(n){return Bi.create(Kg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(n.fieldFilter.op),n.fieldFilter.value)}function dF(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Kg(n.unaryFilter.field);return Bi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Kg(n.unaryFilter.field);return Bi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Kg(n.unaryFilter.field);return Bi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Kg(n.unaryFilter.field);return Bi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return at()}}function hF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ds(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dP(e)),e=fF(n.get(t),e);return dP(e)}function fF(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function dP(n){return n+"\x01\x01"}function Vu(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&at(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:at()}u=c+2}return new pn(r)}const hP=["userId","batchId"];function IC(n,e){return[n,Ds(e)]}function fP(n,e,t){return[n,Ds(e),t]}const pF={},gF=["prefixPath","collectionGroup","readTime","documentId"],mF=["prefixPath","collectionGroup","documentId"],yF=["collectionGroup","readTime","prefixPath","documentId"],_F=["canonicalId","targetId"],vF=["targetId","path"],EF=["path","targetId"],wF=["collectionId","parent"],bF=["indexId","uid"],CF=["uid","sequenceNumber"],IF=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DF=["indexId","uid","orderedDocumentKey"],TF=["userId","collectionPath","documentId"],AF=["userId","collectionPath","largestBatchId"],SF=["userId","collectionGroup","largestBatchId"],pP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],MF=[...pP,"documentOverlays"],gP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xF=[...gP,"indexConfiguration","indexState","indexEntries"],mP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class DC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new mi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Rv(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=JA(r.target.error);this.At.reject(new Rv(e,i))}}static open(e,t,r,i){try{return new DC(t,e.transaction(i,r))}catch(u){throw new Rv(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||($e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new PF(t)}}class Ja{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Ja.Vt((0,Wt.z$)())&&Fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return $e("SimpleDb","Removing database:",e),Cf(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Wt.hl)())return!1;if(Ja.St())return!0;const e=(0,Wt.z$)(),t=Ja.Vt(e),r=0<t&&t<10,i=Ja.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,Te.Z)(function*(){return t.db||($e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Rv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Le(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Le(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new Rv(e,f))},u.onupgradeneeded=c=>{$e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{$e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,Te.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.Nt(e);const _=DC.open(u.db,e,c?"readonly":"readwrite",r),b=i(_).next(A=>(_.bt(),A)).catch(A=>(_.abort(A),me.reject(A))).toPromise();return b.catch(()=>{}),yield _.Rt,b}catch(_){const b="FirebaseError"!==_.name&&f<3;if($e("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),u.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class OF{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Cf(this.Ft.delete())}}class Rv extends Le{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bf(n){return"IndexedDbTransactionError"===n.name}class PF{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?($e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cf(r)}add(e){return $e("SimpleDb","ADD",this.store.name,e,e),Cf(this.store.add(e))}get(e){return Cf(this.store.get(e)).next(t=>(void 0===t&&(t=null),$e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return $e("SimpleDb","DELETE",this.store.name,e),Cf(this.store.delete(e))}count(){return $e("SimpleDb","COUNT",this.store.name),Cf(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new me((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){$e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=u=>{const c=JA(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new me((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const _=new OF(f),b=t(f.primaryKey,f.value,_);if(b instanceof me){const A=b.catch(x=>(_.done(),me.reject(x)));r.push(A)}_.isDone?i():null===_.Lt?f.continue():f.continue(_.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cf(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=JA(r.target.error);t(i)}})}let _P=!1;function JA(n){const e=Ja.Vt((0,Wt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _P||(_P=!0,setTimeout(()=>{throw r},0)),r}}return n}class vP extends yP{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function _i(n,e){const t=Xe(n);return Ja.xt(t.Ht,e)}class XA{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&qk(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&zA(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&zA(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(St.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),An())}isEqual(e){return this.batchId===e.batchId&&Ug(this.mutations,e.mutations,(t,r)=>$1(t,r))&&Ug(this.baseMutations,e.baseMutations,(t,r)=>$1(t,r))}}class eS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Rt(e.mutations.length===r.length);let i=Yk;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new eS(e,t,r,i)}}class tS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cd{constructor(e,t,r,i,u=St.min(),c=St.min(),f=ei.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new cd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new cd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new cd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class EP{constructor(e){this.Jt=e}}function wP(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:TC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ov(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:xv(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:If(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:If(e.version)}}var i,u;return r}function TC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function If(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Df(n){const e=new Dr(n.seconds,n.nanoseconds);return St.fromTimestamp(e)}function Yg(n,e){const t=(e.baseMutations||[]).map(u=>QA(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>QA(n.Jt,u)),i=Dr.fromMillis(e.localWriteTimeMs);return new XA(e.batchId,i,t,r)}function kv(n){const e=Df(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Df(n.lastLimboFreeSnapshotVersion):St.min();let r;var i;return void 0!==n.query.documents?(Rt(1===(i=n.query).documents.length),r=ca(Gg(nP(i.documents[0])))):r=ca(uP(n.query)),new cd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ei.fromBase64String(n.resumeToken))}function bP(n,e){const t=If(e.snapshotVersion),r=If(e.lastLimboFreeSnapshotVersion);let i;i=yC(e.target)?oP(n.Jt,e.target):aP(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_f(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function nS(n){const e=uP({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?x1(e,e.limit,"L"):e}function rS(n,e){return new tS(e.largestBatchId,QA(n.Jt,e.overlayMutation))}function CP(n,e){const t=e.path.lastSegment();return[n,Ds(e.path.popLast()),t]}class RF{getBundleMetadata(e,t){return IP(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Df(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return IP(e).put({bundleId:(r=t).id,createTime:If(yi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return DP(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:nS(i.bundledQuery),readTime:Df(i.readTime)};var i})}saveNamedQuery(e,t){return DP(e).put({name:(r=t).name,readTime:If(yi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function IP(n){return _i(n,"bundles")}function DP(n){return _i(n,"namedQueries")}class iS{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new iS(e,t.uid||"")}getOverlay(e,t){return Fv(e).get(CP(this.userId,t)).next(r=>r?rS(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new tS(t,c);i.push(this.Xt(e,f))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ds(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Fv(e).Qt("collectionPathOverlayIndex",f))}),me.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Av(),u=Ds(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Fv(e).qt("collectionPathOverlayIndex",c).next(f=>{for(const _ of f){const b=rS(this.M,_);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Av();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Fv(e).Wt({index:"collectionGroupOverlayIndex",range:f},(_,b,A)=>{const x=rS(this.M,b);u.size()<i||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return Fv(e).put(function(r,i,u){const[c,f,_]=CP(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Nv(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Fv(n){return _i(n,"documentOverlays")}class Tf{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(gr(e.integerValue));else if("doubleValue"in e){const r=gr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),yv(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(pf(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?m1(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):at()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ye.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function kF(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function TP(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=kF(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Tf.fe=new Tf;class FF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=TP(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=TP(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class LF{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class VF{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Lv{constructor(){this.De=new FF,this.Ce=new LF(this.De),this.xe=new VF(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Af{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Af(this.indexId,this.documentKey,this.arrayValue,r)}}function Sf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=AP(n.arrayValue,e.arrayValue),0!==t?t:(t=AP(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function AP(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class UF{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=BA(e);if(void 0!==t&&!this.Be(t))return!1;const r=yf(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class BF{constructor(){this.qe=new sS}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Qa.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class sS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new $n(pn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(pn.comparator)).toArray()}}const AC=new Uint8Array(0);class jF{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new sS,this.Ge=new ld(r=>_f(r),(r,i)=>bv(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Ds(i)};return SP(e).put(u)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[u1(t),""],!1,!0);return SP(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Vu(c.parent))}return r})}addFieldIndex(e,t){const r=SC(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=SC(e),i=MC(e),u=Vv(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Vv(e);let i=!0;const u=new Map;return me.forEach(this.Qe(t),c=>this.je(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=An();const f=[];return me.forEach(u,(_,b)=>{var A;$e("IndexedDbIndexManager",`Using index ${A=_,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Ct=>`${Ct.fieldPath}:${Ct.kind}`).join(",")}`} to execute ${_f(t)}`);const x=function(Ct,ht){const Vt=BA(ht);if(void 0===Vt)return null;for(const Qt of _C(Ct,Vt.fieldPath))switch(Qt.op){case"array-contains-any":return Qt.value.arrayValue.values||[];case"array-contains":return[Qt.value]}return null}(b,_),V=function(Ct,ht){const Vt=new Map;for(const Qt of yf(ht))for(const bn of _C(Ct,Qt.fieldPath))switch(bn.op){case"==":case"in":Vt.set(Qt.fieldPath.canonicalString(),bn.value);break;case"not-in":case"!=":return Vt.set(Qt.fieldPath.canonicalString(),bn.value),Array.from(Vt.values())}return null}(b,_),W=function(Ct,ht){const Vt=[];let Qt=!0;for(const bn of yf(ht)){const Ss=0===bn.kind?I1(Ct,bn.fieldPath,Ct.startAt):D1(Ct,bn.fieldPath,Ct.startAt);Vt.push(Ss.value),Qt&&(Qt=Ss.inclusive)}return new ud(Vt,Qt)}(b,_),Y=function(Ct,ht){const Vt=[];let Qt=!0;for(const bn of yf(ht)){const Ss=0===bn.kind?D1(Ct,bn.fieldPath,Ct.endAt):I1(Ct,bn.fieldPath,Ct.endAt);Vt.push(Ss.value),Qt&&(Qt=Ss.inclusive)}return new ud(Vt,Qt)}(b,_),_e=this.We(_,b,W),Ue=this.We(_,b,Y),yt=this.ze(_,b,V),_t=this.He(_.indexId,x,_e,W.inclusive,Ue,Y.inclusive,yt);return me.forEach(_t,Ct=>r.Gt(Ct,t.limit).next(ht=>{ht.forEach(Vt=>{const Qt=Ye.fromSegments(Vt.documentKey);c.has(Qt)||(c=c.add(Qt),f.push(Qt))})}))}).next(()=>f)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,u,c,f){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),A=[];for(let x=0;x<_;++x){const V=t?this.Je(t[x/b]):AC,W=this.Ye(e,V,r[x%b],i),Y=this.Xe(e,V,u[x%b],c),_e=f.map(Ue=>this.Ye(e,V,Ue,!0));A.push(...this.createRange(W,Y,_e))}return A}Ye(e,t,r,i){const u=new Af(e,Ye.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new Af(e,Ye.empty(),t,r);return i?u.ke():u}je(e,t){const r=new UF(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const f of u)r.$e(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;return me.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let f=new $n(Xr.comparator),_=!1;for(const b of c.filters){const A=b;A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?_=!0:f=f.add(A.field))}for(const b of c.orderBy)b.field.isKeyField()||(f=f.add(b.field));return f.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new Lv;for(const i of yf(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);Tf.fe.Zt(u,c)}return r.Se()}Je(e){const t=new Lv;return Tf.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Lv;return Tf.fe.Zt(mf(this.databaseId,t),r.Ne(function(i){const u=yf(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new Lv);let u=0;for(const c of yf(e)){const f=r[u++];for(const _ of i)if(this.en(t,c.fieldPath)&&vv(f))i=this.nn(i,c,f);else{const b=_.Ne(c.kind);Tf.fe.Zt(f,b)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const _=new Lv;_.seed(f.Se()),Tf.fe.Zt(c,_.Ne(t.kind)),u.push(_)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Bi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=SC(e),i=MC(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return me.forEach(u,f=>i.get([f.indexId,this.uid]).next(_=>{c.push(function(b,A){const x=A?new wv(A.sequenceNumber,new Qa(Df(A.readTime),new Ye(Vu(A.documentKey)),A.largestBatchId)):wv.empty(),V=b.fields.map(([W,Y])=>new gC(Xr.fromServerFormat(W),Y));return new pC(b.indexId,b.collectionGroup,V,x)}(f,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Yt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=SC(e),u=MC(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>me.forEach(f,_=>{return u.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:If((V=r).readTime),documentKey:Ds(V.documentKey.path),largestBatchId:V.largestBatchId});var V})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?me.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),me.forEach(f,_=>this.on(e,i,_).next(b=>{const A=this.un(u,_);return b.isEqual(A)?me.resolve():this.an(e,u,_,b,A)}))))})}cn(e,t,r,i){return Vv(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Vv(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Vv(e);let u=new $n(Sf);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,f)=>{u=u.add(new Af(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}un(e,t){let r=new $n(Sf);const i=this.Ze(t,e);if(null==i)return r;const u=BA(t);if(null!=u){const c=e.data.field(u.fieldPath);if(vv(c))for(const f of c.arrayValue.values||[])r=r.add(new Af(t.indexId,e.key,this.Je(f),i))}else r=r.add(new Af(t.indexId,e.key,AC,i));return r}an(e,t,r,i,u){$e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,_,b,A,x){const V=f.getIterator(),W=_.getIterator();let Y=$g(V),_e=$g(W);for(;Y||_e;){let Ue=!1,yt=!1;if(Y&&_e){const _t=b(Y,_e);_t<0?yt=!0:_t>0&&(Ue=!0)}else null!=Y?yt=!0:Ue=!0;Ue?(A(_e),_e=$g(W)):yt?(x(Y),Y=$g(V)):(Y=$g(V),_e=$g(W))}}(i,u,Sf,f=>{c.push(this.cn(e,t,r,f))},f=>{c.push(this.hn(e,t,r,f))}),me.waitFor(c)}rn(e){let t=1;return MC(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Sf(c,f)).filter((c,f,_)=>!f||0!==Sf(c,_[f-1]));const i=[];i.push(e);for(const c of r){const f=Sf(c,e),_=Sf(c,t);if(0===f)i[0]=e.ke();else if(f>0&&_<0)i.push(c),i.push(c.ke());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,AC,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,AC,[]]));return u}getMinOffset(e,t){let r;return me.forEach(this.Qe(t),i=>this.je(e,i).next(u=>{u?(!r||w1(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Qa.min()})).next(()=>r)}}function SP(n){return _i(n,"collectionParents")}function Vv(n){return _i(n,"indexEntries")}function SC(n){return _i(n,"indexConfiguration")}function MC(n){return _i(n,"indexState")}const MP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Qs(e,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xP(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const _=r.Wt({range:c},(A,x,V)=>(f++,V.delete()));u.push(_.next(()=>{Rt(1===f)}));const b=[];for(const A of t.mutations){const x=fP(e,A.key.path,t.batchId);u.push(i.delete(x)),b.push(A.key)}return me.waitFor(u).next(()=>b)}function xC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}Qs.DEFAULT_COLLECTION_PERCENTILE=10,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qs.DEFAULT=new Qs(41943040,Qs.DEFAULT_COLLECTION_PERCENTILE,Qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qs.DISABLED=new Qs(-1,0,0);class oS{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Rt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new oS(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dd(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Qg(e),c=dd(e);return c.add({}).next(f=>{Rt("number"==typeof f);const _=new XA(f,t,r,i),b=function(V,W,Y){const _e=Y.baseMutations.map(yt=>Nv(V.Jt,yt)),Ue=Y.mutations.map(yt=>Nv(V.Jt,yt));return{userId:W,batchId:Y.batchId,localWriteTimeMs:Y.localWriteTime.toMillis(),baseMutations:_e,mutations:Ue}}(this.M,this.userId,_),A=[];let x=new $n((V,W)=>Yt(V.canonicalString(),W.canonicalString()));for(const V of i){const W=fP(this.userId,V.key.path,f);x=x.add(V.key.path.popLast()),A.push(c.put(b)),A.push(u.put(W,pF))}return x.forEach(V=>{A.push(this.indexManager.addToCollectionParentIndex(e,V))}),e.addOnCommittedListener(()=>{this.ln[f]=_.keys()}),me.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return dd(e).get(t).next(r=>r?(Rt(r.userId===this.userId),Yg(this.M,r)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return dd(e).Wt({index:"userMutationsIndex",range:i},(c,f,_)=>{f.userId===this.userId&&(Rt(f.batchId>=r),u=Yg(this.M,f)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return dd(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dd(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Yg(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=IC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Qg(e).Wt({range:i},(c,f,_)=>{const[b,A,x]=c,V=Vu(A);if(b===this.userId&&t.path.isEqual(V))return dd(e).get(x).next(W=>{if(!W)throw at();Rt(W.userId===this.userId),u.push(Yg(this.M,W))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(Yt);const i=[];return t.forEach(u=>{const c=IC(this.userId,u.path),f=IDBKeyRange.lowerBound(c),_=Qg(e).Wt({range:f},(b,A,x)=>{const[V,W,Y]=b,_e=Vu(W);V===this.userId&&u.path.isEqual(_e)?r=r.add(Y):x.done()});i.push(_)}),me.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=IC(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new $n(Yt);return Qg(e).Wt({range:c},(_,b,A)=>{const[x,V,W]=_,Y=Vu(V);x===this.userId&&r.isPrefixOf(Y)?Y.length===i&&(f=f.add(W)):A.done()}).next(()=>this.dn(e,f))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(dd(e).get(u).next(c=>{if(null===c)throw at();Rt(c.userId===this.userId),r.push(Yg(this.M,c))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return xP(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Qg(e).Wt({range:r},(u,c,f)=>{if(u[0]===this.userId){const _=Vu(u[1]);i.push(_)}else f.done()}).next(()=>{Rt(0===i.length)})})}containsKey(e,t){return OP(e,this.userId,t)}wn(e){return PP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function OP(n,e,t){const r=IC(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Qg(n).Wt({range:u,jt:!0},(f,_,b)=>{const[A,x,V]=f;A===e&&x===i&&(c=!0),b.done()}).next(()=>c)}function dd(n){return _i(n,"mutations")}function Qg(n){return _i(n,"documentMutations")}function PP(n){return _i(n,"mutationQueues")}class Mf{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Mf(0)}static yn(){return new Mf(-1)}}class $F{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Mf(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>St.fromTimestamp(new Dr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Jg(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Jg(e).Wt((c,f)=>{const _=kv(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>me.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Jg(e).Wt((r,i)=>{const u=kv(i);t(u)})}pn(e){return NP(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}In(e,t){return NP(e).put("targetGlobalKey",t)}Tn(e,t){return Jg(e).put(bP(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_f(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Jg(e).Wt({range:i,index:"queryTargetsIndex"},(c,f,_)=>{const b=kv(f);bv(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=hd(e);return t.forEach(c=>{const f=Ds(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=hd(e);return me.forEach(t,u=>{const c=Ds(u.path);return me.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=hd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=hd(e);let u=An();return i.Wt({range:r,jt:!0},(c,f,_)=>{const b=Vu(c[1]),A=new Ye(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Ds(t.path),i=IDBKeyRange.bound([r],[u1(r)],!1,!0);let u=0;return hd(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,f],_,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return Jg(e).get(t).next(r=>r?kv(r):null)}}function Jg(n){return _i(n,"targets")}function NP(n){return _i(n,"targetGlobal")}function hd(n){return _i(n,"targetDocuments")}function xf(n){return aS.apply(this,arguments)}function aS(){return aS=(0,Te.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==mP)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),aS.apply(this,arguments)}function RP([n,e],[t,r]){const i=Yt(n,t);return 0===i?Yt(e,r):i}class HF{constructor(e){this.An=e,this.buffer=new $n(RP),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();RP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GF{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;$e("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Te.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){bf(i)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield xf(i)}yield t.Sn(e)}))}}class qF{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(Mo.A);const r=new HF(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(MP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),MP):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,f,_,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,c=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,f=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(b=Date.now(),kA()<=Do.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(_-f)+`ms\n\tRemoved ${x} documents in `+(b-_)+`ms\nTotal Duration: ${b-A}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:x})))}}class zF{constructor(e,t){this.db=e,this.garbageCollector=new qF(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return OC(e,r)}removeReference(e,t,r){return OC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return OC(e,t)}On(e,t){return function(r,i){let u=!1;return PP(r).zt(c=>OP(r,c,i).next(f=>(f&&(u=!0),me.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,f)=>{if(f<=t){const _=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,St.min()),hd(e).delete([0,Ds(c.path)])))});i.push(_)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return OC(e,t)}Mn(e,t){const r=hd(e);let i,u=Mo.A;return r.Wt({index:"documentTargetsIndex"},([c,f],{path:_,sequenceNumber:b})=>{0===c?(u!==Mo.A&&t(new Ye(Vu(i)),u),u=b,i=_):u=Mo.A}).next(()=>{u!==Mo.A&&t(new Ye(Vu(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function OC(n,e){return hd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ds(e.path),sequenceNumber:r}));var r}class kP{constructor(){this.changes=new ld(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class WF{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Of(e).put(r)}removeEntry(e,t,r){return Of(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],TC(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Qn.newInvalidDocument(t);return Of(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Uv(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Qn.newInvalidDocument(t)};return Of(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Uv(t))},(i,u)=>{r={document:this.$n(t,u),size:xC(u)}}).next(()=>r)}getEntries(e,t){let r=da();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=da(),i=new Tr(Ye.comparator);return this.Ln(e,t,(u,c)=>{const f=this.$n(u,c);r=r.insert(u,f),i=i.insert(u,xC(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return me.resolve();let i=new $n(VP);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(Uv(i.first()),Uv(i.last())),c=i.getIterator();let f=c.getNext();return Of(e).Wt({index:"documentKeyIndex",range:u},(_,b,A)=>{const x=Ye.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&VP(f,x)<0;)r(f,null),f=c.getNext();f&&f.isEqual(x)&&(r(f,b),f=c.hasNext()?c.getNext():null),f?A.Ut(Uv(f)):A.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),TC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Of(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let f=da();for(const _ of c){const b=this.$n(Ye.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(e,t,r,i){let u=da();const c=LP(t,r),f=LP(t,Qa.max());return Of(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(_,b,A)=>{const x=this.$n(Ye.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(x.key,x),u.size===i&&A.done()}).next(()=>u)}newChangeBuffer(e){return new ZF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return FP(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}Fn(e,t){return FP(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function NF(n,e){let t;if(e.document)t=sP(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),i=Df(e.noDocument.readTime);t=Qn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=Ye.fromSegments(e.unknownDocument.path),i=Df(e.unknownDocument.version);t=Qn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Dr(r[0],r[1]);return St.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(St.min()))return r}return Qn.newInvalidDocument(e)}}class ZF extends kP{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new ld(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new $n((u,c)=>Yt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,f.readTime)),c.isValidDocument()){const _=wP(this.Kn.M,c);i=i.add(u.path.popLast()),r+=xC(_)-f.size,t.push(this.Kn.addEntry(e,u,_))}else if(r-=f.size,this.trackRemovals){const _=wP(this.Kn.M,c.convertToNoDocument(St.min()));t.push(this.Kn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function FP(n){return _i(n,"remoteDocumentGlobal")}function Of(n){return _i(n,"remoteDocumentsV14")}function Uv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function LP(n,e){const t=e.documentKey.path.toArray();return[n,TC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function VP(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Yt(t[u],r[u]),i)return i;return i=Yt(t.length,r.length),i||(i=Yt(t[t.length-2],r[r.length-2]),i||Yt(t[t.length-1],r[r.length-1]))}class KF{constructor(e){this.M=e}kt(e,t,r,i){const u=new DC("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hP,{unique:!0}),f.createObjectStore("documentMutations"),UP(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=me.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),UP(e)),c=c.next(()=>function(f){const _=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:St.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,_){return _.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hP,{unique:!0});const A=_.store("mutations"),x=b.map(V=>A.put(V));return me.waitFor(x)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:TF});_.createIndex("collectionPathOverlayIndex",AF,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",SF,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:gF});_.createIndex("documentKeyIndex",mF),_.createIndex("collectionGroupIndex",yF)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:bF}).createIndex("sequenceNumberIndex",CF,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:IF}).createIndex("documentKeyIndex",DF,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=xC(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>me.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(f=>me.forEach(f,_=>{Rt(_.userId===u.userId);const b=Yg(this.M,_);return xP(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,f)=>{const _=new pn(c),b=[0,Ds(_)];u.push(t.get(b).next(A=>A?me.resolve():t.put({targetId:0,path:Ds(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:wF});const r=t.store("collectionParents"),i=new sS,u=c=>{if(i.add(c)){const f=c.lastSegment(),_=c.popLast();return r.put({collectionId:f,parent:Ds(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,f)=>{const _=new pn(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,f,_],b)=>{const A=Vu(f);return u(A.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=kv(i),c=bP(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const f=t.store("remoteDocumentsV14"),_=(b=c,b.document?new Ye(pn.fromString(b.document.name).popFirst(5)):b.noDocument?Ye.fromSegments(b.noDocument.path):b.unknownDocument?Ye.fromSegments(b.unknownDocument.path):at()).path.toArray();var b;const A={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(A))}).next(()=>me.waitFor(i))}}function UP(n){n.createObjectStore("targetDocuments",{keyPath:vF}).createIndex("documentTargetsIndex",EF,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_F,{unique:!0}),n.createObjectStore("targetGlobal")}const uS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lS{constructor(e,t,r,i,u,c,f,_,b,A,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=f,this.Xn=b,this.Zn=A,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=V=>Promise.resolve(),!lS.vt())throw new Le(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zF(this,i),this.hs=t+"main",this.M=new EP(_),this.ls=new Ja(this.hs,this.ts,new KF(this.M)),this.fs=new $F(this.referenceDelegate,this.M),this.ds=new WF(this.M),this._s=new RF,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===A&&Fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(pe.FAILED_PRECONDITION,uS);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Mo(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,Te.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,Te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,Te.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>PC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(bf(e))return $e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Bv(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return PC(e).delete(this.clientId)}vs(){var e=this;return(0,Te.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=_i(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),f=u.filter(_=>-1===c.indexOf(_));return me.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):Bv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Le(pe.FAILED_PRECONDITION,uS);return!1}}return!(!this.networkEnabled||!this.inForeground)||PC(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&$e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Te.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new vP(t,Mo.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>PC(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return oS.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new jF(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return iS.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){$e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?xF:13===c?gP:12===c?MF:11===c?pP:void at();var c;let f;return this.ls.runTransaction(e,i,u,_=>(f=new vP(_,this.es?this.es.next():Mo.A),"readwrite-primary"===t?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw Fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Le(pe.FAILED_PRECONDITION,mP);return r(f)}).next(b=>this.bs(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}$s(e){return Bv(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(pe.FAILED_PRECONDITION,uS)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bv(e).put("owner",t)}static vt(){return Ja.vt()}Rs(e){const t=Bv(e);return t.get("owner").next(r=>this.Ps(r)?($e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Wt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return $e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Fr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bv(n){return _i(n,"owner")}function PC(n){return _i(n,"clientMetadata")}function cS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class YF{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ye.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):HA(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new Ye(t)).next(r=>{let i=ZA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=ZA();return this.indexManager.getCollectionParents(e,i).next(c=>me.forEach(c,f=>{const _=(b=t,A=f.child(i),new Ll(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.zs(e,_,r).next(b=>{b.forEach((A,x)=>{u=u.insert(A,x)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const f of c.mutations){const _=f.key;let b=i.get(_);null==b&&(b=Qn.newInvalidDocument(_),i=i.insert(_,b)),zA(f,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((u,c)=>{qA(t,c)||(i=i.remove(u))}),i))}}class dS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=An(),i=An();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new dS(e,t.fromCache,r,i)}}class BP{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(u=>u||this.ei(e,t,i,r)).next(u=>u||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,r,i){return function Uk(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(St.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,i)?this.ni(e,t):(kA()<=Do.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),GA(t)),this.ri(e,c,t,E1(i,-1)))})}si(e,t){let r=new $n(N1(e));return t.forEach((i,u)=>{qA(e,u)&&(r=r.add(u))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ni(e,t){return kA()<=Do.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",GA(t)),this.Zs.Qs(e,t,Qa.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class QF{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Tr(Yt),this.ai=new ld(u=>_f(u),bv),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new YF(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function jP(n,e,t,r){return new QF(n,e,t,r)}function $P(n,e){return hS.apply(this,arguments)}function hS(){return hS=(0,Te.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let _=An();for(const b of i){c.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}for(const b of u){f.push(b.batchId);for(const A of b.mutations)_=_.add(A.key)}return t.fi.Ks(r,_).next(b=>({di:b,removedBatchIds:c,addedBatchIds:f}))})})}),hS.apply(this,arguments)}function JF(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,f,_,b){const A=_.batch,x=A.keys();let V=me.resolve();return x.forEach(W=>{V=V.next(()=>b.getEntry(f,W)).next(Y=>{const _e=_.docVersions.get(W);Rt(null!==_e),Y.version.compareTo(_e)<0&&(A.applyToRemoteDocument(Y,_),Y.isValidDocument()&&(Y.setReadTime(_.commitVersion),b.addEntry(Y)))})}),V.next(()=>c.Bs.removeMutationBatch(f,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function HP(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function XF(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const f=[];e.targetChanges.forEach((b,A)=>{const x=i.get(A);if(!x)return;f.push(t.fs.removeMatchingKeys(u,b.removedDocuments,A).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,A)));let V=x.withSequenceNumber(u.currentSequenceNumber);var W,Y,_e;e.targetMismatches.has(A)?V=V.withResumeToken(ei.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):b.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(b.resumeToken,r)),i=i.insert(A,V),Y=V,_e=b,(0===(W=x).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8||_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0)&&f.push(t.fs.updateTargetData(u,V))});let _=da();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),f.push(GP(u,c,e.documentUpdates).next(b=>{_=b})),!r.isEqual(St.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(A=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(b)}return me.waitFor(f).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,_)).next(()=>_)}).then(u=>(t.ui=i,u))}function GP(n,e,t){let r=An();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=da();return t.forEach((c,f)=>{const _=i.get(c);f.isNoDocument()&&f.version.isEqual(St.min())?(e.removeEntry(c,f.readTime),u=u.insert(c,f)):!_.isValidDocument()||f.version.compareTo(_.version)>0||0===f.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(f),u=u.insert(c,f)):$e("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",f.version)}),u})}function eL(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Xg(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,me.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new cd(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function em(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,Te.Z)(function*(n,e,t){const r=Xe(n),i=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!bf(c))throw c;$e("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),fS.apply(this,arguments)}function NC(n,e,t){const r=Xe(n);let i=St.min(),u=An();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,_,b){const A=Xe(f),x=A.ai.get(b);return void 0!==x?me.resolve(A.ui.get(x)):A.fs.getTargetData(_,b)}(r,c,ca(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,f.targetId).next(_=>{u=_})}).next(()=>r.oi.Qs(c,e,t?i:St.min(),t?u:An())).next(f=>(WP(r,P1(e),f),{documents:f,_i:u})))}function qP(n,e){const t=Xe(n),r=Xe(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function zP(n,e){const t=Xe(n),r=t.ci.get(e)||St.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,E1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(WP(t,e,i),i))}function WP(n,e,t){let r=St.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function pS(){return pS=(0,Te.Z)(function*(n,e,t,r){const i=Xe(n);let u=An(),c=da();for(const b of t){const A=e.wi(b.metadata.name);b.document&&(u=u.add(A));const x=e.mi(b);x.setReadTime(e.gi(b.metadata.readTime)),c=c.insert(A,x)}const f=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield Xg(i,(b=r,ca(Gg(pn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>GP(b,f,c).next(A=>(f.apply(b),A)).next(A=>i.fs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>i.fs.addMatchingKeys(b,u,_.targetId)).next(()=>i.fi.Gs(b,A)).next(()=>A)))}),pS.apply(this,arguments)}function nL(n,e){return gS.apply(this,arguments)}function gS(){return gS=(0,Te.Z)(function*(n,e,t=An()){const r=yield Xg(n,ca(nS(e.bundledQuery))),i=Xe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=yi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const f=r.withResumeToken(ei.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(f.targetId,f),i.fs.updateTargetData(u,f).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),gS.apply(this,arguments)}class rL{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:yi(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:nS(r.bundledQuery),readTime:yi(r.readTime)}),me.resolve();var r}}class iL{constructor(){this.overlays=new Tr(Ye.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=Av(),u=t.length+1,c=new Ye(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const _=f.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new Tr((b,A)=>b-A);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=Av(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const f=Av(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,A)=>f.set(b,A)),!(f.size()>=i)););return me.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new tS(t,r));let u=this.Ii.get(t);void 0===u&&(u=An(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class mS{constructor(){this.Ti=new $n(vi.Ei),this.Ai=new $n(vi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new vi(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new vi(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Ye(new pn([])),r=new vi(t,e),i=new vi(t,e+1),u=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ye(new pn([])),r=new vi(t,e),i=new vi(t,e+1);let u=An();return this.Ai.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new vi(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class vi{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ye.comparator(e.key,t.key)||Yt(e.Ci,t.Ci)}static Ri(e,t){return Yt(e.Ci,t.Ci)||Ye.comparator(e.key,t.key)}}class sL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new $n(vi.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.xi;this.xi++;const c=new XA(u,t,r,i);this.Bs.push(c);for(const f of i)this.Ni=this.Ni.add(new vi(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),u=i<0?0:i;return me.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new vi(t,0),i=new vi(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,i],c=>{const f=this.ki(c.Ci);u.push(f)}),me.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new $n(Yt);return t.forEach(i=>{const u=new vi(i,0),c=new vi(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],f=>{r=r.add(f.Ci)})}),me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ye.isDocumentKey(u)||(u=u.child(""));const c=new vi(new Ye(u),0);let f=new $n(Yt);return this.Ni.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(_.Ci)),!0)},c),me.resolve(this.Oi(f))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Rt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return me.forEach(t.mutations,i=>{const u=new vi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new vi(t,0),i=this.Ni.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class oL{constructor(e){this.$i=e,this.docs=new Tr(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(t))}getEntries(e,t){let r=da();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Qn.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=da();const u=new Ye(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:_}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||w1(Sk(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){at()}Bi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aL(this)}getSize(e){return me.resolve(this.size)}}class aL extends kP{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class uL{constructor(e){this.persistence=e,this.Li=new ld(t=>_f(t),bv),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.Ui=0,this.qi=new mS,this.targetCount=0,this.Ki=Mf.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Mf(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Li.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),me.waitFor(u).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),me.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class lL{constructor(e,t){this.Gi={},this.overlays={},this.es=new Mo(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new uL(this),this.indexManager=new BF,this.ds=new oL(r=>this.referenceDelegate.Qi(r)),this.M=new EP(t),this._s=new rL(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new sL(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){$e("MemoryPersistence","Starting transaction:",e);const i=new cL(this.es.next());return this.referenceDelegate.ji(),r(i).next(u=>this.referenceDelegate.Wi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}zi(e,t){return me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class cL extends yP{constructor(e){super(),this.currentSequenceNumber=e}}class yS{constructor(e){this.persistence=e,this.Hi=new mS,this.Ji=null}static Yi(e){return new yS(e)}get Xi(){if(this.Ji)return this.Ji;throw at()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,r=>{const i=Ye.fromPath(r);return this.Zi(e,i).next(u=>{u||t.removeEntry(i,St.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function ZP(n,e){return`firestore_clients_${n}_${e}`}function KP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function _S(n,e){return`firestore_targets_${n}_${e}`}class RC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Le(i.error.code,i.error.message))),c?new RC(e,t,i.state,u):(Fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Le(r.error.code,r.error.message))),u?new jv(e,r.state,i):(Fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=bC();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=h1(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new kC(e,u):(Fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vS{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vS(t.clientId,t.onlineState):(Fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ES{constructor(){this.activeTargetIds=bC()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wS{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Tr(Yt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=ZP(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new ES),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Te.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const u=e.getItem(ZP(e.persistenceKey,i));if(u){const c=kC.tr(i,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(_S(this.persistenceKey,e));if(r){const i=jv.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_S(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $e("SharedClientState","READ",e,t),t}setItem(e,t){$e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){$e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if($e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Te.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(u){let c=Mo.A;if(null!=u)try{const f=JSON.parse(u);Rt("number"==typeof f),c=f}catch(f){Fr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Mo.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new RC(this.currentUser,e,t,r),u=KP(this.persistenceKey,this.currentUser,e);this.setItem(u,i.er())}Ar(e){const t=KP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=_S(this.persistenceKey,e),u=new jv(e,t,r);this.setItem(i,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return kC.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return RC.tr(new Vi(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return jv.tr(i,t)}pr(e){return vS.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,Te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);$e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),u=this.Tr(r),c=[],f=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||f.push(_)}),this.syncEngine.Lr(c,f).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=bC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class YP{constructor(){this.Ur=new ES,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new ES,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dL{Kr(e){}shutdown(){}}class QP{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const hL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class fL{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class pL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ho(e,t);$e("RestConnection","Sending: ",c,r);const f={};return this.lo(f,i,u),this.fo(e,c,f,r).then(_=>($e("RestConnection","Received: ",_),_),_=>{throw fv("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,i,u){return this.co(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vg,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.uo}/v1/${t}:${hL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const f=new hk;f.listenOnce(lk.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case RA.NO_ERROR:const b=f.getResponseJson();$e("Connection","XHR received:",JSON.stringify(b)),u(b);break;case RA.TIMEOUT:$e("Connection",'RPC "'+e+'" timed out'),c(new Le(pe.DEADLINE_EXCEEDED,"Request time out"));break;case RA.HTTP_ERROR:const A=f.getStatus();if($e("Connection",'RPC "'+e+'" failed with status:',A,"response text:",f.getResponseText()),A>0){const x=f.getResponseJson().error;if(x&&x.status&&x.message){const V=function(W){const Y=W.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(Y)>=0?Y:pe.UNKNOWN}(x.status);c(new Le(V,x.message))}else c(new Le(pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Le(pe.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{$e("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);f.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ak(),c=uk(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new dk({})),this.lo(f.initMessageHeaders,t,r),(0,Wt.uI)()||(0,Wt.b$)()||(0,Wt.d)()||(0,Wt.w1)()||(0,Wt.Mn)()||(0,Wt.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");$e("Connection","Creating WebChannel: "+_,f);const b=u.createWebChannel(_,f);let A=!1,x=!1;const V=new fL({Jr:Y=>{x?$e("Connection","Not sending because WebChannel is closed:",Y):(A||($e("Connection","Opening WebChannel transport."),b.open(),A=!0),$e("Connection","WebChannel sending:",Y),b.send(Y))},Yr:()=>b.close()}),W=(Y,_e,Ue)=>{Y.listen(_e,yt=>{try{Ue(yt)}catch(_t){setTimeout(()=>{throw _t},0)}})};return W(b,dC.EventType.OPEN,()=>{x||$e("Connection","WebChannel transport opened.")}),W(b,dC.EventType.CLOSE,()=>{x||(x=!0,$e("Connection","WebChannel transport closed"),V.ro())}),W(b,dC.EventType.ERROR,Y=>{x||(x=!0,fv("Connection","WebChannel transport errored:",Y),V.ro(new Le(pe.UNAVAILABLE,"The operation could not be completed")))}),W(b,dC.EventType.MESSAGE,Y=>{var _e;if(!x){const Ue=Y.data[0];Rt(!!Ue);const yt=Ue,_t=yt.error||(null===(_e=yt[0])||void 0===_e?void 0:_e.error);if(_t){$e("Connection","WebChannel received error:",_t);const Ct=_t.status;let ht=function(Qt){const bn=Vr[Qt];if(void 0!==bn)return Z1(bn)}(Ct),Vt=_t.message;void 0===ht&&(ht=pe.INTERNAL,Vt="Unknown error status: "+Ct+" with message "+_t.message),x=!0,V.ro(new Le(ht,Vt)),b.close()}else $e("Connection","WebChannel received:",Ue),V.oo(Ue)}}),W(c,ck.STAT_EVENT,Y=>{Y.stat===r1.PROXY?$e("Connection","Detected buffering proxy"):Y.stat===r1.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{V.io()},0),V}}function JP(){return"undefined"!=typeof window?window:null}function FC(){return"undefined"!=typeof document?document:null}function $v(n){return new nF(n,!0)}class bS{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&$e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class XP{constructor(e,t,r,i,u,c,f,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new bS(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Te.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,Te.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,Te.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Le(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,Te.Z)(function*(){e.state=0,e.start()}))}jo(e){return $e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gL extends XP{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function sF(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:at(),i=e.targetChange.targetIds||[],u=function(_,b){return _.N?(Rt(void 0===b||"string"==typeof b),ei.fromBase64String(b||"")):(Rt(void 0===b||b instanceof Uint8Array),ei.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(_){const b=void 0===_.code?pe.UNKNOWN:Z1(_.code);return new Le(b,_.message||"")}(c);t=new Y1(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Lu(n,r.document.name),u=yi(r.document.updateTime),c=new rs({mapValue:{fields:r.document.fields}}),f=Qn.newFoundDocument(i,u,c);t=new CC(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Lu(n,r.document),u=r.readTime?yi(r.readTime):St.min(),c=Qn.newNoDocument(i,u);t=new CC([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Lu(n,r.document);t=new CC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,u=new Wk(r.count||0);t=new K1(r.targetId,u)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return St.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?St.min():u.readTime?yi(u.readTime):St.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Pv(this.M),t.addTarget=function(i,u){let c;const f=u.target;return c=yC(f)?{documents:oP(i,f)}:{query:aP(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=eP(i,u.resumeToken):u.snapshotVersion.compareTo(St.min())>0&&(c.readTime=xv(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function aF(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Pv(this.M),t.removeTarget=e,this.Lo(t)}}class mL extends XP{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function oF(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,i){let u=yi(r.updateTime?r.updateTime:i);return u.isEqual(St.min())&&(u=yi(i)),new Gk(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=yi(e.commitTime);return this.listener.tu(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Pv(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Nv(this.M,r))};this.Lo(t)}}class yL extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Le(pe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(pe.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.So._o(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(pe.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class _L{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Fr(t),this.uu=!1):$e("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class vL{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(f=>{r.enqueueAndForget((0,Te.Z)(function*(){var _;fd(c)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Te.Z)(function*(b){const A=Xe(b);A.wu.add(4),yield tm(A),A.yu.set("Unknown"),A.wu.delete(4),yield Hv(A)}),function(b){return _.apply(this,arguments)})(c))}))}),this.yu=new _L(r,i)}}function Hv(n){return CS.apply(this,arguments)}function CS(){return CS=(0,Te.Z)(function*(n){if(fd(n))for(const e of n.mu)yield e(!0)}),CS.apply(this,arguments)}function tm(n){return IS.apply(this,arguments)}function IS(){return IS=(0,Te.Z)(function*(n){for(const e of n.mu)yield e(!1)}),IS.apply(this,arguments)}function LC(n,e){const t=Xe(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),AS(t)?TS(t):rm(t).Mo()&&DS(t,e))}function Gv(n,e){const t=Xe(n),r=rm(t);t._u.delete(e),r.Mo()&&eN(t,e),0===t._u.size&&(r.Mo()?r.$o():fd(t)&&t.yu.set("Unknown"))}function DS(n,e){n.pu.Z(e.targetId),rm(n).Ho(e)}function eN(n,e){n.pu.Z(e),rm(n).Jo(e)}function TS(n){n.pu=new Xk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),rm(n).start(),n.yu.au()}function AS(n){return fd(n)&&!rm(n).ko()&&n._u.size>0}function fd(n){return 0===Xe(n).wu.size}function tN(n){n.pu=void 0}function EL(n){return SS.apply(this,arguments)}function SS(){return SS=(0,Te.Z)(function*(n){n._u.forEach((e,t)=>{DS(n,e)})}),SS.apply(this,arguments)}function wL(n,e){return MS.apply(this,arguments)}function MS(){return MS=(0,Te.Z)(function*(n,e){tN(n),AS(n)?(n.yu.lu(e),TS(n)):n.yu.set("Unknown")}),MS.apply(this,arguments)}function bL(n,e,t){return xS.apply(this,arguments)}function xS(){return xS=(0,Te.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Y1&&2===e.state&&e.cause)try{yield(r=(0,Te.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i._u.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i._u.delete(f),i.pu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){$e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield VC(n,r)}else if(e instanceof CC?n.pu.ut(e):e instanceof K1?n.pu._t(e):n.pu.ht(e),!t.isEqual(St.min()))try{const r=yield HP(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.pu.yt(u);return c.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const b=i._u.get(_);b&&i._u.set(_,b.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach(f=>{const _=i._u.get(f);if(!_)return;i._u.set(f,_.withResumeToken(ei.EMPTY_BYTE_STRING,_.snapshotVersion)),eN(i,f);const b=new cd(_.target,f,1,_.sequenceNumber);DS(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){$e("RemoteStore","Failed to raise snapshot:",r),yield VC(n,r)}var r}),xS.apply(this,arguments)}function VC(n,e,t){return OS.apply(this,arguments)}function OS(){return OS=(0,Te.Z)(function*(n,e,t){if(!bf(e))throw e;n.wu.add(1),yield tm(n),n.yu.set("Offline"),t||(t=()=>HP(n.localStore)),n.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Hv(n)}))}),OS.apply(this,arguments)}function nN(n,e){return e().catch(t=>VC(n,t,e))}function nm(n){return PS.apply(this,arguments)}function PS(){return PS=(0,Te.Z)(function*(n){const e=Xe(n),t=pd(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;CL(e);)try{const i=yield eL(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,IL(e,i)}catch(i){yield VC(e,i)}rN(e)&&iN(e)}),PS.apply(this,arguments)}function CL(n){return fd(n)&&n.du.length<10}function IL(n,e){n.du.push(e);const t=pd(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function rN(n){return fd(n)&&!pd(n).ko()&&n.du.length>0}function iN(n){pd(n).start()}function DL(n){return NS.apply(this,arguments)}function NS(){return NS=(0,Te.Z)(function*(n){pd(n).nu()}),NS.apply(this,arguments)}function TL(n){return RS.apply(this,arguments)}function RS(){return RS=(0,Te.Z)(function*(n){const e=pd(n);for(const t of n.du)e.Zo(t.mutations)}),RS.apply(this,arguments)}function AL(n,e,t){return kS.apply(this,arguments)}function kS(){return kS=(0,Te.Z)(function*(n,e,t){const r=n.du.shift(),i=eS.from(r,e,t);yield nN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield nm(n)}),kS.apply(this,arguments)}function SL(n,e){return FS.apply(this,arguments)}function FS(){return FS=(0,Te.Z)(function*(n,e){var t;e&&pd(n).Xo&&(yield(t=(0,Te.Z)(function*(r,i){if(W1(u=i.code)&&u!==pe.ABORTED){const c=r.du.shift();pd(r).Fo(),yield nN(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield nm(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),rN(n)&&iN(n)}),FS.apply(this,arguments)}function sN(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,Te.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const r=fd(t);t.wu.add(3),yield tm(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Hv(t)}),LS.apply(this,arguments)}function VS(n,e){return US.apply(this,arguments)}function US(){return US=(0,Te.Z)(function*(n,e){const t=Xe(n);e?(t.wu.delete(2),yield Hv(t)):e||(t.wu.add(2),yield tm(t),t.yu.set("Unknown"))}),US.apply(this,arguments)}function rm(n){return n.Iu||(n.Iu=function(e,t,r){const i=Xe(e);return i.iu(),new gL(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:EL.bind(null,n),eo:wL.bind(null,n),zo:bL.bind(null,n)}),n.mu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.Iu.Fo(),AS(n)?TS(n):n.yu.set("Unknown")):(yield n.Iu.stop(),tN(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function pd(n){return n.Tu||(n.Tu=function(e,t,r){const i=Xe(e);return i.iu(),new mL(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:DL.bind(null,n),eo:SL.bind(null,n),eu:TL.bind(null,n),tu:AL.bind(null,n)}),n.mu.push(function(){var e=(0,Te.Z)(function*(t){t?(n.Tu.Fo(),yield nm(n)):(yield n.Tu.stop(),n.du.length>0&&($e("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class BS{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new BS(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function im(n,e){if(Fr("AsyncQueue",`${e}: ${n}`),bf(n))return new Le(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class sm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=ZA(),this.sortedSet=new Tr(this.comparator)}static emptySet(e){return new sm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof sm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new sm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class oN{constructor(){this.Eu=new Tr(Ye.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):at():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class om{constructor(e,t,r,i,u,c,f,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new om(e,t,sm.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class ML{constructor(){this.Ru=void 0,this.listeners=[]}}class xL{constructor(){this.queries=new ld(e=>O1(e),Cv),this.onlineState="Unknown",this.bu=new Set}}function jS(n,e){return $S.apply(this,arguments)}function $S(){return $S=(0,Te.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new ML),i)try{u.Ru=yield t.onListen(r)}catch(c){const f=im(c,`Initialization of query '${GA(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&qS(t)}),$S.apply(this,arguments)}function HS(n,e){return GS.apply(this,arguments)}function GS(){return GS=(0,Te.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),GS.apply(this,arguments)}function OL(n,e){const t=Xe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Vu(i)&&(r=!0);c.Ru=i}}r&&qS(t)}function PL(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function qS(n){n.bu.forEach(e=>{e.next()})}class zS{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new om(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=om.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class NL{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class aN{constructor(e){this.M=e}wi(e){return Lu(this.M,e)}mi(e){return e.metadata.exists?sP(this.M,e.document,!1):Qn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return yi(e)}}class RL{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uN(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=pn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new aN(this.M);for(const i of e)if(i.metadata.queries){const u=r.wi(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||An()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,Te.Z)(function*(){const t=yield function tL(n,e,t,r){return pS.apply(this,arguments)}(e.localStore,new aN(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield nL(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function uN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class lN{constructor(e){this.key=e}}class cN{constructor(e){this.key=e}}class dN{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=An(),this.mutatedKeys=An(),this.Gu=N1(e),this.Qu=new sm(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new oN,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,x)=>{const V=i.get(A),W=qA(this.query,x)?x:null,Y=!!V&&this.mutatedKeys.has(V.key),_e=!!W&&(W.hasLocalMutations||this.mutatedKeys.has(W.key)&&W.hasCommittedMutations);let Ue=!1;V&&W?V.data.isEqual(W.data)?Y!==_e&&(r.track({type:3,doc:W}),Ue=!0):this.Hu(V,W)||(r.track({type:2,doc:W}),Ue=!0,(_&&this.Gu(W,_)>0||b&&this.Gu(W,b)<0)&&(f=!0)):!V&&W?(r.track({type:0,doc:W}),Ue=!0):V&&!W&&(r.track({type:1,doc:V}),Ue=!0,(_||b)&&(f=!0)),Ue&&(W?(c=c.add(W),u=_e?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const A="F"===this.query.limitType?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:c,zu:r,ii:f,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,A)=>function(x,V){const W=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return W(x)-W(V)}(b.type,A.type)||this.Gu(b.doc,A.doc)),this.Ju(r);const c=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,_=f!==this.qu;return this.qu=f,0!==u.length||_?{snapshot:new om(this.query,e.Qu,i,u,e.mutatedKeys,0===f,_,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new oN,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=An(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new cN(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new lN(r))}),t}ta(e){this.Uu=e._i,this.Ku=An();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return om.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class kL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class FL{constructor(e){this.key=e,this.na=!1}}class LL{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new ld(f=>O1(f),Cv),this.ra=new Map,this.oa=new Set,this.ua=new Tr(Ye.comparator),this.aa=new Map,this.ca=new mS,this.ha={},this.la=new Map,this.fa=Mf.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function VL(n,e){return WS.apply(this,arguments)}function WS(){return WS=(0,Te.Z)(function*(n,e){const t=mM(n);let r,i;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ea();else{const c=yield Xg(t.localStore,ca(e));t.isPrimaryClient&&LC(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield ZS(t,e,r,"current"===f)}return i}),WS.apply(this,arguments)}function ZS(n,e,t,r){return KS.apply(this,arguments)}function KS(){return KS=(0,Te.Z)(function*(n,e,t,r){n._a=(A,x,V)=>{return(W=(0,Te.Z)(function*(Y,_e,Ue,yt){let _t=_e.view.Wu(Ue);_t.ii&&(_t=yield NC(Y.localStore,_e.query,!1).then(({documents:Vt})=>_e.view.Wu(Vt,_t)));const Ct=yt&&yt.targetChanges.get(_e.targetId),ht=_e.view.applyChanges(_t,Y.isPrimaryClient,Ct);return sM(Y,_e.targetId,ht.Xu),ht.snapshot}),function(Y,_e,Ue,yt){return W.apply(this,arguments)})(n,A,x,V);var W};const i=yield NC(n.localStore,e,!0),u=new dN(e,i._i),c=u.Wu(i.documents),f=Mv.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(c,n.isPrimaryClient,f);sM(n,t,_.Xu);const b=new kL(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),KS.apply(this,arguments)}function UL(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,Te.Z)(function*(n,e){const t=Xe(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(u=>!Cv(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield em(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Gv(t.remoteStore,r.targetId),am(t,r.targetId)}).catch(xf))):(am(t,r.targetId),yield em(t.localStore,r.targetId,!0))}),YS.apply(this,arguments)}function QS(){return QS=(0,Te.Z)(function*(n,e,t){const r=yM(n);try{const i=yield function(u,c){const f=Xe(u),_=Dr.now(),b=c.reduce((x,V)=>x.add(V.key),An());let A;return f.persistence.runTransaction("Locally write mutations","readwrite",x=>f.fi.Ks(x,b).next(V=>{A=V;const W=[];for(const Y of c){const _e=zk(Y,A.get(Y.key));null!=_e&&W.push(new wf(Y.key,_e,v1(_e.value.mapValue),Lr.exists(!0)))}return f.Bs.addMutationBatch(x,_,W,c)})).then(x=>(x.applyToLocalDocumentSet(A),{batchId:x.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let _=u.ha[u.currentUser.toKey()];_||(_=new Tr(Yt)),_=_.insert(c,f),u.ha[u.currentUser.toKey()]=_}(r,i.batchId,t),yield Vl(r,i.changes),yield nm(r.remoteStore)}catch(i){const u=im(i,"Failed to persist write");t.reject(u)}}),QS.apply(this,arguments)}function hN(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,Te.Z)(function*(n,e){const t=Xe(n);try{const r=yield XF(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.aa.get(u);c&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?Rt(c.na):i.removedDocuments.size>0&&(Rt(c.na),c.na=!1))}),yield Vl(t,r,e)}catch(r){yield xf(r)}}),JS.apply(this,arguments)}function fN(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((u,c)=>{const f=c.view.Pu(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=Xe(u);f.onlineState=c;let _=!1;f.queries.forEach((b,A)=>{for(const x of A.listeners)x.Pu(c)&&(_=!0)}),_&&qS(f)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jL(n,e,t){return XS.apply(this,arguments)}function XS(){return XS=(0,Te.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),u=i&&i.key;if(u){let c=new Tr(Ye.comparator);c=c.insert(u,Qn.newNoDocument(u,St.min()));const f=An().add(u),_=new Sv(St.min(),new Map,new $n(Yt),c,f);yield hN(r,_),r.ua=r.ua.remove(u),r.aa.delete(e),oM(r)}else yield em(r.localStore,e,!1).then(()=>am(r,e,t)).catch(xf)}),XS.apply(this,arguments)}function $L(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,Te.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=yield JF(t.localStore,e);iM(t,r,null),rM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vl(t,i)}catch(i){yield xf(i)}}),eM.apply(this,arguments)}function HL(n,e,t){return tM.apply(this,arguments)}function tM(){return tM=(0,Te.Z)(function*(n,e,t){const r=Xe(n);try{const i=yield function(u,c){const f=Xe(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return f.Bs.lookupMutationBatch(_,c).next(A=>(Rt(null!==A),b=A.keys(),f.Bs.removeMutationBatch(_,A))).next(()=>f.Bs.performConsistencyCheck(_)).next(()=>f.fi.Ks(_,b))})}(r.localStore,e);iM(r,e,t),rM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vl(r,i)}catch(i){yield xf(i)}}),tM.apply(this,arguments)}function nM(){return nM=(0,Te.Z)(function*(n,e){const t=Xe(n);fd(t.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Xe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.Bs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=im(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),nM.apply(this,arguments)}function rM(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function iM(n,e,t){const r=Xe(n);let i=r.ha[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function am(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||pN(n,r)})}function pN(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Gv(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),oM(n))}function sM(n,e,t){for(const r of t)r instanceof lN?(n.ca.addReference(r.key,e),qL(n,r)):r instanceof cN?($e("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||pN(n,r.key)):at()}function qL(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||($e("SyncEngine","New document in limbo: "+t),n.oa.add(r),oM(n))}function oM(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Ye(pn.fromString(e)),r=n.fa.next();n.aa.set(r,new FL(t)),n.ua=n.ua.insert(t,r),LC(n.remoteStore,new cd(ca(Gg(t.path)),r,2,Mo.A))}}function Vl(n,e,t){return aM.apply(this,arguments)}function aM(){return aM=(0,Te.Z)(function*(n,e,t){const r=Xe(n),i=[],u=[],c=[];var f;r.ia.isEmpty()||(r.ia.forEach((f,_)=>{c.push(r._a(_,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b.fromCache?"not-current":"current"),i.push(b);const A=dS.Ys(_.targetId,b);u.push(A)}}))}),yield Promise.all(c),r.sa.zo(i),yield(f=(0,Te.Z)(function*(_,b){const A=Xe(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>me.forEach(b,V=>me.forEach(V.Hs,W=>A.persistence.referenceDelegate.addReference(x,V.targetId,W)).next(()=>me.forEach(V.Js,W=>A.persistence.referenceDelegate.removeReference(x,V.targetId,W)))))}catch(x){if(!bf(x))throw x;$e("LocalStore","Failed to update sequence numbers: "+x)}for(const x of b){const V=x.targetId;if(!x.fromCache){const W=A.ui.get(V),_e=W.withLastLimboFreeSnapshotVersion(W.snapshotVersion);A.ui=A.ui.insert(V,_e)}}}),function(_,b){return f.apply(this,arguments)})(r.localStore,u))}),aM.apply(this,arguments)}function zL(n,e){return uM.apply(this,arguments)}function uM(){return uM=(0,Te.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){$e("SyncEngine","User change. New user:",e.toKey());const r=yield $P(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(f=>{f.reject(new Le(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vl(t,r.di)}var i}),uM.apply(this,arguments)}function WL(n,e){const t=Xe(n),r=t.aa.get(e);if(r&&r.na)return An().add(r.key);{let i=An();const u=t.ra.get(e);if(!u)return i;for(const c of u){const f=t.ia.get(c);i=i.unionWith(f.view.ju)}return i}}function ZL(n,e){return lM.apply(this,arguments)}function lM(){return lM=(0,Te.Z)(function*(n,e){const t=Xe(n),r=yield NC(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&sM(t,e.targetId,i.Xu),i}),lM.apply(this,arguments)}function KL(n,e){return cM.apply(this,arguments)}function cM(){return cM=(0,Te.Z)(function*(n,e){const t=Xe(n);return zP(t.localStore,e).then(r=>Vl(t,r))}),cM.apply(this,arguments)}function YL(n,e,t,r){return dM.apply(this,arguments)}function dM(){return dM=(0,Te.Z)(function*(n,e,t,r){const i=Xe(n),u=yield function(c,f){const _=Xe(c),b=Xe(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.fn(A,f).next(x=>x?_.fi.Ks(A,x):me.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield nm(i.remoteStore):"acknowledged"===t||"rejected"===t?(iM(i,e,r||null),rM(i,e),f=e,Xe(Xe(i.localStore).Bs)._n(f)):at(),yield Vl(i,u)):$e("SyncEngine","Cannot apply mutation batch with id: "+e)}),dM.apply(this,arguments)}function hM(){return hM=(0,Te.Z)(function*(n,e){const t=Xe(n);if(mM(t),yM(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield gN(t,r.toArray());t.da=!0,yield VS(t.remoteStore,!0);for(const u of i)LC(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(am(t,c),em(t.localStore,c,!0))),Gv(t.remoteStore,c)}),yield i,yield gN(t,r),function(u){const c=Xe(u);c.aa.forEach((f,_)=>{Gv(c.remoteStore,_)}),c.ca.Si(),c.aa=new Map,c.ua=new Tr(Ye.comparator)}(t),t.da=!1,yield VS(t.remoteStore,!1)}}),hM.apply(this,arguments)}function gN(n,e,t){return fM.apply(this,arguments)}function fM(){return fM=(0,Te.Z)(function*(n,e,t){const r=Xe(n),i=[],u=[];for(const c of e){let f;const _=r.ra.get(c);if(_&&0!==_.length){f=yield Xg(r.localStore,ca(_[0]));for(const b of _){const A=r.ia.get(b),x=yield ZL(r,A);x.snapshot&&u.push(x.snapshot)}}else{const b=yield qP(r.localStore,c);f=yield Xg(r.localStore,b),yield ZS(r,mN(b),c,!1)}i.push(f)}return r.sa.zo(u),i}),fM.apply(this,arguments)}function mN(n){return M1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function JL(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).Fs()}function XL(n,e,t,r){return pM.apply(this,arguments)}function pM(){return pM=(0,Te.Z)(function*(n,e,t,r){const i=Xe(n);if(i.da)return void $e("SyncEngine","Ignoring unexpected query state notification.");const u=i.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield zP(i.localStore,P1(u[0])),f=Sv.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Vl(i,c,f);break}case"rejected":yield em(i.localStore,e,!0),am(i,e,r);break;default:at()}}),pM.apply(this,arguments)}function eV(n,e,t){return gM.apply(this,arguments)}function gM(){return gM=(0,Te.Z)(function*(n,e,t){const r=mM(n);if(r.da){for(const i of e){if(r.ra.has(i)){$e("SyncEngine","Adding an already active target "+i);continue}const u=yield qP(r.localStore,i),c=yield Xg(r.localStore,u);yield ZS(r,mN(u),c.targetId,!1),LC(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield em(r.localStore,i,!1).then(()=>{Gv(r.remoteStore,i),am(r,i)}).catch(xf))}}),gM.apply(this,arguments)}function mM(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jL.bind(null,e),e.sa.zo=OL.bind(null,e.eventManager),e.sa.wa=PL.bind(null,e.eventManager),e}function yM(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$L.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HL.bind(null,e),e}class yN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Te.Z)(function*(){t.M=$v(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return jP(this.persistence,new BP,e.initialUser,this.M)}ya(e){return new lL(yS.Yi,this.M)}ga(e){return new YP}terminate(){var e=this;return(0,Te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _N extends yN{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield yM(r.Ta.syncEngine),yield nm(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return jP(this.persistence,new BP,e.initialUser,this.M)}pa(e){return new GF(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=cS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Qs.withCacheSize(this.cacheSizeBytes):Qs.DEFAULT;return new lS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,JP(),FC(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new YP}}class nV extends _N{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof wS&&(r.sharedClientState.syncEngine={$r:YL.bind(null,i),Br:XL.bind(null,i),Lr:eV.bind(null,i),Fs:JL.bind(null,i),Fr:KL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,Te.Z)(function*(c){yield function QL(n,e){return hM.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=JP();if(!wS.vt(t))throw new Le(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class _M{initialize(e,t){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>fN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=zL.bind(null,r.syncEngine),yield VS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new xL}createDatastore(e){const t=$v(e.databaseInfo.databaseId),r=new pL(e.databaseInfo);return new yL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>fN(this.syncEngine,f,0),c=QP.vt()?new QP:new dL,new vL(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,_,b){const A=new LL(r,i,u,c,f,_);return b&&(A.da=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Te.Z)(function*(t){const r=Xe(t);$e("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield tm(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vN(n,e=10240){let t=0;return{read:()=>(0,Te.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class UC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class rV{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new mi,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,Te.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,Te.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(i);return new NL(JSON.parse(u),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,Te.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,Te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class iV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Te.Z)(function*(u,c){const f=Xe(u),_=Pv(f.M)+"/documents",b={documents:c.map(W=>Ov(f.M,W))},A=yield f._o("BatchGetDocuments",_,b),x=new Map;A.forEach(W=>{const Y=function iF(n,e){return"found"in e?function(t,r){Rt(!!r.found);const i=Lu(t,r.found.name),u=yi(r.found.updateTime),c=new rs({mapValue:{fields:r.found.fields}});return Qn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const i=Lu(t,r.missing),u=yi(r.readTime);return Qn.newNoDocument(i,u)}(n,e):at()}(f.M,W);x.set(Y.key.toString(),Y)});const V=[];return c.forEach(W=>{const Y=x.get(W.toString());Rt(!!Y),V.push(Y)}),V}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Tv(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ye.fromPath(i);e.mutations.push(new WA(u,e.precondition(u)))}),yield(r=(0,Te.Z)(function*(i,u){const c=Xe(i),f=Pv(c.M)+"/documents",_={writes:u.map(b=>Nv(c.M,b))};yield c.co("Commit",f,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=St.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Lr.updateTime(t):Lr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(St.min()))throw new Le(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Lr.updateTime(t)}return Lr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class sV{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.xa=r.maxAttempts,this.No=new bS(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,Te.Z)(function*(){const t=new iV(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Ma(u)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!mv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!W1(t)}return!1}}class oV{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Vi.UNAUTHENTICATED,this.clientId=a1.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Te.Z)(function*(f){$e("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>($e("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=im(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function EN(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(u){r.isEqual(u)||(yield $P(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),vM.apply(this,arguments)}function wN(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wM(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>sN(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>sN(e.remoteStore,u)),n.onlineComponents=e}),EM.apply(this,arguments)}function wM(n){return bM.apply(this,arguments)}function bM(){return bM=(0,Te.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield EN(n,new yN)),n.offlineComponents}),bM.apply(this,arguments)}function BC(n){return CM.apply(this,arguments)}function CM(){return CM=(0,Te.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield wN(n,new _M)),n.onlineComponents}),CM.apply(this,arguments)}function bN(n){return wM(n).then(e=>e.persistence)}function IM(n){return wM(n).then(e=>e.localStore)}function CN(n){return BC(n).then(e=>e.remoteStore)}function DM(n){return BC(n).then(e=>e.syncEngine)}function um(n){return TM.apply(this,arguments)}function TM(){return TM=(0,Te.Z)(function*(n){const e=yield BC(n),t=e.eventManager;return t.onListen=VL.bind(null,e.syncEngine),t.onUnlisten=UL.bind(null,e.syncEngine),t}),TM.apply(this,arguments)}function IN(n,e,t={}){const r=new mi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,u,c,f,_){const b=new UC({next:x=>{u.enqueueAndForget(()=>HS(i,A));const V=x.docs.has(c);!V&&x.fromCache?_.reject(new Le(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&x.fromCache&&f&&"server"===f.source?_.reject(new Le(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new zS(Gg(c.path),b,{includeMetadataChanges:!0,ku:!0});return jS(i,A)}(yield um(n),n.asyncQueue,e,t,r)})),r.promise}function DN(n,e,t={}){const r=new mi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,u,c,f,_){const b=new UC({next:x=>{u.enqueueAndForget(()=>HS(i,A)),x.fromCache&&"server"===f.source?_.reject(new Le(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new zS(c,b,{includeMetadataChanges:!0,ku:!0});return jS(i,A)}(yield um(n),n.asyncQueue,e,t,r)})),r.promise}const TN=new Map;function AM(n,e,t){if(!t)throw new Le(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AN(n,e,t,r){if(!0===e&&!0===r)throw new Le(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SN(n){if(!Ye.isDocumentKey(n))throw new Le(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MN(n){if(Ye.isDocumentKey(n))throw new Le(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jC(n);throw new Le(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function xN(n,e){if(e<=0)throw new Le(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ON{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,AN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qv{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ON({}),this._settingsFrozen=!1,e instanceof Fl?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Le(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fl(i.options.projectId)}(e))}get app(){if(!this._app)throw new Le(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ON(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new gk;switch(t.type){case"gapi":const r=t.client;return Rt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new vk(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Le(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=TN.get(e);t&&($e("ComponentProvider","Removing Datastore"),TN.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class is{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new is(this.firestore,e,this._query)}}class Uu extends is{constructor(e,t,r){super(e,t,Gg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new Ye(e))}withConverter(e){return new Uu(this.firestore,e,this._path)}}function PN(n,e,...t){if(n=(0,Wt.m9)(n),AM("collection","path",e),n instanceof qv){const r=pn.fromString(e,...t);return MN(r),new Uu(n,null,r)}{if(!(n instanceof Jn||n instanceof Uu))throw new Le(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return MN(r),new Uu(n.firestore,null,r)}}function $C(n,e,...t){if(n=(0,Wt.m9)(n),1===arguments.length&&(e=a1.R()),AM("doc","path",e),n instanceof qv){const r=pn.fromString(e,...t);return SN(r),new Jn(n,null,new Ye(r))}{if(!(n instanceof Jn||n instanceof Uu))throw new Le(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return SN(r),new Jn(n.firestore,n instanceof Uu?n.converter:null,new Ye(r))}}function NN(n,e){return n=(0,Wt.m9)(n),e=(0,Wt.m9)(e),(n instanceof Jn||n instanceof Uu)&&(e instanceof Jn||e instanceof Uu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function RN(n,e){return n=(0,Wt.m9)(n),e=(0,Wt.m9)(e),n instanceof is&&e instanceof is&&n.firestore===e.firestore&&Cv(n._query,e._query)&&n.converter===e.converter}class yV{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new bS(this,"async_queue_retry"),this.Qa=()=>{const t=FC();t&&$e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=FC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=FC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new mi;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,Te.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!bf(t))throw t;$e("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Fr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=BS.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(i),i}ja(){this.Ua&&at()}verifyOperationInProgress(){}Ja(){var e=this;return(0,Te.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function SM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class _V{constructor(){this._progressObserver={},this._taskCompletionResolver=new mi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nr extends qv{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new yV,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||kN(this),this._firestoreClient.terminate()}}function Ur(n){return n._firestoreClient||kN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function kN(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Dk(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new oV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function FN(n,e,t){const r=new mi;return n.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield EN(n,t),yield wN(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===pe.FAILED_PRECONDITION||u.code===pe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function LN(n){if(n._initialized||n._terminated)throw new Le(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ul{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bu(ei.fromBase64String(e))}catch(t){throw new Le(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bu(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pf{constructor(e){this._methodName=e}}class HC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}const SV=/^__.*__$/;class MV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new wf(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dv(e,this.data,t,this.fieldTransforms)}}class VN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class GC{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new GC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return WC(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(UN(this.ec)&&SV.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class xV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||$v(e)}lc(e,t,r,i=!1){return new GC({ec:e,methodName:t,hc:r,path:Xr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Nf(n){const e=n._freezeSettings(),t=$v(n._databaseId);return new xV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qC(n,e,t,r,i,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,i);PM("Data must be an object, but it was:",c,r);const f=$N(r,c);let _,b;if(u.merge)_=new Bg(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const x of u.mergeFields){const V=NM(e,x,t);if(!c.contains(V))throw new Le(pe.INVALID_ARGUMENT,`Field '${V}' is specified in your field mask but missing from your input data.`);GN(A,V)||A.push(V)}_=new Bg(A),b=c.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,b=c.fieldTransforms;return new MV(new rs(f),_,b)}class zv extends Pf{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zv}}function BN(n,e,t){return new GC({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class MM extends Pf{_toFieldTransform(e){return new Iv(e.path,new zg)}isEqual(e){return e instanceof MM}}class OV extends Pf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=BN(this,e,!0),r=this.fc.map(u=>Rf(u,t)),i=new vf(r);return new Iv(e.path,i)}isEqual(e){return this===e}}class PV extends Pf{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=BN(this,e,!0),r=this.fc.map(u=>Rf(u,t)),i=new Ef(r);return new Iv(e.path,i)}isEqual(e){return this===e}}class NV extends Pf{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Wg(e.M,F1(e.M,this.dc));return new Iv(e.path,t)}isEqual(e){return this===e}}function xM(n,e,t,r){const i=n.lc(1,e,t);PM("Data must be an object, but it was:",i,r);const u=[],c=rs.empty();ff(r,(_,b)=>{const A=zC(e,_,t);b=(0,Wt.m9)(b);const x=i.oc(A);if(b instanceof zv)u.push(A);else{const V=Rf(b,x);null!=V&&(u.push(A),c.set(A,V))}});const f=new Bg(u);return new VN(c,f,i.fieldTransforms)}function OM(n,e,t,r,i,u){const c=n.lc(1,e,t),f=[NM(e,r,t)],_=[i];if(u.length%2!=0)throw new Le(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let V=0;V<u.length;V+=2)f.push(NM(e,u[V])),_.push(u[V+1]);const b=[],A=rs.empty();for(let V=f.length-1;V>=0;--V)if(!GN(b,f[V])){const W=f[V];let Y=_[V];Y=(0,Wt.m9)(Y);const _e=c.oc(W);if(Y instanceof zv)b.push(W);else{const Ue=Rf(Y,_e);null!=Ue&&(b.push(W),A.set(W,Ue))}}const x=new Bg(b);return new VN(A,x,c.fieldTransforms)}function jN(n,e,t,r=!1){return Rf(t,n.lc(r?4:3,e))}function Rf(n,e){if(HN(n=(0,Wt.m9)(n)))return PM("Unsupported field value:",e,n),$N(n,e);if(n instanceof Pf)return function(t,r){if(!UN(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=Rf(c,r.uc(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Wt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return F1(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Dr.fromDate(t);return{timestampValue:xv(r.M,i)}}if(t instanceof Dr){const i=new Dr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:xv(r.M,i)}}if(t instanceof HC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Bu)return{bytesValue:eP(r.M,t._byteString)};if(t instanceof Jn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:KA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${jC(t)}`)}(n,e)}function $N(n,e){const t={};return c1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ff(n,(r,i)=>{const u=Rf(i,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function HN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Dr||n instanceof HC||n instanceof Bu||n instanceof Jn||n instanceof Pf)}function PM(n,e,t){if(!HN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=jC(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function NM(n,e,t){if((e=(0,Wt.m9)(e))instanceof Ul)return e._internalPath;if("string"==typeof e)return zC(n,e);throw WC("Field path arguments must be of type string or ",n,!1,void 0,t)}const RV=new RegExp("[~\\*/\\[\\]]");function zC(n,e,t){if(e.search(RV)>=0)throw WC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ul(...e.split("."))._internalPath}catch(r){throw WC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function WC(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Le(pe.INVALID_ARGUMENT,f+n+_)}function GN(n,e){return n.some(t=>t.isEqual(e))}class Wv{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ZC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kV extends Wv{data(){return super.data()}}function ZC(n,e){return"string"==typeof e?zC(n,e):e instanceof Ul?e._internalPath:e._delegate._internalPath}class kf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bl extends Wv{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ZC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Zv extends Bl{data(e={}){return super.data(e)}}class gd{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new kf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zv(this._firestore,this._userDataWriter,r.key,r,new kf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Zv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new kf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new Zv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new kf(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:FV(c.type),doc:f,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function FV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function qN(n,e){return n instanceof Bl&&e instanceof Bl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gd&&e instanceof gd&&n._firestore===e._firestore&&RN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function zN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kv{}function md(n,...e){for(const t of e)n=t._apply(n);return n}class LV extends Kv{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Nf(e.firestore),r=function(i,u,c,f,_,b,A){let x;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Le(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){JN(A,b);const W=[];for(const Y of A)W.push(QN(f,i,Y));x={arrayValue:{values:W}}}else x=QN(f,i,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||JN(A,b),x=jN(c,"where",A,"in"===b||"not-in"===b);const V=Bi.create(_,b,x);return function(W,Y){if(Y.S()){const Ue=$A(W);if(null!==Ue&&!Ue.isEqual(Y.field))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ue.toString()}' and '${Y.field.toString()}'`);const yt=jA(W);null!==yt&&XN(0,Y.field,yt)}const _e=function(Ue,yt){for(const _t of Ue.filters)if(yt.indexOf(_t.op)>=0)return _t.op;return null}(W,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Y.op));if(null!==_e)throw new Le(pe.INVALID_ARGUMENT,_e===Y.op?`Invalid query. You cannot use more than one '${Y.op.toString()}' filter.`:`Invalid query. You cannot use '${Y.op.toString()}' filters with '${_e.toString()}' filters.`)}(i,V),V}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new is(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new Ll(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class UV extends Kv{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Le(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Hg(i,u);return function(f,_){if(null===jA(f)){const b=$A(f);null!==b&&XN(0,b,_.field)}}(r,c),c}(e._query,this._c,this.gc);return new is(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Ll(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class WN extends Kv{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new is(e.firestore,e.converter,x1(e._query,this.yc,this.Ic))}}class ZN extends Kv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=YN(e,this.type,this.Tc,this.Ec);return new is(e.firestore,e.converter,(i=t,new Ll((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class KN extends Kv{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=YN(e,this.type,this.Tc,this.Ec);return new is(e.firestore,e.converter,(i=t,new Ll((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function YN(n,e,t,r){if(t[0]=(0,Wt.m9)(t[0]),t[0]instanceof Wv)return function(i,u,c,f,_){if(!f)throw new Le(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const A of qg(i))if(A.field.isKeyField())b.push(mf(u,f.key));else{const x=f.data.field(A.field);if(LA(x))throw new Le(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const V=A.field.canonicalString();throw new Le(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}b.push(x)}return new ud(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Nf(n.firestore);return function(u,c,f,_,b,A){const x=u.explicitOrderBy;if(b.length>x.length)throw new Le(pe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let W=0;W<b.length;W++){const Y=b[W];if(x[W].field.isKeyField()){if("string"!=typeof Y)throw new Le(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof Y}`);if(!HA(u)&&-1!==Y.indexOf("/"))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${Y}' contains a slash.`);const _e=u.path.child(pn.fromString(Y));if(!Ye.isDocumentKey(_e))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${_e}' is not because it contains an odd number of segments.`);const Ue=new Ye(_e);V.push(mf(c,Ue))}else{const _e=jN(f,_,Y);V.push(_e)}}return new ud(V,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function QN(n,e,t){if("string"==typeof(t=(0,Wt.m9)(t))){if(""===t)throw new Le(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HA(e)&&-1!==t.indexOf("/"))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pn.fromString(t));if(!Ye.isDocumentKey(r))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mf(n,new Ye(r))}if(t instanceof Jn)return mf(n,t._key);throw new Le(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jC(t)}.`)}function JN(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Le(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function XN(n,e,t){if(!t.isEqual(e))throw new Le(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const WV={maxAttempts:5};class RM{convertValue(e,t="none"){switch(gf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){const r={};return ff(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new HC(gr(e.latitude),gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=d1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gv(e));default:return null}}convertTimestamp(e){const t=sd(e);return new Dr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pn.fromString(e);Rt(cP(r));const i=new Fl(r.get(1),r.get(3)),u=new Ye(r.popFirst(5));return i.isEqual(t)||Fr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function KC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class ZV extends RM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}class eR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Nf(e)}set(e,t,r){this._verifyNotCommitted();const i=yd(e,this._firestore),u=KC(i.converter,t,r),c=qC(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Lr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=yd(e,this._firestore);let c;return c="string"==typeof(t=(0,Wt.m9)(t))||t instanceof Ul?OM(this._dataReader,"WriteBatch.update",u._key,t,r,i):xM(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=yd(e,this._firestore);return this._mutations=this._mutations.concat(new Tv(t._key,Lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yd(n,e){if((n=(0,Wt.m9)(n)).firestore!==e)throw new Le(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ff extends RM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function tR(n,e,t){n=ln(n,Jn);const r=ln(n.firestore,nr),i=KC(n.converter,e,t);return lm(r,[qC(Nf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Lr.none())])}function nR(n,e,t,...r){n=ln(n,Jn);const i=ln(n.firestore,nr),u=Nf(i);let c;return c="string"==typeof(e=(0,Wt.m9)(e))||e instanceof Ul?OM(u,"updateDoc",n._key,e,t,r):xM(u,"updateDoc",n._key,e),lm(i,[c.toMutation(n._key,Lr.exists(!0))])}function rR(n,...e){var t,r,i;n=(0,Wt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||SM(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(SM(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let _,b,A;if(n instanceof Jn)b=ln(n.firestore,nr),A=Gg(n._key.path),_={next:x=>{e[c]&&e[c](kM(b,n,x))},error:e[c+1],complete:e[c+2]};else{const x=ln(n,is);b=ln(x.firestore,nr),A=x._query;const V=new Ff(b);_={next:W=>{e[c]&&e[c](new gd(b,V,x,W))},error:e[c+1],complete:e[c+2]},zN(n._query)}return function(x,V,W,Y){const _e=new UC(Y),Ue=new zS(V,_e,W);return x.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return jS(yield um(x),Ue)})),()=>{_e.Aa(),x.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return HS(yield um(x),Ue)}))}}(Ur(b),A,f,_)}function lm(n,e){return function(t,r){const i=new mi;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function BL(n,e,t){return QS.apply(this,arguments)}(yield DM(t),r,i)})),i.promise}(Ur(n),e)}function kM(n,e,t){const r=t.docs.get(e._key),i=new Ff(n);return new Bl(n,i,e._key,r,new kf(t.hasPendingWrites,t.fromCache),e.converter)}class iU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Nf(e)}get(e){const t=yd(e,this._firestore),r=new ZV(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const u=i[0];if(u.isFoundDocument())return new Wv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Wv(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=yd(e,this._firestore),u=KC(i.converter,t,r),c=qC(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=yd(e,this._firestore);let c;return c="string"==typeof(t=(0,Wt.m9)(t))||t instanceof Ul?OM(this._dataReader,"Transaction.update",u._key,t,r,i):xM(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=yd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yd(e,this._firestore),r=new Ff(this._firestore);return super.get(e).then(i=>new Bl(this._firestore,r,t._key,i._document,new kf(!1,!1),t.converter))}}function FM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function sR(){if("undefined"==typeof Uint8Array)throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function oR(){if(!function Ck(){return"undefined"!=typeof atob}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Vg=ua.SDK_VERSION,(0,ua._registerComponent)(new Qp.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new nr(i,new yk(t.getProvider("auth-internal")),new Ek(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,ua.registerVersion)(i1,"3.4.9",n),(0,ua.registerVersion)(i1,"3.4.9","esm2017")}();class Yv{constructor(e){this._delegate=e}static fromBase64String(e){return oR(),new Yv(Bu.fromBase64String(e))}static fromUint8Array(e){return sR(),new Yv(Bu.fromUint8Array(e))}toBase64(){return oR(),this._delegate.toBase64()}toUint8Array(){return sR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function LM(n){return function fU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class pU{enableIndexedDbPersistence(e,t){return function EV(n,e){LN(n=ln(n,nr));const t=Ur(n),r=n._freezeSettings(),i=new _M;return FN(t,i,new _N(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function wV(n){LN(n=ln(n,nr));const e=Ur(n),t=n._freezeSettings(),r=new _M;return FN(e,r,new nV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function bV(n){if(n._initialized&&!n._terminated)throw new Le(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(t=(0,Te.Z)(function*(r){if(!Ja.vt())return Promise.resolve();const i=r+"main";yield Ja.delete(i)}),function(r){return t.apply(this,arguments)})(cS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class aR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&fv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function gV(n,e,t,r={}){var i;const u=(n=ln(n,qv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&fv("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=Vi.MOCK_USER;else{c=(0,Wt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Le(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Vi(_)}n._authCredentials=new mk(new s1(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function IV(n){return function aV(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield bN(n),t=yield CN(n);return e.setNetworkEnabled(!0),function(r){const i=Xe(r);return i.wu.delete(0),Hv(i)}(t)}))}(Ur(n=ln(n,nr)))}(this._delegate)}disableNetwork(){return function DV(n){return function uV(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield bN(n),t=yield CN(n);return e.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(i){const u=Xe(i);u.wu.add(0),yield tm(u),u.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ur(n=ln(n,nr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,AN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function CV(n){return function(e){const t=new mi;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function GL(n,e){return nM.apply(this,arguments)}(yield DM(e),t)})),t.promise}(Ur(n=ln(n,nr)))}(this._delegate)}onSnapshotsInSync(e){return function rU(n,e){return function dV(n,e){const t=new UC(e);return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield um(n),i=t,Xe(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield um(n),i=t,void Xe(r).bu.delete(i);var r,i}))}}(Ur(n=ln(n,nr)),SM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new cm(this,PN(this._delegate,e))}catch(t){throw Ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new ha(this,$C(this._delegate,e))}catch(t){throw Ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new As(this,function mV(n,e){if(n=ln(n,qv),AM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new is(n,null,(t=e,new Ll(pn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function sU(n,e,t){n=ln(n,nr);const r=Object.assign(Object.assign({},WV),t);return function(i){if(i.maxAttempts<1)throw new Le(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function hV(n,e,t){const r=new mi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const i=yield(u=n,BC(u).then(c=>c.datastore));var u;new sV(n.asyncQueue,i,t,e,r).run()})),r.promise}(Ur(n),i=>e(new iU(n,i)),r)}(this._delegate,t=>e(new uR(this,t)))}batch(){return Ur(this._delegate),new lR(new eR(this._delegate,e=>lm(this._delegate,e)))}loadBundle(e){return function TV(n,e){const t=Ur(n=ln(n,nr)),r=new _V;return function fV(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return vN(_,b);if(_ instanceof ArrayBuffer)return vN(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new rV(_,c);var _}(t,$v(e));n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function tV(n,e,t){const r=Xe(n);var i;(i=(0,Te.Z)(function*(u,c,f){try{const _=yield c.getMetadata();if(yield function(V,W){const Y=Xe(V),_e=yi(W.createTime);return Y.persistence.runTransaction("hasNewerBundle","readonly",Ue=>Y._s.getBundleMetadata(Ue,W.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(_e)>=0)}(u.localStore,_))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(V=_).totalDocuments,bytesLoaded:V.totalBytes,totalDocuments:V.totalDocuments,totalBytes:V.totalBytes}),Promise.resolve(new Set);f._updateProgress(uN(_));const b=new RL(_,u.localStore,c.M);let A=yield c.ma();for(;A;){const V=yield b.Fu(A);V&&f._updateProgress(V),A=yield c.ma()}const x=yield b.complete();return yield Vl(u,x.Lu,void 0),yield function(V,W){const Y=Xe(V);return Y.persistence.runTransaction("Save bundle","readwrite",_e=>Y._s.saveBundleMetadata(_e,W))}(u.localStore,_),f._completeWith(x.progress),Promise.resolve(x.Bu)}catch(_){return fv("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var V}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield DM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function AV(n,e){return function pV(n,e){return n.asyncQueue.enqueue((0,Te.Z)(function*(){return function(t,r){const i=Xe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield IM(n),e)}))}(Ur(n=ln(n,nr)),e).then(t=>t?new is(n,null,t.query):null)}(this._delegate,e).then(t=>t?new As(this,t):null)}}class YC extends RM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yv(new Bu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ha.forKey(t,this.firestore,null)}}class uR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new YC(e)}get(e){const t=Vf(e);return this._delegate.get(t).then(r=>new Qv(this._firestore,new Bl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Vf(e);return r?(FM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Vf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Vf(e);return this._delegate.delete(t),this}}class lR{constructor(e){this._delegate=e}set(e,t,r){const i=Vf(e);return r?(FM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Vf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Vf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Lf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Zv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jv(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Lf.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Lf(e,new YC(e),t),i.set(t,u)),u}}Lf.INSTANCES=new WeakMap;class ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ha(t,new Jn(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new ha(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new cm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new cm(this.firestore,PN(this._delegate,e))}catch(t){throw Ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Wt.m9)(e))instanceof Jn&&NN(this._delegate,e)}set(e,t){t=FM("DocumentReference.set",t);try{return t?tR(this._delegate,e,t):tR(this._delegate,e)}catch(r){throw Ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?nR(this._delegate,e):nR(this._delegate,e,t,...r)}catch(i){throw Ts(i,"updateDoc()","DocumentReference.update()")}}delete(){return function tU(n){return lm(ln(n.firestore,nr),[new Tv(n._key,Lr.none())])}(this._delegate)}onSnapshot(...e){const t=cR(e),r=dR(e,i=>new Qv(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return rR(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function YV(n){n=ln(n,Jn);const e=ln(n.firestore,nr),t=Ur(e),r=new Ff(e);return function lV(n,e){const t=new mi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,u,c){try{const f=yield function(_,b){const A=Xe(_);return A.persistence.runTransaction("read document","readonly",x=>A.fi.Ls(x,b))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Le(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=im(f,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield IM(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Bl(e,r,n._key,i,new kf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function QV(n){n=ln(n,Jn);const e=ln(n.firestore,nr);return IN(Ur(e),n._key,{source:"server"}).then(t=>kM(e,n,t))}(this._delegate):function KV(n){n=ln(n,Jn);const e=ln(n.firestore,nr);return IN(Ur(e),n._key).then(t=>kM(e,n,t))}(this._delegate),t.then(r=>new Qv(this.firestore,new Bl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ha(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}function Ts(n,e,t){return n.message=n.message.replace(e,t),n}function cR(n){for(const e of n)if("object"==typeof e&&!LM(e))return e;return{}}function dR(n,e){var t,r;let i;return i=LM(n[0])?n[0]:LM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Qv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return qN(this._delegate,e._delegate)}}class Jv extends Qv{data(e){const t=this._delegate.data(e);return function pk(n,e){n||at()}(void 0!==t),t}}class As{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YC(e)}where(e,t,r){try{return new As(this.firestore,md(this._delegate,function VV(n,e,t){const r=e,i=ZC("where",n);return new LV(i,r,t)}(e,t,r)))}catch(i){throw Ts(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new As(this.firestore,md(this._delegate,function BV(n,e="asc"){const t=e,r=ZC("orderBy",n);return new UV(r,t)}(e,t)))}catch(r){throw Ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new As(this.firestore,md(this._delegate,function jV(n){return xN("limit",n),new WN("limit",n,"F")}(e)))}catch(t){throw Ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new As(this.firestore,md(this._delegate,function $V(n){return xN("limitToLast",n),new WN("limitToLast",n,"L")}(e)))}catch(t){throw Ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new As(this.firestore,md(this._delegate,function HV(...n){return new ZN("startAt",n,!0)}(...e)))}catch(t){throw Ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new As(this.firestore,md(this._delegate,function GV(...n){return new ZN("startAfter",n,!1)}(...e)))}catch(t){throw Ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new As(this.firestore,md(this._delegate,function qV(...n){return new KN("endBefore",n,!1)}(...e)))}catch(t){throw Ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new As(this.firestore,md(this._delegate,function zV(...n){return new KN("endAt",n,!0)}(...e)))}catch(t){throw Ts(t,"endAt()","Query.endAt()")}}isEqual(e){return RN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function XV(n){n=ln(n,is);const e=ln(n.firestore,nr),t=Ur(e),r=new Ff(e);return function cV(n,e){const t=new mi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,u,c){try{const f=yield NC(i,u,!0),_=new dN(u,f._i),b=_.Wu(f.documents),A=_.applyChanges(b,!1);c.resolve(A.snapshot)}catch(f){const _=im(f,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield IM(n),e,t);var r})),t.promise}(t,n._query).then(i=>new gd(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function eU(n){n=ln(n,is);const e=ln(n.firestore,nr),t=Ur(e),r=new Ff(e);return DN(t,n._query,{source:"server"}).then(i=>new gd(e,r,n,i))}(this._delegate):function JV(n){n=ln(n,is);const e=ln(n.firestore,nr),t=Ur(e),r=new Ff(e);return zN(n._query),DN(t,n._query).then(i=>new gd(e,r,n,i))}(this._delegate),t.then(r=>new VM(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=cR(e),r=dR(e,i=>new VM(this.firestore,new gd(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return rR(this._delegate,t,r)}withConverter(e){return new As(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}class mU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class VM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new As(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Jv(this._firestore,r))})}isEqual(e){return qN(this._delegate,e._delegate)}}class cm extends As{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ha(this.firestore,e):null}doc(e){try{return new ha(this.firestore,void 0===e?$C(this._delegate):$C(this._delegate,e))}catch(t){throw Ts(t,"doc()","CollectionReference.doc()")}}add(e){return function nU(n,e){const t=ln(n.firestore,nr),r=$C(n),i=KC(n.converter,e);return lm(t,[qC(Nf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Lr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ha(this.firestore,t))}isEqual(e){return NN(this._delegate,e._delegate)}withConverter(e){return new cm(this.firestore,this._delegate.withConverter(e?Lf.getInstance(this.firestore,e):null))}}function Vf(n){return ln(n,Jn)}class UM{constructor(...e){this._delegate=new Ul(...e)}static documentId(){return new UM(Xr.keyField().canonicalString())}isEqual(e){return(e=(0,Wt.m9)(e))instanceof Ul&&this._delegate._internalPath.isEqual(e._internalPath)}}class Uf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function aU(){return new MM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Uf(e)}static delete(){const e=function oU(){return new zv("deleteField")}();return e._methodName="FieldValue.delete",new Uf(e)}static arrayUnion(...e){const t=function uU(...n){return new OV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Uf(t)}static arrayRemove(...e){const t=function lU(...n){return new PV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Uf(t)}static increment(e){const t=function cU(n){return new NV("increment",n)}(e);return t._methodName="FieldValue.increment",new Uf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const yU={Firestore:aR,GeoPoint:HC,Timestamp:Dr,Blob:Yv,Transaction:uR,WriteBatch:lR,DocumentReference:ha,DocumentSnapshot:Qv,Query:As,QueryDocumentSnapshot:Jv,QuerySnapshot:VM,CollectionReference:cm,FieldPath:UM,FieldValue:Uf,setLogLevel:function gU(n){!function fk(n){id.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function hR(n,e){return function EU(n,e=eA.z){return new ms.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function BM(n,e){return hR(n,e).pipe((0,Et.U)(t=>({payload:t,type:"query"})))}function QC(n,e){return BM(n,e).pipe(fh(void 0),Wh(),(0,Et.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const _=i.find(A=>A.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function fR(n,e,t){return QC(n,t).pipe(Vc((r,i)=>function bU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function CU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return jM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return jM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function tA(n,e=uh.y){return n=null!=n?n:pO,(0,ns.e)((t,r)=>{let i,u=!0;t.subscribe((0,Wn.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,Et.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function jM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function pR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function vU(n){(function _U(n,e){n.INTERNAL.registerComponent(new Qp.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},yU)))})(n,(e,t)=>new aR(e,t,new pU)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(gO.Z);class gR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=QC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Et.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(fh(void 0),Wh(),Va(([r,i])=>i.length>0||!r),(0,Et.U)(([r,i])=>i),wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pR(e);return fR(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return BM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),wn.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(wn.iC)}add(e){return this.ref.add(e)}doc(e){return new mR(this.ref.doc(e),this.afs)}}class mR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=vR(r,t);return new gR(i,u,this.afs)}snapshotChanges(){return function wU(n,e){return hR(n,e).pipe(fh(void 0),Wh(),(0,Et.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Et.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Tn.D)(this.ref.get(e)).pipe(wn.iC)}}class IU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?QC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Va(t=>t.length>0),wn.iC):QC(this.query,this.afs.schedulers.outsideAngular).pipe(wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Vc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pR(e);return fR(this.query,t,this.afs.schedulers.outsideAngular).pipe(wn.iC)}valueChanges(e={}){return BM(this.query,this.afs.schedulers.outsideAngular).pipe((0,Et.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),wn.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(wn.iC)}}const yR=new h.OlP("angularfire2.enableFirestorePersistence"),_R=new h.OlP("angularfire2.firestore.persistenceSettings"),DU=new h.OlP("angularfire2.firestore.settings"),TU=new h.OlP("angularfire2.firestore.use-emulator");function vR(n,e=(t=>t)){return{query:e(n),ref:n}}let AU=(()=>{class n{constructor(t,r,i,u,c,f,_,b,A,x,V,W,Y,_e,Ue,yt,_t){this.schedulers=_;const Ct=(0,Ys.on)(t,f,r),ht=A;x&&vb(Ct,f,V,Y,_e,Ue,W,yt),[this.firestore,this.persistenceEnabled$]=(0,Ys.cc)(`${Ct.name}.firestore`,"AngularFirestore",Ct.name,()=>{const Vt=f.runOutsideAngular(()=>Ct.firestore());if(u&&Vt.settings(u),ht&&Vt.useEmulator(...ht),i&&!Er(c)){const Qt=()=>{try{return(0,Tn.D)(Vt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(bn){return"undefined"!=typeof console&&console.warn(bn),Tt(!1)}};return[Vt,f.runOutsideAngular(Qt)]}return[Vt,Tt(!1)]},[u,ht,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=vR(i,r),f=this.schedulers.ngZone.run(()=>u);return new gR(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new IU(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new mR(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ys.Dh),h.LFG(Ys.xv,8),h.LFG(yR,8),h.LFG(DU,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(wn.HU),h.LFG(_R,8),h.LFG(TU,8),h.LFG(vg,8),h.LFG(Gh,8),h.LFG(P_,8),h.LFG(_b,8),h.LFG(yg,8),h.LFG(_g,8),h.LFG(qT,8),h.LFG(ug,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),SU=(()=>{class n{constructor(){O_.Z.registerVersion("angularfire",wn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:yR,useValue:!0},{provide:_R,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[AU]}),n})();O_.Z.initializeApp(zh_firebase);let MU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[fO]}),n.\u0275inj=h.cJS({providers:[],imports:[[au,Ob,Si,Eb,SU,Ys.hO.initializeApp(zh_firebase),r_(()=>bx(zh_firebase)),_T(()=>w_()),qI,$h.forRoot({positionClass:"toast-bottom-right"})]]}),n})();(0,h.G48)(),rc().bootstrapModule(MU).catch(n=>console.error(n))},5867:(et,be,N)=>{N.d(be,{Mq:()=>h.getApp,C6:()=>h.getApps,ZF:()=>h.initializeApp,KN:()=>h.registerVersion});var h=N(9681);(0,h.registerVersion)("firebase","9.8.1","app")},127:(et,be,N)=>{N.d(be,{Z:()=>h.Z});var h=N(3942);h.Z.registerVersion("firebase","9.8.1","app-compat")},5881:(et,be,N)=>{N.r(be);var h=N(5861),L=N(3942),P=N(198),ie=N(2090),de=(N(9681),N(1877),N(4859));function ae(){return window}function B(){return(B=(0,h.Z)(function*(ue,Z,q){var Ae;const{BuildInfo:qe}=ae();(0,P.aq)(Z.sessionId,"AuthEvent did not contain a session ID");const ot=yield De(Z.sessionId),Mt={};return(0,P.ar)()?Mt.ibi=qe.packageName:(0,P.as)()?Mt.apn=qe.packageName:(0,P.at)(ue,"operation-not-supported-in-this-environment"),qe.displayName&&(Mt.appDisplayName=qe.displayName),Mt.sessionId=ot,(0,P.au)(ue,q,Z.type,void 0,null!==(Ae=Z.eventId)&&void 0!==Ae?Ae:void 0,Mt)})).apply(this,arguments)}function He(){return(He=(0,h.Z)(function*(ue){const{BuildInfo:Z}=ae(),q={};(0,P.ar)()?q.iosBundleId=Z.packageName:(0,P.as)()?q.androidPackageName=Z.packageName:(0,P.at)(ue,"operation-not-supported-in-this-environment"),yield(0,P.av)(ue,q)})).apply(this,arguments)}function tt(){return(tt=(0,h.Z)(function*(ue,Z,q){const{cordova:Ae}=ae();let qe=()=>{};try{yield new Promise((ot,Mt)=>{let Kt=null;function Ut(){var Bt;ot();const _r=null===(Bt=Ae.plugins.browsertab)||void 0===Bt?void 0:Bt.close;"function"==typeof _r&&_r(),"function"==typeof(null==q?void 0:q.close)&&q.close()}function Un(){Kt||(Kt=window.setTimeout(()=>{Mt((0,P.aw)(ue,"redirect-cancelled-by-user"))},2e3))}function Br(){"visible"===(null==document?void 0:document.visibilityState)&&Un()}Z.addPassiveListener(Ut),document.addEventListener("resume",Un,!1),(0,P.as)()&&document.addEventListener("visibilitychange",Br,!1),qe=()=>{Z.removePassiveListener(Ut),document.removeEventListener("resume",Un,!1),document.removeEventListener("visibilitychange",Br,!1),Kt&&window.clearTimeout(Kt)}})}finally{qe()}})).apply(this,arguments)}function De(ue){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,h.Z)(function*(ue){const Z=Ze(ue),q=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array(q)).map(qe=>qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(ue){if((0,P.aq)(/[0-9a-zA-Z]+/.test(ue),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ue);const Z=new ArrayBuffer(ue.length),q=new Uint8Array(Z);for(let Ae=0;Ae<ue.length;Ae++)q[Ae]=ue.charCodeAt(Ae);return q}class Pe extends P.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach(q=>q(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,h.Z)(function*(){yield Z.initPromise})()}}function ne(ue){return he.apply(this,arguments)}function he(){return(he=(0,h.Z)(function*(ue){const Z=yield re()._get(se(ue));return Z&&(yield re()._remove(se(ue))),Z})).apply(this,arguments)}function K(){const ue=[],Z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let q=0;q<20;q++){const Ae=Math.floor(Math.random()*Z.length);ue.push(Z.charAt(Ae))}return ue.join("")}function re(){return(0,P.ay)(P.b)}function se(ue){return(0,P.az)("authEvent",ue.config.apiKey,ue.name)}function Ve(ue){if(!(null==ue?void 0:ue.includes("?")))return{};const[Z,...q]=ue.split("?");return(0,ie.zd)(q.join("?"))}function We(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function $t(){var ue;return(null===(ue=null==self?void 0:self.location)||void 0===ue?void 0:ue.protocol)||null}function In(ue=(0,ie.z$)()){return!("file:"!==$t()&&"ionic:"!==$t()||!ue.toLowerCase().match(/iphone|ipad|ipod|android/))}function ti(){try{const ue=self.localStorage,Z=P.aI();if(ue)return ue.setItem(Z,"1"),ue.removeItem(Z),!function $i(ue=(0,ie.z$)()){return function mr(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Sn(ue=(0,ie.z$)()){return/Edge\/\d+/.test(ue)}(ue)}()||(0,ie.hl)()}catch(ue){return wi()&&(0,ie.hl)()}return!1}function wi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hn(){return(function tn(){return"http:"===$t()||"https:"===$t()}()||(0,ie.ru)()||In())&&!function ji(){return(0,ie.b$)()||(0,ie.UG)()}()&&ti()&&!wi()}function Hi(){return In()&&"undefined"!=typeof document}function Ar(){return(Ar=(0,h.Z)(function*(){return!!Hi()&&new Promise(ue=>{const Z=setTimeout(()=>{ue(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),ue(!0)})})})).apply(this,arguments)}const nn={LOCAL:"local",NONE:"none",SESSION:"session"},yr=P.ax,rr="persistence";function Dn(ue){return ir.apply(this,arguments)}function ir(){return(ir=(0,h.Z)(function*(ue){yield ue._initializationPromise;const Z=Zt(),q=P.az(rr,ue.config.apiKey,ue.name);Z&&Z.setItem(q,ue._getPersistence())})).apply(this,arguments)}function Zt(){var ue;try{return(null===(ue=function Cn(){return"undefined"!=typeof window?window:null}())||void 0===ue?void 0:ue.sessionStorage)||null}catch(Z){return null}}const ut=P.ax;class rt{constructor(){this.browserResolver=P.ay(P.k),this.cordovaResolver=P.ay(class Xt{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(Z){var q=this;return(0,h.Z)(function*(){const Ae=Z._key();let qe=q.eventManagers.get(Ae);return qe||(qe=new Pe(Z),q.eventManagers.set(Ae,qe),q.attachCallbackListeners(Z,qe)),qe})()}_openPopup(Z){(0,P.at)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,q,Ae,qe){var ot=this;return(0,h.Z)(function*(){!function Ee(ue){var Z,q,Ae,qe,ot,Mt,Kt,Ut,Un,Br;const Bt=ae();(0,P.ax)("function"==typeof(null===(Z=null==Bt?void 0:Bt.universalLinks)||void 0===Z?void 0:Z.subscribe),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(void 0!==(null===(q=null==Bt?void 0:Bt.BuildInfo)||void 0===q?void 0:q.packageName),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(ot=null===(qe=null===(Ae=null==Bt?void 0:Bt.cordova)||void 0===Ae?void 0:Ae.plugins)||void 0===qe?void 0:qe.browsertab)||void 0===ot?void 0:ot.openUrl),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Ut=null===(Kt=null===(Mt=null==Bt?void 0:Bt.cordova)||void 0===Mt?void 0:Mt.plugins)||void 0===Kt?void 0:Kt.browsertab)||void 0===Ut?void 0:Ut.isAvailable),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Br=null===(Un=null==Bt?void 0:Bt.cordova)||void 0===Un?void 0:Un.InAppBrowser)||void 0===Br?void 0:Br.open),ue,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const Mt=yield ot._initialize(Z);yield Mt.initialized(),Mt.resetRedirect(),(0,P.aD)(),yield ot._originValidation(Z);const Kt=function Ce(ue,Z,q=null){return{type:Z,eventId:q,urlResponse:null,sessionId:K(),postBody:null,tenantId:ue.tenantId,error:(0,P.aw)(ue,"no-auth-event")}}(Z,Ae,qe);yield function Ge(ue,Z){return re()._set(se(ue),Z)}(Z,Kt);const Ut=yield function H(ue,Z,q){return B.apply(this,arguments)}(Z,Kt,q),Un=yield function ke(ue){const{cordova:Z}=ae();return new Promise(q=>{Z.plugins.browsertab.isAvailable(Ae=>{let qe=null;Ae?Z.plugins.browsertab.openUrl(ue):qe=Z.InAppBrowser.open(ue,(0,P.ap)()?"_blank":"_system","location=yes"),q(qe)})})}(Ut);return function Oe(ue,Z,q){return tt.apply(this,arguments)}(Z,Mt,Un)})()}_isIframeWebStorageSupported(Z,q){throw new Error("Method not implemented.")}_originValidation(Z){const q=Z._key();return this.originValidationPromises[q]||(this.originValidationPromises[q]=function Q(ue){return He.apply(this,arguments)}(Z)),this.originValidationPromises[q]}attachCallbackListeners(Z,q){const{universalLinks:Ae,handleOpenURL:qe,BuildInfo:ot}=ae(),Mt=setTimeout((0,h.Z)(function*(){yield ne(Z),q.onEvent(We())}),500),Kt=function(){var Br=(0,h.Z)(function*(Bt){clearTimeout(Mt);const _r=yield ne(Z);let qi=null;_r&&(null==Bt?void 0:Bt.url)&&(qi=function Ie(ue,Z){var q,Ae;const qe=function le(ue){const Z=Ve(ue),q=Z.link?decodeURIComponent(Z.link):void 0,Ae=Ve(q).link,qe=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return Ve(qe).link||qe||Ae||q||ue}(Z);if(qe.includes("/__/auth/callback")){const ot=Ve(qe),Mt=ot.firebaseError?function ye(ue){try{return JSON.parse(ue)}catch(Z){return null}}(decodeURIComponent(ot.firebaseError)):null,Kt=null===(Ae=null===(q=null==Mt?void 0:Mt.code)||void 0===q?void 0:q.split("auth/"))||void 0===Ae?void 0:Ae[1],Ut=Kt?(0,P.aw)(Kt):null;return Ut?{type:ue.type,eventId:ue.eventId,tenantId:ue.tenantId,error:Ut,urlResponse:null,sessionId:null,postBody:null}:{type:ue.type,eventId:ue.eventId,tenantId:ue.tenantId,sessionId:ue.sessionId,urlResponse:qe,postBody:null}}return null}(_r,Bt.url)),q.onEvent(qi||We())});return function(_r){return Br.apply(this,arguments)}}();void 0!==Ae&&"function"==typeof Ae.subscribe&&Ae.subscribe(null,Kt);const Ut=qe,Un=`${ot.packageName.toLowerCase()}://`;ae().handleOpenURL=function(){var Br=(0,h.Z)(function*(Bt){if(Bt.toLowerCase().startsWith(Un)&&Kt({url:Bt}),"function"==typeof Ut)try{Ut(Bt)}catch(_r){console.error(_r)}});return function(Bt){return Br.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(Z){var q=this;return(0,h.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,q,Ae,qe){var ot=this;return(0,h.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openPopup(Z,q,Ae,qe)})()}_openRedirect(Z,q,Ae,qe){var ot=this;return(0,h.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openRedirect(Z,q,Ae,qe)})()}_isIframeWebStorageSupported(Z,q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,q)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return Hi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ut(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,h.Z)(function*(){if(Z.underlyingResolver)return;const q=yield function ft(){return Ar.apply(this,arguments)}();Z.underlyingResolver=q?Z.cordovaResolver:Z.browserResolver})()}}function ni(ue){return ue.unwrap()}function Ht(ue){return Nn(ue)}function Nn(ue){const{_tokenResponse:Z}=ue instanceof ie.ZR?ue.customData:ue;if(!Z)return null;if(!(ue instanceof ie.ZR)&&"temporaryProof"in Z&&"phoneNumber"in Z)return P.P.credentialFromResult(ue);const q=Z.providerId;if(!q||q===P.o.PASSWORD)return null;let Ae;switch(q){case P.o.GOOGLE:Ae=P.Q;break;case P.o.FACEBOOK:Ae=P.N;break;case P.o.GITHUB:Ae=P.T;break;case P.o.TWITTER:Ae=P.W;break;default:const{oauthIdToken:qe,oauthAccessToken:ot,oauthTokenSecret:Mt,pendingToken:Kt,nonce:Ut}=Z;return ot||Mt||qe||Kt?Kt?q.startsWith("saml.")?P.aL._create(q,Kt):P.J._fromParams({providerId:q,signInMethod:q,pendingToken:Kt,idToken:qe,accessToken:ot}):new P.U(q).credential({idToken:qe,accessToken:ot,rawNonce:Ut}):null}return ue instanceof ie.ZR?Ae.credentialFromError(ue):Ae.credentialFromResult(ue)}function dn(ue,Z){return Z.catch(q=>{throw q instanceof ie.ZR&&function Gi(ue,Z){var q;const Ae=null===(q=Z.customData)||void 0===q?void 0:q._tokenResponse;if("auth/multi-factor-auth-required"===Z.code)Z.resolver=new z(ue,P.an(ue,Z));else if(Ae){const qe=Nn(Z),ot=Z;qe&&(ot.credential=qe,ot.tenantId=Ae.tenantId||void 0,ot.email=Ae.email||void 0,ot.phoneNumber=Ae.phoneNumber||void 0)}}(ue,q),q}).then(q=>{const qe=q.user;return{operationType:q.operationType,credential:Ht(q),additionalUserInfo:P.al(q),user:ve.getOrCreate(qe)}})}function U(ue,Z){return G.apply(this,arguments)}function G(){return(G=(0,h.Z)(function*(ue,Z){const q=yield Z;return{verificationId:q.verificationId,confirm:Ae=>dn(ue,q.confirm(Ae))}})).apply(this,arguments)}class z{constructor(Z,q){this.resolver=q,this.auth=function ri(ue){return ue.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return dn(ni(this.auth),this.resolver.resolveSignIn(Z))}}class ve{constructor(Z){this._delegate=Z,this.multiFactor=P.ao(Z)}static getOrCreate(Z){return ve.USER_MAP.has(Z)||ve.USER_MAP.set(Z,new ve(Z)),ve.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var q=this;return(0,h.Z)(function*(){return dn(q.auth,P.Z(q._delegate,Z))})()}linkWithPhoneNumber(Z,q){var Ae=this;return(0,h.Z)(function*(){return U(Ae.auth,P.l(Ae._delegate,Z,q))})()}linkWithPopup(Z){var q=this;return(0,h.Z)(function*(){return dn(q.auth,P.d(q._delegate,Z,rt))})()}linkWithRedirect(Z){var q=this;return(0,h.Z)(function*(){return yield Dn(P.aE(q.auth)),P.g(q._delegate,Z,rt)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var q=this;return(0,h.Z)(function*(){return dn(q.auth,P._(q._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,q){return U(this.auth,P.r(this._delegate,Z,q))}reauthenticateWithPopup(Z){return dn(this.auth,P.e(this._delegate,Z,rt))}reauthenticateWithRedirect(Z){var q=this;return(0,h.Z)(function*(){return yield Dn(P.aE(q.auth)),P.h(q._delegate,Z,rt)})()}sendEmailVerification(Z){return P.ab(this._delegate,Z)}unlink(Z){var q=this;return(0,h.Z)(function*(){return yield P.ak(q._delegate,Z),q})()}updateEmail(Z){return P.ag(this._delegate,Z)}updatePassword(Z){return P.ah(this._delegate,Z)}updatePhoneNumber(Z){return P.u(this._delegate,Z)}updateProfile(Z){return P.af(this._delegate,Z)}verifyBeforeUpdateEmail(Z,q){return P.ac(this._delegate,Z,q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ve.USER_MAP=new WeakMap;const $=P.ax;let X=(()=>{class ue{constructor(q,Ae){if(this.app=q,Ae.isInitialized())return this._delegate=Ae.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:qe}=q.options;$(qe,"invalid-api-key",{appName:q.name}),$(qe,"invalid-api-key",{appName:q.name});const ot="undefined"!=typeof window?rt:void 0;this._delegate=Ae.initialize({options:{persistence:Qe(qe,q.name),popupRedirectResolver:ot}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ve.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(q){this._delegate.languageCode=q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(q){this._delegate.tenantId=q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(q,Ae){P.G(this._delegate,q,Ae)}applyActionCode(q){return P.a2(this._delegate,q)}checkActionCode(q){return P.a3(this._delegate,q)}confirmPasswordReset(q,Ae){return P.a1(this._delegate,q,Ae)}createUserWithEmailAndPassword(q,Ae){var qe=this;return(0,h.Z)(function*(){return dn(qe._delegate,P.a5(qe._delegate,q,Ae))})()}fetchProvidersForEmail(q){return this.fetchSignInMethodsForEmail(q)}fetchSignInMethodsForEmail(q){return P.aa(this._delegate,q)}isSignInWithEmailLink(q){return P.a8(this._delegate,q)}getRedirectResult(){var q=this;return(0,h.Z)(function*(){$(Hn(),q._delegate,"operation-not-supported-in-this-environment");const Ae=yield P.j(q._delegate,rt);return Ae?dn(q._delegate,Promise.resolve(Ae)):{credential:null,user:null}})()}addFrameworkForLogging(q){!function cn(ue,Z){(0,P.aE)(ue)._logFramework(Z)}(this._delegate,q)}onAuthStateChanged(q,Ae,qe){const{next:ot,error:Mt,complete:Kt}=Ne(q,Ae,qe);return this._delegate.onAuthStateChanged(ot,Mt,Kt)}onIdTokenChanged(q,Ae,qe){const{next:ot,error:Mt,complete:Kt}=Ne(q,Ae,qe);return this._delegate.onIdTokenChanged(ot,Mt,Kt)}sendSignInLinkToEmail(q,Ae){return P.a7(this._delegate,q,Ae)}sendPasswordResetEmail(q,Ae){return P.a0(this._delegate,q,Ae||void 0)}setPersistence(q){var Ae=this;return(0,h.Z)(function*(){let qe;switch(function Sr(ue,Z){yr(Object.values(nn).includes(Z),ue,"invalid-persistence-type"),(0,ie.b$)()?yr(Z!==nn.SESSION,ue,"unsupported-persistence-type"):(0,ie.UG)()?yr(Z===nn.NONE,ue,"unsupported-persistence-type"):wi()?yr(Z===nn.NONE||Z===nn.LOCAL&&(0,ie.hl)(),ue,"unsupported-persistence-type"):yr(Z===nn.NONE||ti(),ue,"unsupported-persistence-type")}(Ae._delegate,q),q){case nn.SESSION:qe=P.a;break;case nn.LOCAL:qe=(yield P.ay(P.i)._isAvailable())?P.i:P.b;break;case nn.NONE:qe=P.L;break;default:return P.at("argument-error",{appName:Ae._delegate.name})}return Ae._delegate.setPersistence(qe)})()}signInAndRetrieveDataWithCredential(q){return this.signInWithCredential(q)}signInAnonymously(){return dn(this._delegate,P.X(this._delegate))}signInWithCredential(q){return dn(this._delegate,P.Y(this._delegate,q))}signInWithCustomToken(q){return dn(this._delegate,P.$(this._delegate,q))}signInWithEmailAndPassword(q,Ae){return dn(this._delegate,P.a6(this._delegate,q,Ae))}signInWithEmailLink(q,Ae){return dn(this._delegate,P.a9(this._delegate,q,Ae))}signInWithPhoneNumber(q,Ae){return U(this._delegate,P.s(this._delegate,q,Ae))}signInWithPopup(q){var Ae=this;return(0,h.Z)(function*(){return $(Hn(),Ae._delegate,"operation-not-supported-in-this-environment"),dn(Ae._delegate,P.c(Ae._delegate,q,rt))})()}signInWithRedirect(q){var Ae=this;return(0,h.Z)(function*(){return $(Hn(),Ae._delegate,"operation-not-supported-in-this-environment"),yield Dn(Ae._delegate),P.f(Ae._delegate,q,rt)})()}updateCurrentUser(q){return this._delegate.updateCurrentUser(q)}verifyPasswordResetCode(q){return P.a4(this._delegate,q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ue.Persistence=nn,ue})();function Ne(ue,Z,q){let Ae=ue;"function"!=typeof ue&&({next:Ae,error:Z,complete:q}=ue);const qe=Ae;return{next:Mt=>qe(Mt&&ve.getOrCreate(Mt)),error:Z,complete:q}}function Qe(ue,Z){const q=function xs(ue,Z){const q=Zt();if(!q)return[];const Ae=P.az(rr,ue,Z);switch(q.getItem(Ae)){case nn.NONE:return[P.L];case nn.LOCAL:return[P.i,P.a];case nn.SESSION:return[P.a];default:return[]}}(ue,Z);if("undefined"!=typeof self&&!q.includes(P.i)&&q.push(P.i),"undefined"!=typeof window)for(const Ae of[P.b,P.a])q.includes(Ae)||q.push(Ae);return q.includes(P.L)||q.push(P.L),q}class dt{constructor(){this.providerId="phone",this._delegate=new P.P(ni(L.Z.auth()))}static credential(Z,q){return P.P.credential(Z,q)}verifyPhoneNumber(Z,q){return this._delegate.verifyPhoneNumber(Z,q)}unwrap(){return this._delegate}}dt.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,dt.PROVIDER_ID=P.P.PROVIDER_ID;const Ot=P.ax;class on{constructor(Z,q,Ae=L.Z.app()){var qe;Ot(null===(qe=Ae.options)||void 0===qe?void 0:qe.apiKey,"invalid-api-key",{appName:Ae.name}),this._delegate=new P.R(Z,q,Ae.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Gn(ue){ue.INTERNAL.registerComponent(new de.wA("auth-compat",Z=>{const q=Z.getProvider("app-compat").getImmediate(),Ae=Z.getProvider("auth");return new X(q,Ae)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:dt,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:on,TwitterAuthProvider:P.W,Auth:X,AuthCredential:P.H,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ue.registerVersion("@firebase/auth-compat","0.2.14")}(L.Z)},9751:(et,be,N)=>{N.d(be,{y:()=>ae});var h=N(2961),L=N(727),P=N(8822),ie=N(9635),oe=N(2416),fe=N(576),de=N(2806);let ae=(()=>{class Q{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const Oe=new Q;return Oe.source=this,Oe.operator=ke,Oe}subscribe(ke,Oe,tt){const Ee=function B(Q){return Q&&Q instanceof h.Lv||function H(Q){return Q&&(0,fe.m)(Q.next)&&(0,fe.m)(Q.error)&&(0,fe.m)(Q.complete)}(Q)&&(0,L.Nn)(Q)}(ke)?ke:new h.Hp(ke,Oe,tt);return(0,de.x)(()=>{const{operator:De,source:Ke}=this;Ee.add(De?De.call(Ee,Ke):Ke?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(ke){try{return this._subscribe(ke)}catch(Oe){ke.error(Oe)}}forEach(ke,Oe){return new(Oe=ge(Oe))((tt,Ee)=>{const De=new h.Hp({next:Ke=>{try{ke(Ke)}catch(Ze){Ee(Ze),De.unsubscribe()}},error:Ee,complete:tt});this.subscribe(De)})}_subscribe(ke){var Oe;return null===(Oe=this.source)||void 0===Oe?void 0:Oe.subscribe(ke)}[P.L](){return this}pipe(...ke){return(0,ie.U)(ke)(this)}toPromise(ke){return new(ke=ge(ke))((Oe,tt)=>{let Ee;this.subscribe(De=>Ee=De,De=>tt(De),()=>Oe(Ee))})}}return Q.create=He=>new Q(He),Q})();function ge(Q){var He;return null!==(He=null!=Q?Q:oe.v.Promise)&&void 0!==He?He:Promise}},7579:(et,be,N)=>{N.d(be,{x:()=>de});var h=N(9751),L=N(727);const ie=(0,N(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=N(8737),fe=N(2806);let de=(()=>{class ge extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const Q=new ae(this,this);return Q.operator=B,Q}_throwIfClosed(){if(this.closed)throw new ie}next(B){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(B)}})}error(B){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:Q}=this;for(;Q.length;)Q.shift().error(B)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:Q,isStopped:He,observers:ke}=this;return Q||He?L.Lc:(this.currentObservers=null,ke.push(B),new L.w0(()=>{this.currentObservers=null,(0,oe.P)(ke,B)}))}_checkFinalizedStatuses(B){const{hasError:Q,thrownError:He,isStopped:ke}=this;Q?B.error(He):ke&&B.complete()}asObservable(){const B=new h.y;return B.source=this,B}}return ge.create=(H,B)=>new ae(H,B),ge})();class ae extends de{constructor(H,B){super(),this.destination=H,this.source=B}next(H){var B,Q;null===(Q=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===Q||Q.call(B,H)}error(H){var B,Q;null===(Q=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===Q||Q.call(B,H)}complete(){var H,B;null===(B=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===B||B.call(H)}_subscribe(H){var B,Q;return null!==(Q=null===(B=this.source)||void 0===B?void 0:B.subscribe(H))&&void 0!==Q?Q:L.Lc}}},2961:(et,be,N)=>{N.d(be,{Hp:()=>tt,Lv:()=>Q});var h=N(576),L=N(727),P=N(2416),ie=N(7849);function oe(){}const fe=ge("C",void 0,void 0);function ge(Fe,Pe,Ce){return{kind:Fe,value:Pe,error:Ce}}var H=N(3410),B=N(2806);class Q extends L.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,L.Nn)(Pe)&&Pe.add(this)):this.destination=Ze}static create(Pe,Ce,Ge){return new tt(Pe,Ce,Ge)}next(Pe){this.isStopped?Ke(function ae(Fe){return ge("N",Fe,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?Ke(function de(Fe){return ge("E",void 0,Fe)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?Ke(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function ke(Fe,Pe){return He.call(Fe,Pe)}class Oe{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(Pe)}catch(Ge){Ee(Ge)}}error(Pe){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(Pe)}catch(Ge){Ee(Ge)}else Ee(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Ce){Ee(Ce)}}}class tt extends Q{constructor(Pe,Ce,Ge){let ne;if(super(),(0,h.m)(Pe)||!Pe)ne={next:null!=Pe?Pe:void 0,error:null!=Ce?Ce:void 0,complete:null!=Ge?Ge:void 0};else{let he;this&&P.v.useDeprecatedNextContext?(he=Object.create(Pe),he.unsubscribe=()=>this.unsubscribe(),ne={next:Pe.next&&ke(Pe.next,he),error:Pe.error&&ke(Pe.error,he),complete:Pe.complete&&ke(Pe.complete,he)}):ne=Pe}this.destination=new Oe(ne)}}function Ee(Fe){P.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Fe):(0,ie.h)(Fe)}function Ke(Fe,Pe){const{onStoppedNotification:Ce}=P.v;Ce&&H.z.setTimeout(()=>Ce(Fe,Pe))}const Ze={closed:!0,next:oe,error:function De(Fe){throw Fe},complete:oe}},727:(et,be,N)=>{N.d(be,{Lc:()=>fe,w0:()=>oe,Nn:()=>de});var h=N(576);const P=(0,N(3888).d)(ge=>function(B){ge(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((Q,He)=>`${He+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ie=N(8737);class oe{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const ke of B)ke.remove(this);else B.remove(this);const{initialTeardown:Q}=this;if((0,h.m)(Q))try{Q()}catch(ke){H=ke instanceof P?ke.errors:[ke]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const ke of He)try{ae(ke)}catch(Oe){H=null!=H?H:[],Oe instanceof P?H=[...H,...Oe.errors]:H.push(Oe)}}if(H)throw new P(H)}}add(H){var B;if(H&&H!==this)if(this.closed)ae(H);else{if(H instanceof oe){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(H)}}_hasParent(H){const{_parentage:B}=this;return B===H||Array.isArray(B)&&B.includes(H)}_addParent(H){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(H),B):B?[B,H]:H}_removeParent(H){const{_parentage:B}=this;B===H?this._parentage=null:Array.isArray(B)&&(0,ie.P)(B,H)}remove(H){const{_finalizers:B}=this;B&&(0,ie.P)(B,H),H instanceof oe&&H._removeParent(this)}}oe.EMPTY=(()=>{const ge=new oe;return ge.closed=!0,ge})();const fe=oe.EMPTY;function de(ge){return ge instanceof oe||ge&&"closed"in ge&&(0,h.m)(ge.remove)&&(0,h.m)(ge.add)&&(0,h.m)(ge.unsubscribe)}function ae(ge){(0,h.m)(ge)?ge():ge.unsubscribe()}},2416:(et,be,N)=>{N.d(be,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(et,be,N)=>{N.d(be,{E:()=>L});const L=new(N(9751).y)(oe=>oe.complete())},8996:(et,be,N)=>{N.d(be,{D:()=>Pe});var h=N(8421),L=N(5363),P=N(9468),fe=N(9751),ae=N(2202),ge=N(576),H=N(9672);function Q(Ce,Ge){if(!Ce)throw new Error("Iterable cannot be null");return new fe.y(ne=>{(0,H.f)(ne,Ge,()=>{const he=Ce[Symbol.asyncIterator]();(0,H.f)(ne,Ge,()=>{he.next().then(Ie=>{Ie.done?ne.complete():ne.next(Ie.value)})},0,!0)})})}var He=N(3670),ke=N(8239),Oe=N(1144),tt=N(6495),Ee=N(2206),De=N(4532),Ke=N(3260);function Pe(Ce,Ge){return Ge?function Fe(Ce,Ge){if(null!=Ce){if((0,He.c)(Ce))return function ie(Ce,Ge){return(0,h.Xf)(Ce).pipe((0,P.R)(Ge),(0,L.Q)(Ge))}(Ce,Ge);if((0,Oe.z)(Ce))return function de(Ce,Ge){return new fe.y(ne=>{let he=0;return Ge.schedule(function(){he===Ce.length?ne.complete():(ne.next(Ce[he++]),ne.closed||this.schedule())})})}(Ce,Ge);if((0,ke.t)(Ce))return function oe(Ce,Ge){return(0,h.Xf)(Ce).pipe((0,P.R)(Ge),(0,L.Q)(Ge))}(Ce,Ge);if((0,Ee.D)(Ce))return Q(Ce,Ge);if((0,tt.T)(Ce))return function B(Ce,Ge){return new fe.y(ne=>{let he;return(0,H.f)(ne,Ge,()=>{he=Ce[ae.h](),(0,H.f)(ne,Ge,()=>{let Ie,K;try{({value:Ie,done:K}=he.next())}catch(re){return void ne.error(re)}K?ne.complete():ne.next(Ie)},0,!0)}),()=>(0,ge.m)(null==he?void 0:he.return)&&he.return()})}(Ce,Ge);if((0,Ke.L)(Ce))return function Ze(Ce,Ge){return Q((0,Ke.Q)(Ce),Ge)}(Ce,Ge)}throw(0,De.z)(Ce)}(Ce,Ge):(0,h.Xf)(Ce)}},8421:(et,be,N)=>{N.d(be,{Xf:()=>He});var h=N(655),L=N(1144),P=N(8239),ie=N(9751),oe=N(3670),fe=N(2206),de=N(4532),ae=N(6495),ge=N(3260),H=N(576),B=N(7849),Q=N(8822);function He(Fe){if(Fe instanceof ie.y)return Fe;if(null!=Fe){if((0,oe.c)(Fe))return function ke(Fe){return new ie.y(Pe=>{const Ce=Fe[Q.L]();if((0,H.m)(Ce.subscribe))return Ce.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,L.z)(Fe))return function Oe(Fe){return new ie.y(Pe=>{for(let Ce=0;Ce<Fe.length&&!Pe.closed;Ce++)Pe.next(Fe[Ce]);Pe.complete()})}(Fe);if((0,P.t)(Fe))return function tt(Fe){return new ie.y(Pe=>{Fe.then(Ce=>{Pe.closed||(Pe.next(Ce),Pe.complete())},Ce=>Pe.error(Ce)).then(null,B.h)})}(Fe);if((0,fe.D)(Fe))return De(Fe);if((0,ae.T)(Fe))return function Ee(Fe){return new ie.y(Pe=>{for(const Ce of Fe)if(Pe.next(Ce),Pe.closed)return;Pe.complete()})}(Fe);if((0,ge.L)(Fe))return function Ke(Fe){return De((0,ge.Q)(Fe))}(Fe)}throw(0,de.z)(Fe)}function De(Fe){return new ie.y(Pe=>{(function Ze(Fe,Pe){var Ce,Ge,ne,he;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,h.KL)(Fe);!(Ge=yield Ce.next()).done;)if(Pe.next(Ge.value),Pe.closed)return}catch(Ie){ne={error:Ie}}finally{try{Ge&&!Ge.done&&(he=Ce.return)&&(yield he.call(Ce))}finally{if(ne)throw ne.error}}Pe.complete()})})(Fe,Pe).catch(Ce=>Pe.error(Ce))})}},6451:(et,be,N)=>{N.d(be,{T:()=>fe});var h=N(8189),L=N(8421),P=N(515),ie=N(7669),oe=N(8996);function fe(...de){const ae=(0,ie.yG)(de),ge=(0,ie._6)(de,1/0),H=de;return H.length?1===H.length?(0,L.Xf)(H[0]):(0,h.J)(ge)((0,oe.D)(H,ae)):P.E}},5403:(et,be,N)=>{N.d(be,{x:()=>L});var h=N(2961);function L(ie,oe,fe,de,ae){return new P(ie,oe,fe,de,ae)}class P extends h.Lv{constructor(oe,fe,de,ae,ge,H){super(oe),this.onFinalize=ge,this.shouldUnsubscribe=H,this._next=fe?function(B){try{fe(B)}catch(Q){oe.error(Q)}}:super._next,this._error=ae?function(B){try{ae(B)}catch(Q){oe.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(B){oe.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var oe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(oe=this.onFinalize)||void 0===oe||oe.call(this))}}}},4004:(et,be,N)=>{N.d(be,{U:()=>P});var h=N(4482),L=N(5403);function P(ie,oe){return(0,h.e)((fe,de)=>{let ae=0;fe.subscribe((0,L.x)(de,ge=>{de.next(ie.call(oe,ge,ae++))}))})}},8189:(et,be,N)=>{N.d(be,{J:()=>P});var h=N(5577),L=N(4671);function P(ie=1/0){return(0,h.z)(L.y,ie)}},5577:(et,be,N)=>{N.d(be,{z:()=>ae});var h=N(4004),L=N(8421),P=N(4482),ie=N(9672),oe=N(5403),de=N(576);function ae(ge,H,B=1/0){return(0,de.m)(H)?ae((Q,He)=>(0,h.U)((ke,Oe)=>H(Q,ke,He,Oe))((0,L.Xf)(ge(Q,He))),B):("number"==typeof H&&(B=H),(0,P.e)((Q,He)=>function fe(ge,H,B,Q,He,ke,Oe,tt){const Ee=[];let De=0,Ke=0,Ze=!1;const Fe=()=>{Ze&&!Ee.length&&!De&&H.complete()},Pe=Ge=>De<Q?Ce(Ge):Ee.push(Ge),Ce=Ge=>{ke&&H.next(Ge),De++;let ne=!1;(0,L.Xf)(B(Ge,Ke++)).subscribe((0,oe.x)(H,he=>{null==He||He(he),ke?Pe(he):H.next(he)},()=>{ne=!0},void 0,()=>{if(ne)try{for(De--;Ee.length&&De<Q;){const he=Ee.shift();Oe?(0,ie.f)(H,Oe,()=>Ce(he)):Ce(he)}Fe()}catch(he){H.error(he)}}))};return ge.subscribe((0,oe.x)(H,Pe,()=>{Ze=!0,Fe()})),()=>{null==tt||tt()}}(Q,He,ge,B)))}},5363:(et,be,N)=>{N.d(be,{Q:()=>ie});var h=N(9672),L=N(4482),P=N(5403);function ie(oe,fe=0){return(0,L.e)((de,ae)=>{de.subscribe((0,P.x)(ae,ge=>(0,h.f)(ae,oe,()=>ae.next(ge),fe),()=>(0,h.f)(ae,oe,()=>ae.complete(),fe),ge=>(0,h.f)(ae,oe,()=>ae.error(ge),fe)))})}},3099:(et,be,N)=>{N.d(be,{B:()=>fe});var h=N(8996),L=N(5698),P=N(7579),ie=N(2961),oe=N(4482);function fe(ae={}){const{connector:ge=(()=>new P.x),resetOnError:H=!0,resetOnComplete:B=!0,resetOnRefCountZero:Q=!0}=ae;return He=>{let ke=null,Oe=null,tt=null,Ee=0,De=!1,Ke=!1;const Ze=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Fe=()=>{Ze(),ke=tt=null,De=Ke=!1},Pe=()=>{const Ce=ke;Fe(),null==Ce||Ce.unsubscribe()};return(0,oe.e)((Ce,Ge)=>{Ee++,!Ke&&!De&&Ze();const ne=tt=null!=tt?tt:ge();Ge.add(()=>{Ee--,0===Ee&&!Ke&&!De&&(Oe=de(Pe,Q))}),ne.subscribe(Ge),ke||(ke=new ie.Hp({next:he=>ne.next(he),error:he=>{Ke=!0,Ze(),Oe=de(Fe,H,he),ne.error(he)},complete:()=>{De=!0,Ze(),Oe=de(Fe,B),ne.complete()}}),(0,h.D)(Ce).subscribe(ke))})(He)}}function de(ae,ge,...H){return!0===ge?(ae(),null):!1===ge?null:ge(...H).pipe((0,L.q)(1)).subscribe(()=>ae())}},9468:(et,be,N)=>{N.d(be,{R:()=>L});var h=N(4482);function L(P,ie=0){return(0,h.e)((oe,fe)=>{fe.add(P.schedule(()=>oe.subscribe(fe),ie))})}},5698:(et,be,N)=>{N.d(be,{q:()=>ie});var h=N(515),L=N(4482),P=N(5403);function ie(oe){return oe<=0?()=>h.E:(0,L.e)((fe,de)=>{let ae=0;fe.subscribe((0,P.x)(de,ge=>{++ae<=oe&&(de.next(ge),oe<=ae&&de.complete())}))})}},8505:(et,be,N)=>{N.d(be,{b:()=>oe});var h=N(576),L=N(4482),P=N(5403),ie=N(4671);function oe(fe,de,ae){const ge=(0,h.m)(fe)||de||ae?{next:fe,error:de,complete:ae}:fe;return ge?(0,L.e)((H,B)=>{var Q;null===(Q=ge.subscribe)||void 0===Q||Q.call(ge);let He=!0;H.subscribe((0,P.x)(B,ke=>{var Oe;null===(Oe=ge.next)||void 0===Oe||Oe.call(ge,ke),B.next(ke)},()=>{var ke;He=!1,null===(ke=ge.complete)||void 0===ke||ke.call(ge),B.complete()},ke=>{var Oe;He=!1,null===(Oe=ge.error)||void 0===Oe||Oe.call(ge,ke),B.error(ke)},()=>{var ke,Oe;He&&(null===(ke=ge.unsubscribe)||void 0===ke||ke.call(ge)),null===(Oe=ge.finalize)||void 0===Oe||Oe.call(ge)}))}):ie.y}},4408:(et,be,N)=>{N.d(be,{o:()=>oe});var h=N(727);class L extends h.w0{constructor(de,ae){super()}schedule(de,ae=0){return this}}const P={setInterval(fe,de,...ae){const{delegate:ge}=P;return(null==ge?void 0:ge.setInterval)?ge.setInterval(fe,de,...ae):setInterval(fe,de,...ae)},clearInterval(fe){const{delegate:de}=P;return((null==de?void 0:de.clearInterval)||clearInterval)(fe)},delegate:void 0};var ie=N(8737);class oe extends L{constructor(de,ae){super(de,ae),this.scheduler=de,this.work=ae,this.pending=!1}schedule(de,ae=0){if(this.closed)return this;this.state=de;const ge=this.id,H=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(H,ge,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(H,this.id,ae),this}requestAsyncId(de,ae,ge=0){return P.setInterval(de.flush.bind(de,this),ge)}recycleAsyncId(de,ae,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return ae;P.clearInterval(ae)}execute(de,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(de,ae);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ae){let H,ge=!1;try{this.work(de)}catch(B){ge=!0,H=B||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:de,scheduler:ae}=this,{actions:ge}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(ge,this),null!=de&&(this.id=this.recycleAsyncId(ae,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(et,be,N)=>{N.d(be,{v:()=>P});var h=N(6063);class L{constructor(oe,fe=L.now){this.schedulerActionCtor=oe,this.now=fe}schedule(oe,fe=0,de){return new this.schedulerActionCtor(this,oe).schedule(de,fe)}}L.now=h.l.now;class P extends L{constructor(oe,fe=L.now){super(oe,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(oe){const{actions:fe}=this;if(this._active)return void fe.push(oe);let de;this._active=!0;do{if(de=oe.execute(oe.state,oe.delay))break}while(oe=fe.shift());if(this._active=!1,de){for(;oe=fe.shift();)oe.unsubscribe();throw de}}}},4986:(et,be,N)=>{N.d(be,{z:()=>P});var h=N(4408);const P=new(N(7565).v)(h.o)},6063:(et,be,N)=>{N.d(be,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(et,be,N)=>{N.d(be,{z:()=>h});const h={setTimeout(L,P,...ie){const{delegate:oe}=h;return(null==oe?void 0:oe.setTimeout)?oe.setTimeout(L,P,...ie):setTimeout(L,P,...ie)},clearTimeout(L){const{delegate:P}=h;return((null==P?void 0:P.clearTimeout)||clearTimeout)(L)},delegate:void 0}},2202:(et,be,N)=>{N.d(be,{h:()=>L});const L=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(et,be,N)=>{N.d(be,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(et,be,N)=>{N.d(be,{_6:()=>fe,jO:()=>ie,yG:()=>oe});var h=N(576);function P(de){return de[de.length-1]}function ie(de){return(0,h.m)(P(de))?de.pop():void 0}function oe(de){return function L(de){return de&&(0,h.m)(de.schedule)}(P(de))?de.pop():void 0}function fe(de,ae){return"number"==typeof P(de)?de.pop():ae}},8737:(et,be,N)=>{function h(L,P){if(L){const ie=L.indexOf(P);0<=ie&&L.splice(ie,1)}}N.d(be,{P:()=>h})},3888:(et,be,N)=>{function h(L){const ie=L(oe=>{Error.call(oe),oe.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}N.d(be,{d:()=>h})},2806:(et,be,N)=>{N.d(be,{x:()=>P,O:()=>ie});var h=N(2416);let L=null;function P(oe){if(h.v.useDeprecatedSynchronousErrorHandling){const fe=!L;if(fe&&(L={errorThrown:!1,error:null}),oe(),fe){const{errorThrown:de,error:ae}=L;if(L=null,de)throw ae}}else oe()}function ie(oe){h.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=oe)}},9672:(et,be,N)=>{function h(L,P,ie,oe=0,fe=!1){const de=P.schedule(function(){ie(),fe?L.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(L.add(de),!fe)return de}N.d(be,{f:()=>h})},4671:(et,be,N)=>{function h(L){return L}N.d(be,{y:()=>h})},1144:(et,be,N)=>{N.d(be,{z:()=>h});const h=L=>L&&"number"==typeof L.length&&"function"!=typeof L},2206:(et,be,N)=>{N.d(be,{D:()=>L});var h=N(576);function L(P){return Symbol.asyncIterator&&(0,h.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(et,be,N)=>{function h(L){return"function"==typeof L}N.d(be,{m:()=>h})},3670:(et,be,N)=>{N.d(be,{c:()=>P});var h=N(8822),L=N(576);function P(ie){return(0,L.m)(ie[h.L])}},6495:(et,be,N)=>{N.d(be,{T:()=>P});var h=N(2202),L=N(576);function P(ie){return(0,L.m)(null==ie?void 0:ie[h.h])}},8239:(et,be,N)=>{N.d(be,{t:()=>L});var h=N(576);function L(P){return(0,h.m)(null==P?void 0:P.then)}},3260:(et,be,N)=>{N.d(be,{Q:()=>P,L:()=>ie});var h=N(655),L=N(576);function P(oe){return(0,h.FC)(this,arguments,function*(){const de=oe.getReader();try{for(;;){const{value:ae,done:ge}=yield(0,h.qq)(de.read());if(ge)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ae)}}finally{de.releaseLock()}})}function ie(oe){return(0,L.m)(null==oe?void 0:oe.getReader)}},4482:(et,be,N)=>{N.d(be,{A:()=>L,e:()=>P});var h=N(576);function L(ie){return(0,h.m)(null==ie?void 0:ie.lift)}function P(ie){return oe=>{if(L(oe))return oe.lift(function(fe){try{return ie(fe,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(et,be,N)=>{N.d(be,{z:()=>L,U:()=>P});var h=N(4671);function L(...ie){return P(ie)}function P(ie){return 0===ie.length?h.y:1===ie.length?ie[0]:function(fe){return ie.reduce((de,ae)=>ae(de),fe)}}},7849:(et,be,N)=>{N.d(be,{h:()=>P});var h=N(2416),L=N(3410);function P(ie){L.z.setTimeout(()=>{const{onUnhandledError:oe}=h.v;if(!oe)throw ie;oe(ie)})}},4532:(et,be,N)=>{function h(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(be,{z:()=>h})},655:(et,be,N)=>{function ie(K,re){var se={};for(var ye in K)Object.prototype.hasOwnProperty.call(K,ye)&&re.indexOf(ye)<0&&(se[ye]=K[ye]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(ye=Object.getOwnPropertySymbols(K);le<ye.length;le++)re.indexOf(ye[le])<0&&Object.prototype.propertyIsEnumerable.call(K,ye[le])&&(se[ye[le]]=K[ye[le]])}return se}function ae(K,re,se,ye){return new(se||(se=Promise))(function(Ve,ct){function Xt(cn){try{We(ye.next(cn))}catch(Pn){ct(Pn)}}function jt(cn){try{We(ye.throw(cn))}catch(Pn){ct(Pn)}}function We(cn){cn.done?Ve(cn.value):function le(Ve){return Ve instanceof se?Ve:new se(function(ct){ct(Ve)})}(cn.value).then(Xt,jt)}We((ye=ye.apply(K,re||[])).next())})}function Ee(K){return this instanceof Ee?(this.v=K,this):new Ee(K)}function De(K,re,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,ye=se.apply(K,re||[]),Ve=[];return le={},ct("next"),ct("throw"),ct("return"),le[Symbol.asyncIterator]=function(){return this},le;function ct(mn){ye[mn]&&(le[mn]=function(sn){return new Promise(function($t,tn){Ve.push([mn,sn,$t,tn])>1||Xt(mn,sn)})})}function Xt(mn,sn){try{!function jt(mn){mn.value instanceof Ee?Promise.resolve(mn.value.v).then(We,cn):Pn(Ve[0][2],mn)}(ye[mn](sn))}catch($t){Pn(Ve[0][3],$t)}}function We(mn){Xt("next",mn)}function cn(mn){Xt("throw",mn)}function Pn(mn,sn){mn(sn),Ve.shift(),Ve.length&&Xt(Ve[0][0],Ve[0][1])}}function Ze(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,re=K[Symbol.asyncIterator];return re?re.call(K):(K=function Q(K){var re="function"==typeof Symbol&&Symbol.iterator,se=re&&K[re],ye=0;if(se)return se.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ye>=K.length&&(K=void 0),{value:K&&K[ye++],done:!K}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),se={},ye("next"),ye("throw"),ye("return"),se[Symbol.asyncIterator]=function(){return this},se);function ye(Ve){se[Ve]=K[Ve]&&function(ct){return new Promise(function(Xt,jt){!function le(Ve,ct,Xt,jt){Promise.resolve(jt).then(function(We){Ve({value:We,done:Xt})},ct)}(Xt,jt,(ct=K[Ve](ct)).done,ct.value)})}}}N.d(be,{_T:()=>ie,mG:()=>ae,qq:()=>Ee,FC:()=>De,KL:()=>Ze})},5e3:(et,be,N)=>{N.d(be,{deG:()=>hc,tb:()=>Nb,AFp:()=>XT,ip1:()=>xb,CZH:()=>R_,hGG:()=>ev,z2F:()=>$_,sBO:()=>z_,Sil:()=>Ka,_Vd:()=>lg,EJc:()=>tA,SBq:()=>cg,qLn:()=>Gd,vpe:()=>Za,tBr:()=>zr,XFs:()=>ft,OlP:()=>Ln,zs3:()=>xi,ZZ4:()=>Mg,aQg:()=>sf,soG:()=>Wh,YKP:()=>ET,h0i:()=>Xc,PXZ:()=>Fi,R0b:()=>ki,FiY:()=>Ai,Lbi:()=>Pb,g9A:()=>Ob,Qsj:()=>Px,FYo:()=>hT,JOm:()=>na,q3G:()=>Zn,tp0:()=>br,Rgc:()=>pg,dDg:()=>Ya,q4F:()=>v_,GfV:()=>eb,s_b:()=>C_,ifc:()=>Zt,eFA:()=>gi,G48:()=>Hb,Gpc:()=>B,X6Q:()=>uA,_c5:()=>xg,VLi:()=>Fb,c2e:()=>zh,zSh:()=>Pp,wAp:()=>bt,vHH:()=>Oe,EiD:()=>jd,mCW:()=>g,qzn:()=>wu,JVY:()=>vm,pB0:()=>ip,eBb:()=>Ld,L6k:()=>Fd,LAX:()=>Vd,cg1:()=>r_,kL8:()=>LD,yhl:()=>fl,dqk:()=>Ht,sIi:()=>mh,CqO:()=>qE,QGY:()=>Gc,F4k:()=>GE,RDi:()=>$u,AaK:()=>ae,z3N:()=>Xi,qOj:()=>yy,TTD:()=>ma,_Bn:()=>ag,xp6:()=>es,uIk:()=>_y,Tol:()=>zy,ekj:()=>Zp,Suo:()=>lb,Xpm:()=>dt,lG2:()=>Ae,Yz7:()=>sn,cJS:()=>tn,oAB:()=>ue,Yjl:()=>qe,Y36:()=>Ga,_UZ:()=>ky,BQk:()=>Ih,ynx:()=>Pi,qZA:()=>Ch,TgZ:()=>bh,EpF:()=>Dh,n5z:()=>ao,LFG:()=>Me,$8M:()=>uo,$Z:()=>HE,NdJ:()=>Vy,CRH:()=>Bh,oxw:()=>jy,ALo:()=>MT,lcZ:()=>xT,Q6J:()=>Tl,iGM:()=>UT,MAs:()=>Dl,CHM:()=>Ia,oJD:()=>Cm,LSH:()=>up,Udp:()=>qy,d8E:()=>n_,YNc:()=>Ey,W1O:()=>fb,_uU:()=>gw,hij:()=>dr});var h=N(7579),L=N(727),P=N(9751),ie=N(6451),oe=N(3099);function fe(s){for(let o in s)if(s[o]===fe)return o;throw Error("Could not find renamed property on target object.")}function de(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function ae(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ae).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=fe({__forward_ref__:fe});function B(s){return s.__forward_ref__=B,s.toString=function(){return ae(this())},s}function Q(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===B}class Oe extends Error{constructor(o,a){super(function tt(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function Ee(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ee(s)}function Pe(s,o){const a=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${De(s)} found${a}`)}function jt(s,o){null==s&&function We(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function sn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function tn(s){return{providers:s.providers||[],imports:s.imports||[]}}function In(s){return ji(s,ti)||ji(s,Hn)}function ji(s,o){return s.hasOwnProperty(o)?s[o]:null}function $i(s){return s&&(s.hasOwnProperty(wi)||s.hasOwnProperty(Hi))?s[wi]:null}const ti=fe({\u0275prov:fe}),wi=fe({\u0275inj:fe}),Hn=fe({ngInjectableDef:fe}),Hi=fe({ngInjectorDef:fe});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Ar;function nn(s){const o=Ar;return Ar=s,o}function yr(s,o,a){const l=In(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ft.Optional?null:void 0!==o?o:void Pe(ae(s),"Injector")}function Sr(s){return{toString:s}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),Zt=(()=>{return(s=Zt||(Zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Zt;var s})();const ut="undefined"!=typeof globalThis&&globalThis,rt="undefined"!=typeof window&&window,ni="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=ut||"undefined"!=typeof global&&global||rt||ni,dn={},U=[],G=fe({\u0275cmp:fe}),z=fe({\u0275dir:fe}),ve=fe({\u0275pipe:fe}),$=fe({\u0275mod:fe}),X=fe({\u0275fac:fe}),Ne=fe({__NG_ELEMENT_ID__:fe});let Qe=0;function dt(s){return Sr(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||U,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Zt.Emulated,id:"c",styles:s.styles||U,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,y=s.pipes;return l.id+=Qe++,l.inputs=q(s.inputs,a),l.outputs=q(s.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(on):null,l.pipeDefs=y?()=>("function"==typeof y?y():y).map(vt):null,l})}function on(s){return ot(s)||function Mt(s){return s[z]||null}(s)}function vt(s){return function Kt(s){return s[ve]||null}(s)}const Gn={};function ue(s){return Sr(()=>{const o={type:s.type,bootstrap:s.bootstrap||U,declarations:s.declarations||U,imports:s.imports||U,exports:s.exports||U,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Gn[s.id]=s.type),o})}function q(s,o){if(null==s)return dn;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const Ae=dt;function qe(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function ot(s){return s[G]||null}function Ut(s,o){const a=s[$]||null;if(!a&&!0===o)throw new Error(`Type ${ae(s)} does not have '\u0275mod' property.`);return a}function bi(s){return Array.isArray(s)&&"object"==typeof s[1]}function ii(s){return Array.isArray(s)&&!0===s[1]}function Gl(s){return 0!=(8&s.flags)}function Xa(s){return 2==(2&s.flags)}function Ps(s){return 1==(1&s.flags)}function si(s){return null!==s.template}function Ed(s){return 0!=(512&s[2])}function oi(s,o){return s.hasOwnProperty(X)?s[X]:null}class Lo{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ma(){return ya}function ya(s){return s.type.prototype.ngOnChanges&&(s.setInput=Kf),bd}function bd(){const s=Kl(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===dn)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Kf(s,o,a,l){const d=Kl(s)||function ls(s,o){return s[Rs]=o}(s,{previous:dn,current:null}),p=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[a],C=y[E];p[E]=new Lo(C&&C.currentValue,o,y===dn),s[l]=o}ma.ngInherit=!0;const Rs="__ngSimpleChanges__";function Kl(s){return s[Rs]||null}let iu;function $u(s){iu=s}function cs(){return void 0!==iu?iu:"undefined"!=typeof document?document:void 0}function vn(s){return!!s.listen}const _a={createRenderer:(s,o)=>cs()};function fn(s){for(;Array.isArray(s);)s=s[0];return s}function to(s,o){return fn(o[s])}function or(s,o){return fn(o[s.index])}function kn(s,o){return s.data[o]}function ds(s,o){return s[o]}function ar(s,o){const a=o[s];return bi(a)?a:a[0]}function Vo(s){return 4==(4&s[2])}function zi(s){return 128==(128&s[2])}function $r(s,o){return null==o?null:s[o]}function Fs(s){s[18]=0}function Ls(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const gt={lFrame:io(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qu(){return gt.bindingsEnabled}function Se(){return gt.lFrame.lView}function Gt(){return gt.lFrame.tView}function Ia(s){return gt.lFrame.contextLView=s,s[8]}function xn(){let s=Vs();for(;null!==s&&64===s.type;)s=s.parent;return s}function Vs(){return gt.lFrame.currentTNode}function xr(s,o){const a=gt.lFrame;a.currentTNode=s,a.isParent=o}function zu(){return gt.lFrame.isParent}function Wu(){gt.lFrame.isParent=!1}function Ta(){return gt.isInCheckNoChangesMode}function Uo(s){gt.isInCheckNoChangesMode=s}function Wi(){return gt.lFrame.bindingIndex++}function hs(s){const o=gt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Sa(s,o){const a=gt.lFrame;a.bindingIndex=a.bindingRootIndex=s,no(o)}function no(s){gt.lFrame.currentDirectiveIndex=s}function au(s){const o=gt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function Ma(){return gt.lFrame.currentQueryIndex}function Ku(s){gt.lFrame.currentQueryIndex=s}function Yf(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function uu(s,o,a){if(a&ft.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||a&ft.Host||(d=Yf(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const l=gt.lFrame=Yu();return l.currentTNode=o,l.lView=s,!0}function ro(s){const o=Yu(),a=s[1];gt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Yu(){const s=gt.lFrame,o=null===s?null:s.child;return null===o?io(s):o}function io(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function ic(){const s=gt.lFrame;return gt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Id=ic;function Bo(){const s=ic();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ur(){return gt.lFrame.selectedIndex}function fs(s){gt.lFrame.selectedIndex=s}function On(){const s=gt.lFrame;return kn(s.tView,s.selectedIndex)}function xa(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:T,ngOnDestroy:M}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-a,y),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-a,C),T&&((s.viewHooks||(s.viewHooks=[])).push(a,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,T)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(a,M)}}function ps(s,o,a){lr(s,o,3,a)}function Oa(s,o,a,l){(3&s[2])===a&&lr(s,o,a,l)}function lu(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function lr(s,o,a,l){const p=null!=l?l:-1,y=o.length-1;let E=0;for(let C=void 0!==l?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=l&&E>=l)break}else o[C]<0&&(s[18]+=65536),(E<p||-1==p)&&(Td(s,a,o,C),s[18]=(4294901760&s[18])+C+2),C++}function Td(s,o,a,l){const d=a[l]<0,p=a[l+1],E=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class jo{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function cr(s,o,a){const l=vn(s);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const y=a[d++],E=a[d++],C=a[d++];l?s.setAttribute(o,E,C,y):o.setAttributeNS(y,E,C)}else{const y=p,E=a[++d];Pa(y)?l&&s.setProperty(o,y,E):l?s.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function Ad(s){return 3===s||4===s||6===s}function Pa(s){return 64===s.charCodeAt(0)}function cu(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||du(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function du(s,o,a,l,d){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(s[p+1]=d));if(l===s[p+1])return void(s[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,a),null!==l&&s.splice(p++,0,l),null!==d&&s.splice(p++,0,d)}function Ho(s){return-1!==s}function ys(s){return 32767&s}function Wn(s,o){let a=function En(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Et=!0;function Na(s){const o=Et;return Et=s,o}let cc=0;function fr(s,o){const a=_s(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Hr(l.data,s),Hr(o,null),Hr(l.blueprint,null));const d=Us(s,o),p=s.injectorIndex;if(Ho(d)){const y=ys(d),E=Wn(d,o),C=E[1].data;for(let T=0;T<8;T++)o[p+T]=E[y+T]|C[y+T]}return o[p+8]=d,p}function Hr(s,o){s.push(0,0,0,0,0,0,0,0,o)}function _s(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Us(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const p=d[1],y=p.type;if(l=2===y?p.declTNode:1===y?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ai(s,o,a){!function dc(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Ne)&&(l=a[Ne]),null==l&&(l=a[Ne]=cc++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function pu(s,o,a){if(a&ft.Optional)return s;Pe(o,"NodeInjector")}function Di(s,o,a,l){if(a&ft.Optional&&void 0===l&&(l=null),0==(a&(ft.Self|ft.Host))){const d=s[9],p=nn(void 0);try{return d?d.get(o,l,a&ft.Optional):yr(o,l,a&ft.Optional)}finally{nn(p)}}return pu(l,o,a)}function Ki(s,o,a,l=ft.Default,d){if(null!==s){const p=function el(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ne)?s[Ne]:void 0;return"number"==typeof o?o>=0?255&o:Fn:o}(a);if("function"==typeof p){if(!uu(o,s,l))return l&ft.Host?pu(d,a,l):Di(o,a,l,d);try{const y=p(l);if(null!=y||l&ft.Optional)return y;Pe(a)}finally{Id()}}else if("number"==typeof p){let y=null,E=_s(s,o),C=-1,T=l&ft.Host?o[16][6]:null;for((-1===E||l&ft.SkipSelf)&&(C=-1===E?Us(s,o):o[E+8],-1!==C&&Ra(l,!1)?(y=o[1],E=ys(C),o=Wn(C,o)):E=-1);-1!==E;){const M=o[1];if(tl(p,E,M.data)){const k=Yi(E,o,a,y,l,T);if(k!==Go)return k}C=o[E+8],-1!==C&&Ra(l,o[1].data[E+8]===T)&&tl(p,E,o)?(y=M,E=ys(C),o=Wn(C,o)):E=-1}}}return Di(o,a,l,d)}const Go={};function Fn(){return new oo(xn(),Se())}function Yi(s,o,a,l,d,p){const y=o[1],E=y.data[s+8],M=Xu(E,y,a,null==l?Xa(E)&&Et:l!=y&&0!=(3&E.type),d&ft.Host&&p===E);return null!==M?Qi(o,y,M,E):Go}function Xu(s,o,a,l,d){const p=s.providerIndexes,y=o.data,E=1048575&p,C=s.directiveStart,M=p>>20,j=d?E+M:s.directiveEnd;for(let ee=l?E:E+M;ee<j;ee++){const we=y[ee];if(ee<C&&a===we||ee>=C&&we.type===a)return ee}if(d){const ee=y[C];if(ee&&si(ee)&&ee.type===a)return C}return null}function Qi(s,o,a,l){let d=s[a];const p=o.data;if(function ac(s){return s instanceof jo}(d)){const y=d;y.resolving&&function Ke(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${a}`)}(De(p[a]));const E=Na(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?nn(y.injectImpl):null;uu(s,l,ft.Default);try{d=s[a]=y.factory(void 0,p,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Qf(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const y=ya(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==C&&nn(C),Na(E),y.resolving=!1,Id()}}return d}function tl(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Ra(s,o){return!(s&ft.Self||s&ft.Host&&o)}class oo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Ki(this._tNode,this._lView,o,l,a)}}function ao(s){return Sr(()=>{const o=s.prototype.constructor,a=o[X]||gu(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const p=d[X]||gu(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function gu(s){return He(s)?()=>{const o=gu(Q(s));return o&&o()}:oi(s)}function uo(s){return function fu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(Ad(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(xn(),s)}const Ti="__parameters__";function co(s,o,a){return Sr(()=>{const l=function nl(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const y=new d(...p);return E.annotation=y,E;function E(C,T,M){const k=C.hasOwnProperty(Ti)?C[Ti]:Object.defineProperty(C,Ti,{value:[]})[Ti];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(y),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Ln{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=sn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const hc=new Ln("AnalyzeForEntryComponents");function Or(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Or(l,o)):o!==s&&o.push(l)}return o}function li(s,o){s.forEach(a=>Array.isArray(a)?li(a,o):o(a))}function ho(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Hs(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function pr(s,o,a){let l=mu(s,o);return l>=0?s[1|l]=a:(l=~l,function po(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function yc(s,o){const a=mu(s,o);if(a>=0)return s[1|a]}function mu(s,o){return function yu(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const p=l+(d-l>>1),y=s[p<<a];if(o===y)return p<<a;y>o?d=p:l=p+1}return~(d<<a)}(s,o,1)}const qs={},ws="__NG_DI_FLAG__",Zo="ngTempTokenPath",al=/\n/gm,D="__source",O=fe({provide:String,useValue:fe});let F;function J(s){const o=F;return F=s,o}function ce(s,o=ft.Default){if(void 0===F)throw new Oe(203,"");return null===F?yr(s,void 0,o):F.get(s,o&ft.Optional?null:void 0,o)}function Me(s,o=ft.Default){return(function Cn(){return Ar}()||ce)(Q(s),o)}const Dt=Me;function wt(s){const o=[];for(let a=0;a<s.length;a++){const l=Q(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Oe(900,"");let d,p=ft.Default;for(let y=0;y<l.length;y++){const E=l[y],C=At(E);"number"==typeof C?-1===C?d=E.token:p|=C:d=E}o.push(Me(d,p))}else o.push(Me(l))}return o}function kt(s,o){return s[ws]=o,s.prototype[ws]=o,s}function At(s){return s[ws]}const zr=kt(co("Inject",s=>({token:s})),-1),Ai=kt(co("Optional"),8),br=kt(co("SkipSelf"),4);let Jo,dl;function ka(s){var o;return(null===(o=function cl(){if(void 0===Jo&&(Jo=null,Ht.trustedTypes))try{Jo=Ht.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Jo}())||void 0===o?void 0:o.createHTML(s))||s}function Rd(s){var o;return(null===(o=function Nd(){if(void 0===dl&&(dl=null,Ht.trustedTypes))try{dl=Ht.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return dl}())||void 0===o?void 0:o.createHTML(s))||s}class Xo{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class hl extends Xo{getTypeName(){return"HTML"}}class ym extends Xo{getTypeName(){return"Style"}}class rp extends Xo{getTypeName(){return"Script"}}class _m extends Xo{getTypeName(){return"URL"}}class o0 extends Xo{getTypeName(){return"ResourceURL"}}function Xi(s){return s instanceof Xo?s.changingThisBreaksApplicationSecurity:s}function wu(s,o){const a=fl(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function fl(s){return s instanceof Xo&&s.getTypeName()||null}function vm(s){return new hl(s)}function Fd(s){return new ym(s)}function Ld(s){return new rp(s)}function Vd(s){return new _m(s)}function ip(s){return new o0(s)}class bu{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(ka(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class Em{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=ka(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=ka(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let d=a.length-1;0<d;d--){const y=a.item(d).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const wm=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,v=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function g(s){return(s=String(s)).match(wm)||s.match(v)?s:"unsafe:"+s}function w(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function S(...s){const o={};for(const a of s)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const R=w("area,br,col,hr,img,wbr"),te=w("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Re=w("rp,rt"),Mn=S(R,S(te,w("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),S(Re,w("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),S(Re,te)),di=w("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zs=w("srcset"),pl=S(di,zs,w("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),w("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ea=w("script,style,template");class op{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!Mn.hasOwnProperty(a))return this.sanitizedSomething=!0,!ea.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let d=0;d<l.length;d++){const p=l.item(d),y=p.name,E=y.toLowerCase();if(!pl.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let C=p.value;di[E]&&(C=g(C)),zs[E]&&(s=C,C=(s=String(s)).split(",").map(o=>g(o.trim())).join(", ")),this.buf.push(" ",y,'="',Dc(C),'"')}var s;return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();Mn.hasOwnProperty(a)&&!R.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(Dc(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const Ic=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ap=/([^\#-~ |!])/g;function Dc(s){return s.replace(/&/g,"&amp;").replace(Ic,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(ap,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Cu;function jd(s,o){let a=null;try{Cu=Cu||function Ud(s){const o=new Em(s);return function Bd(){try{return!!(new window.DOMParser).parseFromString(ka(""),"text/html")}catch(s){return!1}}()?new bu(o):o}(s);let l=o?String(o):"";a=Cu.getInertBodyElement(l);let d=5,p=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=p,p=a.innerHTML,a=Cu.getInertBodyElement(l)}while(l!==p);return ka((new op).sanitizeChildren(Fa(a)||a))}finally{if(a){const l=Fa(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Fa(s){return"content"in s&&function Tc(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Zn=(()=>((Zn=Zn||{})[Zn.NONE=0]="NONE",Zn[Zn.HTML=1]="HTML",Zn[Zn.STYLE=2]="STYLE",Zn[Zn.SCRIPT=3]="SCRIPT",Zn[Zn.URL=4]="URL",Zn[Zn.RESOURCE_URL=5]="RESOURCE_URL",Zn))();function Cm(s){const o=lp();return o?Rd(o.sanitize(Zn.HTML,s)||""):wu(s,"HTML")?Rd(Xi(s)):jd(cs(),Ee(s))}function up(s){const o=lp();return o?o.sanitize(Zn.URL,s)||"":wu(s,"URL")?Xi(s):g(Ee(s))}function lp(){const s=Se();return s&&s[12]}const nI="__ngContext__";function Zr(s,o){s[nI]=o}function mo(s){const o=function $d(s){return s[nI]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function g0(s){return s.ngOriginalError}function Hd(s,...o){s.error(...o)}class Gd{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function m0(s){return s&&s.ngErrorLogger||Hd}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&g0(o);for(;a&&g0(a);)a=g0(a);return a||null}}const dI=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function ta(s){return s instanceof Function?s():s}var na=(()=>((na=na||{})[na.Important=1]="Important",na[na.DashCase=2]="DashCase",na))();function Am(s,o){return undefined(s,o)}function zd(s){const o=s[3];return ii(o)?o[3]:o}function Sm(s){return C0(s[13])}function Mm(s){return C0(s[4])}function C0(s){for(;null!==s&&!ii(s);)s=s[4];return s}function Sc(s,o,a,l,d){if(null!=l){let p,y=!1;ii(l)?p=l:bi(l)&&(y=!0,l=l[0]);const E=fn(l);0===s&&null!==a?null==d?vI(o,a,E):La(o,a,E,d||null,!0):1===s&&null!==a?La(o,a,E,d||null,!0):2===s?function pp(s,o,a){const l=Zd(s,o);l&&function gl(s,o,a,l){vn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function $m(s,o,a,l,d){const p=a[7];p!==fn(a)&&Sc(o,s,l,p,d);for(let E=10;E<a.length;E++){const C=a[E];Du(C[1],C,s,o,l,p)}}(o,s,p,a,d)}}function Om(s,o,a){if(vn(s))return s.createElement(o,a);{const l=null!==a?function ru(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function dp(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Ls(d,-1)),a.splice(l,1)}function Wd(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&dp(d,l),o>0&&(s[a-1][4]=l[4]);const p=Hs(s,10+o);!function XM(s,o){Du(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const y=p[19];null!==y&&y.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function hp(s,o){if(!(256&o[2])){const a=o[11];vn(a)&&a.destroyNode&&Du(s,o,a,3,null,null),function Pm(s){let o=s[13];if(!o)return Mi(s[1],s);for(;o;){let a=null;if(bi(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)bi(o)&&Mi(o[1],o),o=o[3];null===o&&(o=s),bi(o)&&Mi(o[1],o),a=o&&o[4]}o=a}}(o)}}function Mi(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Nm(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof jo)){const p=a[l+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=d[p[y]],C=p[y+1];try{C.call(E)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function T0(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const y=a[p+1],E="function"==typeof y?y(o):fn(o[y]),C=l[d=a[p+2]],T=a[p+3];"boolean"==typeof T?E.removeEventListener(a[p],C,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),p+=2}else{const y=l[d=a[p+1]];a[p].call(y)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();o[7]=null}}(s,o),1===o[1].type&&vn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&ii(o[3])){a!==o[3]&&dp(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function Rm(s,o,a){return function km(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===Zt.None||d===Zt.Emulated)return null}return or(l,a)}(s,o.parent,a)}function La(s,o,a,l,d){vn(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function vI(s,o,a){vn(s)?s.appendChild(o,a):o.appendChild(a)}function A0(s,o,a,l,d){null!==l?La(s,o,a,l,d):vI(s,o,a)}function Zd(s,o){return vn(s)?s.parentNode(o):o.parentNode}let Lm=function Fm(s,o,a){return 40&s.type?or(s,a):null};function Mc(s,o,a,l){const d=Rm(s,l,o),p=o[11],E=function M0(s,o,a){return Lm(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)A0(p,d,a[C],E,!1);else A0(p,d,a,E,!1)}function fp(s,o){if(null!==o){const a=o.type;if(3&a)return or(o,s);if(4&a)return Bm(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return fp(s,l);{const d=s[o.index];return ii(d)?Bm(-1,d):fn(d)}}if(32&a)return Am(o,s)()||fn(s[o.index]);{const l=Um(s,o);return null!==l?Array.isArray(l)?l[0]:fp(zd(s[16]),l):fp(s,o.next)}}return null}function Um(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Bm(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return fp(l,d)}return o[7]}function xc(s,o,a,l,d,p,y){for(;null!=a;){const E=l[a.index],C=a.type;if(y&&0===o&&(E&&Zr(fn(E),l),a.flags|=4),64!=(64&a.flags))if(8&C)xc(s,o,a.child,l,d,p,!1),Sc(o,s,d,E,p);else if(32&C){const T=Am(a,l);let M;for(;M=T();)Sc(o,s,d,M,p);Sc(o,s,d,E,p)}else 16&C?jm(s,o,l,a,d,p):Sc(o,s,d,E,p);a=y?a.projectionNext:a.next}}function Du(s,o,a,l,d,p){xc(a,l,s.firstChild,o,d,p,!1)}function jm(s,o,a,l,d,p){const y=a[16],C=y[6].projection[l.projection];if(Array.isArray(C))for(let T=0;T<C.length;T++)Sc(o,s,d,C[T],p);else xc(s,o,C,y[3],d,p,!0)}function mp(s,o,a){vn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function Oc(s,o,a){vn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function O0(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||s.charCodeAt(d+p)<=32)return d}a=d+1}}const Hm="ng-template";function Tu(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==O0(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Gm(s){return 4===s.type&&s.value!==Hm}function P0(s,o,a){return o===(4!==s.type||a?s.value:Hm)}function ra(s,o,a){let l=4;const d=s.attrs||[],p=function R0(s){for(let o=0;o<s.length;o++)if(Ad(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!y)if(4&l){if(l=2|1&l,""!==C&&!P0(s,C,a)||""===C&&1===o.length){if(Kr(l))return!1;y=!0}}else{const T=8&l?C:o[++E];if(8&l&&null!==s.attrs){if(!Tu(s.attrs,T,a)){if(Kr(l))return!1;y=!0}continue}const k=Yd(8&l?"class":C,d,Gm(s),a);if(-1===k){if(Kr(l))return!1;y=!0;continue}if(""!==T){let j;j=k>p?"":d[k+1].toLowerCase();const ee=8&l?j:null;if(ee&&-1!==O0(ee,T,0)||2&l&&T!==j){if(Kr(l))return!1;y=!0}}}}else{if(!y&&!Kr(l)&&!Kr(C))return!1;if(y&&Kr(C))continue;y=!1,l=C|1&l}}return Kr(l)||y}function Kr(s){return 0==(1&s)}function Yd(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=p?1:2}return-1}return function yp(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function N0(s,o,a=!1){for(let l=0;l<o.length;l++)if(ra(s,o[l],a))return!0;return!1}function k0(s,o){return s?":not("+o.trim()+")":o}function zm(s){let o=s[0],a=1,l=2,d="",p=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&l){const E=s[++a];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!Kr(y)&&(o+=k0(p,d),d=""),l=y,p=p||!Kr(l);a++}return""!==d&&(o+=k0(p,d)),o}const Ft={};function es(s){Wm(Gt(),Se(),ur()+s,Ta())}function Wm(s,o,a,l){if(!l)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&ps(o,p,a)}else{const p=s.preOrderHooks;null!==p&&Oa(o,p,0,a)}fs(a)}function yl(s,o){return s<<17|o<<2}function yo(s){return s>>17&32767}function L0(s){return 2|s}function Au(s){return(131068&s)>>2}function Pc(s,o){return-131069&s|o<<2}function Zm(s){return 1|s}function q0(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const y=s.data[p];Ku(d),y.contentQueries(2,o[p],p)}}}function ih(s,o,a,l,d,p,y,E,C,T){const M=o.blueprint.slice();return M[0]=d,M[2]=140|l,Fs(M),M[3]=M[15]=s,M[8]=a,M[10]=y||s&&s[10],M[11]=E||s&&s[11],M[12]=C||s&&s[12]||null,M[9]=T||s&&s[9]||null,M[6]=p,M[16]=2==o.type?s[16]:M,M}function Nc(s,o,a,l,d){let p=s.data[o];if(null===p)p=function wp(s,o,a,l,d){const p=Vs(),y=zu(),C=s.data[o]=function RI(s,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=C),null!==p&&(y?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(s,o,a,l,d),function Aa(){return gt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const y=function Da(){const s=gt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return xr(p,!0),p}function Rc(s,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function vl(s,o,a){ro(o);try{const l=s.viewQuery;null!==l&&dy(1,l,a);const d=s.template;null!==d&&W0(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&q0(s,o),s.staticViewQueries&&dy(2,s.viewQuery,a);const p=s.components;null!==p&&function z0(s,o){for(let a=0;a<o.length;a++)oE(s,o[a])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Bo()}}function kc(s,o,a,l){const d=o[2];if(256==(256&d))return;ro(o);const p=Ta();try{Fs(o),function Zu(s){return gt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&W0(s,o,a,2,l);const y=3==(3&d);if(!p)if(y){const T=s.preOrderCheckHooks;null!==T&&ps(o,T,null)}else{const T=s.preOrderHooks;null!==T&&Oa(o,T,0,null),lu(o,0)}if(function HI(s){for(let o=Sm(s);null!==o;o=Mm(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&Ls(p,1),d[2]|=1024}}}(o),function $I(s){for(let o=Sm(s);null!==o;o=Mm(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];zi(l)&&kc(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&q0(s,o),!p)if(y){const T=s.contentCheckHooks;null!==T&&ps(o,T)}else{const T=s.contentHooks;null!==T&&Oa(o,T,1),lu(o,1)}!function OI(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)fs(~d);else{const p=d,y=a[++l],E=a[++l];Sa(y,p),E(2,o[p])}}}finally{fs(-1)}}(s,o);const E=s.components;null!==E&&function PI(s,o){for(let a=0;a<o.length;a++)GI(s,o[a])}(o,E);const C=s.viewQuery;if(null!==C&&dy(2,C,l),!p)if(y){const T=s.viewCheckHooks;null!==T&&ps(o,T)}else{const T=s.viewHooks;null!==T&&Oa(o,T,2),lu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Ls(o[3],-1))}finally{Bo()}}function NI(s,o,a,l){const d=o[10],p=!Ta(),y=Vo(o);try{p&&!y&&d.begin&&d.begin(),y&&vl(s,o,l),kc(s,o,a,l)}finally{p&&!y&&d.end&&d.end()}}function W0(s,o,a,l,d){const p=ur(),y=2&l;try{fs(-1),y&&o.length>20&&Wm(s,o,20,Ta()),a(l,d)}finally{fs(p)}}function Z0(s,o,a){if(Gl(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,a[p],p)}}}function bp(s,o,a){!qu()||(function FI(s,o,a,l){const d=a.directiveStart,p=a.directiveEnd;s.firstCreatePass||fr(a,o),Zr(l,o);const y=a.initialInputs;for(let E=d;E<p;E++){const C=s.data[E],T=si(C);T&&rE(o,a,C);const M=Qi(o,s,E,a);Zr(M,o),null!==y&&jI(0,E-d,M,C,0,y),T&&(ar(a.index,o)[8]=M)}}(s,o,a,or(a,o)),128==(128&a.flags)&&function LI(s,o,a){const l=a.directiveStart,d=a.directiveEnd,y=a.index,E=function rc(){return gt.lFrame.currentDirectiveIndex}();try{fs(y);for(let C=l;C<d;C++){const T=s.data[C],M=o[C];no(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Ap(T,M)}}finally{fs(-1),no(E)}}(s,o,a))}function sy(s,o,a=or){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const y=l[p+1],E=-1===y?a(o,s):s[y];s[d++]=E}}}function bs(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Fc(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Fc(s,o,a,l,d,p,y,E,C,T){const M=20+l,k=M+d,j=function sh(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Ft);return a}(M,k),ee="function"==typeof T?T():T;return j[1]={type:s,blueprint:j,template:a,queries:null,viewQuery:E,declTNode:o,data:j.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:ee,incompleteFirstPass:!1}}function Ip(s,o,a,l){const d=hy(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&Mp(s).push(l,d.length-1))}function Y0(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function ts(s,o,a,l,d,p,y,E){const C=or(o,a);let M,T=o.inputs;!E&&null!=T&&(M=T[l])?(ch(s,a,M,l,d),Xa(o)&&function Q0(s,o){const a=ar(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function kI(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=y?y(d,o.value||"",l):d,vn(p)?p.setProperty(C,l,d):Pa(l)||(C.setProperty?C.setProperty(l,d):C[l]=d))}function oy(s,o,a,l){let d=!1;if(qu()){const p=function VI(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const y=l[p];N0(a,y.selectors,!1)&&(d||(d=[]),ai(fr(a,o),s,y.type),si(y)?(uy(s,a),d.unshift(y)):d.push(y))}return d}(s,o,a),y=null===l?null:{"":-1};if(null!==p){d=!0,tE(a,s.data.length,p.length);for(let M=0;M<p.length;M++){const k=p[M];k.providersResolver&&k.providersResolver(k)}let E=!1,C=!1,T=Rc(s,o,p.length,null);for(let M=0;M<p.length;M++){const k=p[M];a.mergedAttrs=cu(a.mergedAttrs,k.hostAttrs),nE(s,a,o,T,k),BI(T,k,y),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const j=k.type.prototype;!E&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!C&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),C=!0),T++}!function Dp(s,o){const l=o.directiveEnd,d=s.data,p=o.attrs,y=[];let E=null,C=null;for(let T=o.directiveStart;T<l;T++){const M=d[T],k=M.inputs,j=null===p||Gm(o)?null:iE(k,p);y.push(j),E=Y0(k,T,E),C=Y0(M.outputs,T,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=C}(s,a)}y&&function UI(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Oe(-301,!1);l.push(o[d],p)}}}(a,l,y)}return a.mergedAttrs=cu(a.mergedAttrs,a.attrs),d}function ay(s,o,a,l,d,p){const y=p.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function Tp(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=C&&E.push(C),E.push(l,d,y)}}function Ap(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function uy(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function BI(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;si(o)&&(a[""]=s)}}function tE(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function nE(s,o,a,l,d){s.data[l]=d;const p=d.factory||(d.factory=oi(d.type)),y=new jo(p,si(d),null);s.blueprint[l]=y,a[l]=y,ay(s,o,0,l,Rc(s,a,d.hostVars,Ft),d)}function rE(s,o,a){const l=or(o,s),d=bs(a),p=s[10],y=ah(s,ih(s,d,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));s[o.index]=y}function Cs(s,o,a,l,d,p){const y=or(s,o);!function Sp(s,o,a,l,d,p,y){if(null==p)vn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const E=null==y?Ee(p):y(p,l||"",d);vn(s)?s.setAttribute(o,d,E,a):a?o.setAttributeNS(a,d,E):o.setAttribute(d,E)}}(o[11],y,p,s.value,a,l,d)}function jI(s,o,a,l,d,p){const y=p[o];if(null!==y){const E=l.setInput;for(let C=0;C<y.length;){const T=y[C++],M=y[C++],k=y[C++];null!==E?l.setInput(a,k,T,M):a[M]=k}}}function iE(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function sE(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function GI(s,o){const a=ar(o,s);if(zi(a)){const l=a[1];80&a[2]?kc(l,a,l.template,a[8]):a[5]>0&&ly(a)}}function ly(s){for(let l=Sm(s);null!==l;l=Mm(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const y=p[1];kc(y,p,y.template,p[8])}else p[5]>0&&ly(p)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=ar(a[l],s);zi(d)&&d[5]>0&&ly(d)}}function oE(s,o){const a=ar(o,s),l=a[1];(function aE(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),vl(l,a,a[8])}function ah(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function cy(s){for(;s;){s[2]|=64;const o=zd(s);if(Ed(s)&&!o)return s;s=o}return null}function Tt(s,o,a){const l=o[10];l.begin&&l.begin();try{kc(s,o,s.template,a)}catch(d){throw lE(o,d),d}finally{l.end&&l.end()}}function hi(s){!function uE(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=mo(a),d=l[1];NI(d,l,d.template,a)}}(s[8])}function dy(s,o,a){Ku(0),o(s,a)}const zI=(()=>Promise.resolve(null))();function hy(s){return s[7]||(s[7]=[])}function Mp(s){return s.cleanup||(s.cleanup=[])}function lE(s,o){const a=s[9],l=a?a.get(Gd,null):null;l&&l.handleError(o)}function ch(s,o,a,l,d){for(let p=0;p<a.length;){const y=a[p++],E=a[p++],C=o[y],T=s.data[y];null!==T.setInput?T.setInput(C,d,l,E):C[E]=d}}function Ws(s,o,a){const l=to(o,s);!function I0(s,o,a){vn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function xp(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?d=ge(d,E):2==p&&(l=ge(l,E+": "+o[++y]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const Op=new Ln("INJECTOR",-1);class ns{get(o,a=qs){if(a===qs){const l=new Error(`NullInjectorError: No provider for ${ae(o)}!`);throw l.name="NullInjectorError",l}return a}}const Pp=new Ln("Set Injector scope."),hh={},fi={};let Lc;function fh(){return void 0===Lc&&(Lc=new ns),Lc}function dE(s,o=null,a=null,l){const d=Vc(s,o,a,l);return d._resolveInjectorDefTypes(),d}function Vc(s,o=null,a=null,l){return new Va(s,a,o||fh(),l)}class Va{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&li(a,E=>this.processProvider(E,o,a)),li([o],E=>this.processInjectorType(E,[],p)),this.records.set(Op,El(void 0,this));const y=this.records.get(Pp);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:ae(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=qs,l=ft.Default){this.assertNotDestroyed();const d=J(this),p=nn(void 0);try{if(!(l&ft.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function py(s){return"function"==typeof s||"object"==typeof s&&s instanceof Ln}(o)&&In(o);E=C&&this.injectableDefInScope(C)?El(sa(o),hh):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&ft.Self?fh():this.parent).get(o,a=l&ft.Optional&&a===qs?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Zo]=y[Zo]||[]).unshift(ae(o)),d)throw y;return function qr(s,o,a,l){const d=s[Zo];throw o[D]&&d.unshift(o[D]),s.message=function Vn(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ae(o);if(Array.isArray(o))d=o.map(ae).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):ae(E)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(al,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Zo]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{nn(p),J(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(ae(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,a,l){if(!(o=Q(o)))return!1;let d=$i(o);const p=null==d&&o.ngModule||void 0,y=void 0===p?o:p,E=-1!==l.indexOf(y);if(void 0!==p&&(d=$i(p)),null==d)return!1;if(null!=d.imports&&!E){let M;l.push(y);try{li(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===M&&(M=[]),M.push(k))})}finally{}if(void 0!==M)for(let k=0;k<M.length;k++){const{ngModule:j,providers:ee}=M[k];li(ee,we=>this.processProvider(we,j,ee||U))}}this.injectorDefTypes.add(y);const C=oi(y)||(()=>new y);this.records.set(y,El(C,hh));const T=d.providers;if(null!=T&&!E){const M=o;li(T,k=>this.processProvider(k,M,T))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let d=Zs(o=Q(o))?o:Q(o&&o.provide);const p=function ph(s,o,a){return hE(s)?El(void 0,s.useValue):El(Np(s),hh)}(o);if(Zs(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=El(void 0,hh,!0),y.factory=()=>wt(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,p)}hydrate(o,a){return a.value===hh&&(a.value=fi,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ua(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Q(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function sa(s){const o=In(s),a=null!==o?o.factory:oi(s);if(null!==a)return a;if(s instanceof Ln)throw new Oe(204,!1);if(s instanceof Function)return function pi(s){const o=s.length;if(o>0)throw function vs(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Oe(204,!1);const a=function mr(s){const o=s&&(s[ti]||s[Hn]);if(o){const a=function Sn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Oe(204,!1)}function Np(s,o,a){let l;if(Zs(s)){const d=Q(s);return oi(d)||sa(d)}if(hE(s))l=()=>Q(s.useValue);else if(function WI(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...wt(s.deps||[]));else if(function fE(s){return!(!s||!s.useExisting)}(s))l=()=>Me(Q(s.useExisting));else{const d=Q(s&&(s.useClass||s.provide));if(!function ZI(s){return!!s.deps}(s))return oi(d)||sa(d);l=()=>new d(...wt(s.deps))}return l}function El(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function hE(s){return null!==s&&"object"==typeof s&&O in s}function Zs(s){return"function"==typeof s}let xi=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return dE({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return dE({name:p},a.parent,a.providers,p)}}}return s.THROW_IF_NOT_FOUND=qs,s.NULL=new ns,s.\u0275prov=sn({token:s,providedIn:"any",factory:()=>Me(Op)}),s.__NG_ELEMENT_ID__=-1,s})();function Yr(s,o){xa(mo(s)[1],xn())}function yy(s){let o=function DE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(si(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const y=s;y.inputs=Fp(s.inputs),y.declaredInputs=Fp(s.declaredInputs),y.outputs=Fp(s.outputs);const E=d.hostBindings;E&&tD(s,E);const C=d.viewQuery,T=d.contentQueries;if(C&&eD(s,C),T&&AE(s,T),de(s.inputs,d.inputs),de(s.declaredInputs,d.declaredInputs),de(s.outputs,d.outputs),si(d)&&d.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===yy&&(a=!1)}}o=Object.getPrototypeOf(o)}!function TE(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=cu(d.hostAttrs,a=cu(a,d.hostAttrs))}}(l)}function Fp(s){return s===dn?{}:s===U?[]:s}function eD(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function AE(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function tD(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let oa=null;function zt(){if(!oa){const s=Ht.Symbol;if(s&&s.iterator)oa=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(oa=l)}}}return oa}function mh(s){return!!Vp(s)&&(Array.isArray(s)||!(s instanceof Map)&&zt()in s)}function Vp(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Cr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function _y(s,o,a,l){const d=Se();return Cr(d,Wi(),o)&&(Gt(),Cs(On(),d,s,o,a,l)),_y}function Ey(s,o,a,l,d,p,y,E){const C=Se(),T=Gt(),M=s+20,k=T.firstCreatePass?function RE(s,o,a,l,d,p,y,E,C){const T=o.consts,M=Nc(o,s,4,y||null,$r(T,E));oy(o,a,M,$r(T,C)),xa(o,M);const k=M.tViews=Fc(2,M,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,M),k.queries=o.queries.embeddedTView(M)),M}(M,T,C,o,a,l,d,p,y):T.data[M];xr(k,!1);const j=C[11].createComment("");Mc(T,C,j,k),Zr(j,C),ah(C,C[M]=sE(j,C,j,k)),Ps(k)&&bp(T,C,k),null!=y&&sy(C,k,E)}function Dl(s){return ds(function tc(){return gt.lFrame.contextLView}(),20+s)}function Ga(s,o=ft.Default){const a=Se();return null===a?Me(s,o):Ki(xn(),a,Q(s),o)}function HE(){throw new Error("invalid")}function Tl(s,o,a){const l=Se();return Cr(l,Wi(),o)&&ts(Gt(),On(),l,s,o,l[11],a,!1),Tl}function wh(s,o,a,l,d){const y=d?"class":"style";ch(s,a,o.inputs[y],y,l)}function bh(s,o,a,l){const d=Se(),p=Gt(),y=20+s,E=d[11],C=d[y]=Om(E,o,function oc(){return gt.lFrame.currentNamespace}()),T=p.firstCreatePass?function dD(s,o,a,l,d,p,y){const E=o.consts,T=Nc(o,s,2,d,$r(E,p));return oy(o,a,T,$r(E,y)),null!==T.attrs&&xp(T,T.attrs,!1),null!==T.mergedAttrs&&xp(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(y,p,d,0,o,a,l):p.data[y];xr(T,!0);const M=T.mergedAttrs;null!==M&&cr(E,C,M);const k=T.classes;null!==k&&Oc(E,C,k);const j=T.styles;return null!==j&&mp(E,C,j),64!=(64&T.flags)&&Mc(p,d,C,T),0===function wa(){return gt.lFrame.elementDepthCount}()&&Zr(C,d),function Xl(){gt.lFrame.elementDepthCount++}(),Ps(T)&&(bp(p,d,T),Z0(p,T,d)),null!==l&&sy(d,T),bh}function Ch(){let s=xn();zu()?Wu():(s=s.parent,xr(s,!1));const o=s;!function ba(){gt.lFrame.elementDepthCount--}();const a=Gt();return a.firstCreatePass&&(xa(a,s),Gl(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function lc(s){return 0!=(16&s.flags)}(o)&&wh(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Jf(s){return 0!=(32&s.flags)}(o)&&wh(a,o,Se(),o.stylesWithoutHost,!1),Ch}function ky(s,o,a,l){return bh(s,o,a,l),Ch(),ky}function Pi(s,o,a){const l=Se(),d=Gt(),p=s+20,y=d.firstCreatePass?function Fy(s,o,a,l,d){const p=o.consts,y=$r(p,l),E=Nc(o,s,8,"ng-container",y);return null!==y&&xp(E,y,!0),oy(o,a,E,$r(p,d)),null!==o.queries&&o.queries.elementStart(o,E),E}(p,d,l,o,a):d.data[p];xr(y,!0);const E=l[p]=l[11].createComment("");return Mc(d,l,E,y),Zr(E,l),Ps(y)&&(bp(d,l,y),Z0(d,y,l)),null!=a&&sy(l,y),Pi}function Ih(){let s=xn();const o=Gt();return zu()?Wu():(s=s.parent,xr(s,!1)),o.firstCreatePass&&(xa(o,s),Gl(s)&&o.queries.elementEnd(s)),Ih}function Dh(){return Se()}function Gc(s){return!!s&&"function"==typeof s.then}function GE(s){return!!s&&"function"==typeof s.subscribe}const qE=GE;function Vy(s,o,a,l){const d=Se(),p=Gt(),y=xn();return function Uy(s,o,a,l,d,p,y,E){const C=Ps(l),M=s.firstCreatePass&&Mp(s),k=o[8],j=hy(o);let ee=!0;if(3&l.type||E){const ze=or(l,o),nt=E?E(ze):ze,xe=j.length,mt=E?Jt=>E(fn(Jt[l.index])):l.index;if(vn(a)){let Jt=null;if(!E&&C&&(Jt=function zp(s,o,a,l){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const y=d[p];if(y===a&&d[p+1]===l){const E=o[7],C=d[p+2];return E.length>C?E[C]:null}"string"==typeof y&&(p+=2)}return null}(s,o,d,l.index)),null!==Jt)(Jt.__ngLastListenerFn__||Jt).__ngNextListenerFn__=p,Jt.__ngLastListenerFn__=p,ee=!1;else{p=qc(l,o,k,p,!1);const un=a.listen(nt,d,p);j.push(p,un),M&&M.push(d,mt,xe,xe+1)}}else p=qc(l,o,k,p,!0),nt.addEventListener(d,p,y),j.push(p),M&&M.push(d,mt,xe,y)}else p=qc(l,o,k,p,!1);const we=l.outputs;let je;if(ee&&null!==we&&(je=we[d])){const ze=je.length;if(ze)for(let nt=0;nt<ze;nt+=2){const Jr=o[je[nt]][je[nt+1]].subscribe(p),ku=j.length;j.push(p,Jr),M&&M.push(d,l.index,ku,-(ku+1))}}}(p,d,d[11],y,s,o,!!a,l),Vy}function By(s,o,a,l){try{return!1!==a(l)}catch(d){return lE(s,d),!1}}function qc(s,o,a,l,d){return function p(y){if(y===Function)return l;const E=2&s.flags?ar(s.index,o):o;0==(32&o[2])&&cy(E);let C=By(o,0,l,y),T=p.__ngNextListenerFn__;for(;T;)C=By(o,0,T,y)&&C,T=T.__ngNextListenerFn__;return d&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function jy(s=1){return function Zi(s){return(gt.lFrame.contextLView=function Dd(s,o){for(;s>0;)o=o[15],s--;return o}(s,gt.lFrame.contextLView))[8]}(s)}function ew(s,o,a,l,d){const p=s[a+1],y=null===o;let E=l?yo(p):Au(p),C=!1;for(;0!==E&&(!1===C||y);){const M=s[E+1];pD(s[E],o)&&(C=!0,s[E+1]=l?Zm(M):L0(M)),E=l?yo(M):Au(M)}C&&(s[a+1]=l?L0(p):Zm(p))}function pD(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&mu(s,o)>=0}const Kn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tw(s){return s.substring(Kn.key,Kn.keyEnd)}function nw(s,o){const a=Kn.textEnd;return a===o?-1:(o=Kn.keyEnd=function _D(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,Kn.key=o,a),zc(s,o,a))}function zc(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function qy(s,o,a){return Ks(s,o,a,!1),qy}function Zp(s,o){return Ks(s,o,null,!0),Zp}function zy(s){!function Io(s,o,a,l){const d=Gt(),p=hs(2);d.firstUpdatePass&&cw(d,null,p,l);const y=Se();if(a!==Ft&&Cr(y,p,a)){const E=d.data[ur()];if(Ky(E,l)&&!lw(d,p)){let C=l?E.classesWithoutHost:E.stylesWithoutHost;null!==C&&(a=ge(C,a||"")),wh(d,E,y,a,l)}else!function hw(s,o,a,l,d,p,y,E){d===Ft&&(d=U);let C=0,T=0,M=0<d.length?d[0]:null,k=0<p.length?p[0]:null;for(;null!==M||null!==k;){const j=C<d.length?d[C+1]:void 0,ee=T<p.length?p[T+1]:void 0;let je,we=null;M===k?(C+=2,T+=2,j!==ee&&(we=k,je=ee)):null===k||null!==M&&M<k?(C+=2,we=M):(T+=2,we=k,je=ee),null!==we&&fw(s,o,a,l,we,je,y,E),M=C<d.length?d[C]:null,k=T<p.length?p[T]:null}}(d,E,y,y[11],y[p+1],y[p+1]=function bD(s,o,a){if(null==a||""===a)return U;const l=[],d=Xi(a);if(Array.isArray(d))for(let p=0;p<d.length;p++)s(l,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&s(l,p,d[p]);else"string"==typeof d&&o(l,d);return l}(s,o,a),l,p)}}(pr,Co,s,!0)}function Co(s,o){for(let a=function mD(s){return function iw(s){Kn.key=0,Kn.keyEnd=0,Kn.value=0,Kn.valueEnd=0,Kn.textEnd=s.length}(s),nw(s,zc(s,0,Kn.textEnd))}(o);a>=0;a=nw(o,a))pr(s,tw(o),!0)}function Ks(s,o,a,l){const d=Se(),p=Gt(),y=hs(2);p.firstUpdatePass&&cw(p,s,y,l),o!==Ft&&Cr(d,y,o)&&fw(p,p.data[ur()],d,d[11],s,d[y+1]=function CD(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ae(Xi(s)))),s}(o,a),l,y)}function lw(s,o){return o>=s.expandoStartIndex}function cw(s,o,a,l){const d=s.data;if(null===d[a+1]){const p=d[ur()],y=lw(s,a);Ky(p,l)&&null===o&&!y&&(o=!1),o=function ED(s,o,a,l){const d=au(s);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Mh(a=Zy(null,s,o,a,l),o.attrs,l),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(a=Zy(d,s,o,a,l),null===p){let C=function dw(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Au(l))return s[yo(l)]}(s,o,l);void 0!==C&&Array.isArray(C)&&(C=Zy(null,s,o,C[1],l),C=Mh(C,o.attrs,l),function wD(s,o,a,l){s[yo(a?o.classBindings:o.styleBindings)]=l}(s,o,l,C))}else p=function Wy(s,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=Mh(l,s[p].hostAttrs,a);return Mh(l,o.attrs,a)}(s,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function fD(s,o,a,l,d,p){let y=p?o.classBindings:o.styleBindings,E=yo(y),C=Au(y);s[l]=a;let M,T=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||mu(k,M)>0)&&(T=!0)}else M=a;if(d)if(0!==C){const j=yo(s[E+1]);s[l+1]=yl(j,E),0!==j&&(s[j+1]=Pc(s[j+1],l)),s[E+1]=function bI(s,o){return 131071&s|o<<17}(s[E+1],l)}else s[l+1]=yl(E,0),0!==E&&(s[E+1]=Pc(s[E+1],l)),E=l;else s[l+1]=yl(C,0),0===E?E=l:s[C+1]=Pc(s[C+1],l),C=l;T&&(s[l+1]=L0(s[l+1])),ew(s,M,l,!0),ew(s,M,l,!1),function Sh(s,o,a,l,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&mu(p,o)>=0&&(a[l+1]=Zm(a[l+1]))}(o,M,s,l,p),y=yl(E,C),p?o.classBindings=y:o.styleBindings=y}(d,p,o,a,y,l)}}function Zy(s,o,a,l,d){let p=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(p=o[E],l=Mh(l,p.hostAttrs,d),p!==s);)E++;return null!==s&&(a.directiveStylingLast=E),l}function Mh(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?d=y:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),pr(s,y,!!a||o[++p]))}return void 0===s?null:s}function fw(s,o,a,l,d,p,y,E){if(!(3&o.type))return;const C=s.data,T=C[E+1];Yp(function V0(s){return 1==(1&s)}(T)?pw(C,o,a,d,Au(T),y):void 0)||(Yp(p)||function F0(s){return 2==(2&s)}(T)&&(p=pw(C,null,a,d,E,y)),function ml(s,o,a,l,d){const p=vn(s);if(o)d?p?s.addClass(a,l):a.classList.add(l):p?s.removeClass(a,l):a.classList.remove(l);else{let y=-1===l.indexOf("-")?void 0:na.DashCase;if(null==d)p?s.removeStyle(a,l,y):a.style.removeProperty(l);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),y|=na.Important),p?s.setStyle(a,l,d,y):a.style.setProperty(l,d,E?"important":"")}}}(l,y,to(ur(),a),d,p))}function pw(s,o,a,l,d,p){const y=null===o;let E;for(;d>0;){const C=s[d],T=Array.isArray(C),M=T?C[1]:C,k=null===M;let j=a[d+1];j===Ft&&(j=k?U:void 0);let ee=k?yc(j,l):M===l?j:void 0;if(T&&!Yp(ee)&&(ee=yc(C,l)),Yp(ee)&&(E=ee,y))return E;const we=s[d+1];d=y?yo(we):Au(we)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(E=yc(C,l))}return E}function Yp(s){return void 0!==s}function Ky(s,o){return 0!=(s.flags&(o?16:32))}function gw(s,o=""){const a=Se(),l=Gt(),d=s+20,p=l.firstCreatePass?Nc(l,d,1,o,null):l.data[d],y=a[d]=function xm(s,o){return vn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);Mc(l,a,y,p),xr(p,!1)}function dr(s,o,a){const l=Se(),d=function $a(s,o,a,l){return Cr(s,Wi(),a)?o+Ee(a)+l:Ft}(l,s,o,a);return d!==Ft&&Ws(l,ur(),d),dr}function n_(s,o,a){const l=Se();if(Cr(l,Wi(),o)){const p=Gt(),y=On();ts(p,y,l,s,o,function lh(s,o,a){return(null===s||si(s))&&(a=function su(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(a[o.index])),a[11]}(au(p.data),y,l),a,!0)}return n_}const za=void 0;var FD=["en",[["a","p"],["AM","PM"],za],[["AM","PM"],za,za],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],za,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],za,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",za,"{1} 'at' {0}",za],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function kD(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Kc={};function r_(s){const o=function Cx(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=VD(o);if(a)return a;const l=o.split("-")[0];if(a=VD(l),a)return a;if("en"===l)return FD;throw new Error(`Missing locale data for the locale "${s}".`)}function LD(s){return r_(s)[bt.PluralCase]}function VD(s){return s in Kc||(Kc[s]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[s]),Kc[s]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const ua="en-US";let Sw=ua;function Kw(s,o,a,l,d){if(s=Q(s),Array.isArray(s))for(let p=0;p<s.length;p++)Kw(s[p],o,a,l,d);else{const p=Gt(),y=Se();let E=Zs(s)?s:Q(s.provide),C=Np(s);const T=xn(),M=1048575&T.providerIndexes,k=T.directiveStart,j=T.providerIndexes>>20;if(Zs(s)||!s.multi){const ee=new jo(C,d,Ga),we=Qw(E,o,d?M:M+j,k);-1===we?(ai(fr(T,y),p,E),Yw(p,s,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(ee),y.push(ee)):(a[we]=ee,y[we]=ee)}else{const ee=Qw(E,o,M+j,k),we=Qw(E,o,M,M+j),je=ee>=0&&a[ee],ze=we>=0&&a[we];if(d&&!ze||!d&&!je){ai(fr(T,y),p,E);const nt=function Xw(s,o,a,l,d){const p=new jo(s,a,Ga);return p.multi=[],p.index=o,p.componentProviders=0,og(p,d,l&&!a),p}(d?Jw:aT,a.length,d,l,C);!d&&ze&&(a[we].providerFactory=nt),Yw(p,s,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(nt),y.push(nt)}else Yw(p,s,ee>-1?ee:we,og(a[d?we:ee],C,!d&&l));!d&&l&&ze&&a[we].componentProviders++}}}function Yw(s,o,a,l){const d=Zs(o),p=function Is(s){return!!s.useClass}(o);if(d||p){const C=(p?Q(o.useClass):o).prototype.ngOnDestroy;if(C){const T=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const M=T.indexOf(a);-1===M?T.push(a,[l,C]):T[M+1].push(l,C)}else T.push(a,C)}}}function og(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function Qw(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function aT(s,o,a,l){return y_(this.multi,[])}function Jw(s,o,a,l){const d=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Qi(a,a[1],this.providerFactory.index,l);p=E.slice(0,y),y_(d,p);for(let C=y;C<E.length;C++)p.push(E[C])}else p=[],y_(d,p);return p}function y_(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function ag(s,o=[]){return a=>{a.providersResolver=(l,d)=>function oT(s,o,a){const l=Gt();if(l.firstCreatePass){const d=si(s);Kw(a,l.data,l.blueprint,d,!0),Kw(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class uT{}class Ox{resolveComponentFactory(o){throw function __(s){const o=Error(`No component factory found for ${ae(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let lg=(()=>{class s{}return s.NULL=new Ox,s})();function cT(){return Lh(xn(),Se())}function Lh(s,o){return new cg(or(s,o))}let cg=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=cT,s})();function dT(s){return s instanceof cg?s.nativeElement:s}class hT{}let Px=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Rx(){const s=Se(),a=ar(xn().index,s);return function Nx(s){return s[11]}(bi(a)?a:s)}(),s})(),Ru=(()=>{class s{}return s.\u0275prov=sn({token:s,providedIn:"root",factory:()=>null}),s})();class eb{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const v_=new eb("13.2.7"),tb={};function Vh(s,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(fn(p)),ii(p))for(let E=10;E<p.length;E++){const C=p[E],T=C[1].firstChild;null!==T&&Vh(C[1],C,T,l)}const y=a.type;if(8&y)Vh(s,o,a.child,l);else if(32&y){const E=Am(a,o);let C;for(;C=E();)l.push(C)}else if(16&y){const E=Um(o,a);if(Array.isArray(E))l.push(...E);else{const C=zd(o[16]);Vh(C[1],C,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class Wa{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Vh(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ii(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Wd(o,l),Hs(a,l))}this._attachedToViewContainer=!1}hp(this._lView[1],this._lView)}onDestroy(o){Ip(this._lView[1],this._lView,null,o)}markForCheck(){cy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Tt(this._lView[1],this._lView,this.context)}checkNoChanges(){!function vo(s,o,a){Uo(!0);try{Tt(s,o,a)}finally{Uo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _I(s,o){Du(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class fT extends Wa{constructor(o){super(o),this._view=o}detectChanges(){hi(this._view)}checkNoChanges(){!function uh(s){Uo(!0);try{hi(s)}finally{Uo(!1)}}(this._view)}get context(){return null}}class pT extends lg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=ot(o);return new E_(a,this.ngModule)}}function dg(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class E_ extends uT{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function EI(s){return s.map(zm).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return dg(this.componentDef.inputs)}get outputs(){return dg(this.componentDef.outputs)}create(o,a,l,d){const p=(d=d||this.ngModule)?function mT(s,o){return{get:(a,l,d)=>{const p=s.get(a,tb,d);return p!==tb||l===tb?p:o.get(a,l,d)}}}(o,d.injector):o,y=p.get(hT,_a),E=p.get(Ru,null),C=y.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",M=l?function K0(s,o,a){if(vn(s))return s.selectRootElement(o,a===Zt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(C,l,this.componentDef.encapsulation):Om(y.createRenderer(null,this.componentDef),T,function gT(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(T)),k=this.componentDef.onPush?576:528,j=function XI(s,o){return{components:[],scheduler:s||dI,clean:zI,playerHandler:o||null,flags:0}}(),ee=Fc(0,null,null,1,0,null,null,null,null,null),we=ih(null,ee,j,k,null,null,y,C,E,p);let je,ze;ro(we);try{const nt=function gy(s,o,a,l,d,p){const y=a[1];a[20]=s;const C=Nc(y,20,2,"#host",null),T=C.mergedAttrs=o.hostAttrs;null!==T&&(xp(C,T,!0),null!==s&&(cr(d,s,T),null!==C.classes&&Oc(d,s,C.classes),null!==C.styles&&mp(d,s,C.styles)));const M=l.createRenderer(s,o),k=ih(a,bs(o),null,o.onPush?64:16,a[20],C,l,M,p||null,null);return y.firstCreatePass&&(ai(fr(C,a),y,o.type),uy(y,C),tE(C,a.length,1)),ah(a,k),a[20]=k}(M,this.componentDef,we,y,C);if(M)if(l)cr(C,M,["ng-version",v_.full]);else{const{attrs:xe,classes:mt}=function wI(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++l]):8===d&&a.push(p);else{if(!Kr(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);xe&&cr(C,M,xe),mt&&mt.length>0&&Oc(C,M,mt.join(" "))}if(ze=kn(ee,20),void 0!==a){const xe=ze.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Jt=a[mt];xe.push(null!=Jt?Array.from(Jt):null)}}je=function my(s,o,a,l,d){const p=a[1],y=function eE(s,o,a){const l=xn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),nE(s,l,o,Rc(s,o,1,null),a));const d=Qi(o,s,l.directiveStart,l);Zr(d,o);const p=or(l,o);return p&&Zr(p,o),d}(p,a,o);if(l.components.push(y),s[8]=y,d&&d.forEach(C=>C(y,o)),o.contentQueries){const C=xn();o.contentQueries(1,y,C.directiveStart)}const E=xn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(fs(E.index),ay(a[1],E,0,E.directiveStart,E.directiveEnd,o),Ap(o,y)),y}(nt,this.componentDef,we,j,[Yr]),vl(ee,we,null)}finally{Bo()}return new _T(this.componentType,je,Lh(ze,we),we,ze)}}class _T extends class ug{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new fT(d),this.componentType=o}get injector(){return new oo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Xc{}class ET{}const Uh=new Map;class CT extends Xc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pT(this);const l=Ut(o);this._bootstrapComponents=ta(l.bootstrap),this._r3Injector=Vc(o,a,[{provide:Xc,useValue:this},{provide:lg,useValue:this.componentFactoryResolver}],ae(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=xi.THROW_IF_NOT_FOUND,l=ft.Default){return o===xi||o===Xc||o===Op?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class w_ extends ET{constructor(o){super(),this.moduleType=o,null!==Ut(o)&&function Fx(s){const o=new Set;!function a(l){const d=Ut(l,!0),p=d.id;null!==p&&(function wT(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${ae(o)} vs ${ae(o.name)}`)}(p,Uh.get(p),l),Uh.set(p,l));const y=ta(d.imports);for(const E of y)o.has(E)||(o.add(E),a(E))}(s)}(o)}create(o){return new CT(this.moduleType,o)}}function IT(s,o,a,l,d,p){const y=o+a;return Cr(s,y,d)?function wo(s,o,a){return s[o]=a}(s,y+1,p?l.call(p,d):l(d)):function hg(s,o){const a=s[o];return a===Ft?void 0:a}(s,y+1)}function MT(s,o){const a=Gt();let l;const d=s+20;a.firstCreatePass?(l=function Wx(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const p=l.factory||(l.factory=oi(l.type)),y=nn(Ga);try{const E=Na(!1),C=p();return Na(E),function rD(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,Se(),d,C),C}finally{nn(y)}}function xT(s,o,a){const l=s+20,d=Se(),p=ds(d,l);return function fg(s,o){return s[1].data[o].pure}(d,l)?IT(d,function er(){const s=gt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,p.transform,a,p):p.transform(a)}function nb(s){return o=>{setTimeout(s,void 0,o)}}const Za=class Jx extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,p,y;let E=o,C=a||(()=>null),T=l;if(o&&"object"==typeof o){const k=o;E=null===(d=k.next)||void 0===d?void 0:d.bind(k),C=null===(p=k.error)||void 0===p?void 0:p.bind(k),T=null===(y=k.complete)||void 0===y?void 0:y.bind(k)}this.__isAsync&&(C=nb(C),E&&(E=nb(E)),T&&(T=nb(T)));const M=super.subscribe({next:E,error:C,complete:T});return o instanceof L.w0&&o.add(M),M}};function Xx(){return this._results[zt()]()}class rb{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=zt(),l=rb.prototype;l[a]||(l[a]=Xx)}get changes(){return this._changes||(this._changes=new Za)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Or(o);(this._changesDetected=!function gc(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let pg=(()=>{class s{}return s.__NG_ELEMENT_ID__=nO,s})();const eO=pg,tO=class extends eO{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=ih(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),vl(a,l,o),new Wa(l)}};function nO(){return b_(xn(),Se())}function b_(s,o){return 4&s.type?new tO(o,s,Lh(s,o)):null}let C_=(()=>{class s{}return s.__NG_ELEMENT_ID__=rO,s})();function rO(){return NT(xn(),Se())}const iO=C_,OT=class extends iO{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Lh(this._hostTNode,this._hostLView)}get injector(){return new oo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Us(this._hostTNode,this._hostLView);if(Ho(o)){const a=Wn(o,this._hostLView),l=ys(o);return new oo(a[1].data[l+8],a)}return new oo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=PT(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,p){const y=o&&!function ui(s){return"function"==typeof s}(o);let E;if(y)E=a;else{const k=a||{};E=k.index,l=k.injector,d=k.projectableNodes,p=k.ngModuleRef}const C=y?o:new E_(ot(o)),T=l||this.parentInjector;if(!p&&null==C.ngModule){const j=(y?T:this.parentInjector).get(Xc,null);j&&(p=j)}const M=C.create(T,d,void 0,p);return this.insert(M.hostView,E),M}insert(o,a){const l=o._lView,d=l[1];if(function Gu(s){return ii(s[3])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const k=l[3],j=new OT(k,k[6],k[3]);j.detach(j.indexOf(o))}}const p=this._adjustIndex(a),y=this._lContainer;!function Iu(s,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],ho(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const y=o[17];null!==y&&a!==y&&function D0(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,l,y,p);const E=Bm(p,y),C=l[11],T=Zd(C,y[7]);return null!==T&&function yI(s,o,a,l,d,p){l[0]=d,l[6]=o,Du(s,l,a,1,d,p)}(d,y[6],C,l,T,E),o.attachToViewContainerRef(),ho(ib(y),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=PT(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Wd(this._lContainer,a);l&&(Hs(ib(this._lContainer),a),hp(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Wd(this._lContainer,a);return l&&null!=Hs(ib(this._lContainer),a)?new Wa(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function PT(s){return s[8]}function ib(s){return s[8]||(s[8]=[])}function NT(s,o){let a;const l=o[s.index];if(ii(l))a=l;else{let d;if(8&s.type)d=fn(l);else{const p=o[11];d=p.createComment("");const y=or(s,o);La(p,Zd(p,y),d,function S0(s,o){return vn(s)?s.nextSibling(o):o.nextSibling}(p,y),!1)}o[s.index]=a=sE(l,o,d,s),ah(o,a)}return new OT(a,s,o)}class I_{constructor(o){this.queryList=o,this.matches=null}clone(){return new I_(this.queryList)}setDirty(){this.queryList.setDirty()}}class D_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const y=a.getByIndex(p);d.push(this.queries[y.indexInDeclarationView].clone())}return new D_(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==hb(o,a).matches&&this.queries[a].setDirty()}}class ob{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class T_{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new T_(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class A_{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new A_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,kT(a,p)),this.matchTNodeWithReadOption(o,a,Xu(a,o,p,!1,!1))}else l===pg?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Xu(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===cg||d===C_||d===pg&&4&a.type)this.addMatch(a.index,-2);else{const p=Xu(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function kT(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function LT(s,o,a,l){return-1===a?function FT(s,o){return 11&s.type?Lh(s,o):4&s.type?b_(s,o):null}(o,s):-2===a?function VT(s,o,a){return a===cg?Lh(o,s):a===pg?b_(o,s):a===C_?NT(o,s):void 0}(s,o,l):Qi(s,s[1],a,o)}function ab(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=s.data,y=a.matches,E=[];for(let C=0;C<y.length;C+=2){const T=y[C];E.push(T<0?null:LT(o,p[T],y[C+1],a.metadata.read))}d.matches=E}return d.matches}function ub(s,o,a,l){const d=s.queries.getByIndex(a),p=d.matches;if(null!==p){const y=ab(s,o,d,a);for(let E=0;E<p.length;E+=2){const C=p[E];if(C>0)l.push(y[E/2]);else{const T=p[E+1],M=o[-C];for(let k=10;k<M.length;k++){const j=M[k];j[17]===j[3]&&ub(j[1],j,T,l)}if(null!==M[9]){const k=M[9];for(let j=0;j<k.length;j++){const ee=k[j];ub(ee[1],ee,T,l)}}}}}return l}function UT(s){const o=Se(),a=Gt(),l=Ma();Ku(l+1);const d=hb(a,l);if(s.dirty&&Vo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?ub(a,o,l,[]):ab(a,o,d,l);s.reset(p,dT),s.notifyOnChanges()}return!0}return!1}function lb(s,o,a,l){const d=Gt();if(d.firstCreatePass){const p=xn();(function db(s,o,a){null===s.queries&&(s.queries=new T_),s.queries.track(new A_(o,a))})(d,new ob(o,a,l),p.index),function jT(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function S_(s,o,a){const l=new rb(4==(4&a));Ip(s,o,l,l.destroy),null===o[19]&&(o[19]=new D_),o[19].queries.push(new I_(l))}(d,Se(),a)}function Bh(){return function cb(s,o){return s[19].queries[o].queryList}(Se(),Ma())}function hb(s,o){return s.queries.getByIndex(o)}function fb(s,o){return b_(s,o)}function Eg(...s){}const xb=new Ln("Application Initializer");let R_=(()=>{class s{constructor(a){this.appInits=a,this.resolve=Eg,this.reject=Eg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Gc(p))a.push(p);else if(qE(p)){const y=new Promise((E,C)=>{p.subscribe({complete:E,error:C})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Me(xb,8))},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const XT=new Ln("AppId",{providedIn:"root",factory:function k_(){return`${F_()}${F_()}${F_()}`}});function F_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ob=new Ln("Platform Initializer"),Pb=new Ln("Platform ID"),Nb=new Ln("appBootstrapListener");let zh=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();const Wh=new Ln("LocaleId",{providedIn:"root",factory:()=>Dt(Wh,ft.Optional|ft.SkipSelf)||function eA(){return"undefined"!=typeof $localize&&$localize.locale||ua}()}),tA=new Ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class nA{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Ka=(()=>{class s{compileModuleSync(a){return new w_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=ta(Ut(a).declarations).reduce((y,E)=>{const C=ot(E);return C&&y.push(new E_(C)),y},[]);return new nA(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Nt=(()=>Promise.resolve(0))();function td(s){"undefined"==typeof Zone?Nt.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ki{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Za(!1),this.onMicrotaskEmpty=new Za(!1),this.onStable=new Za(!1),this.onError=new Za(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function L_(){let s=Ht.requestAnimationFrame,o=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function sA(s){const o=()=>{!function iA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ht,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,V_(s),s.isCheckStableRunning=!0,Zh(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),V_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,y,E)=>{try{return Nr(s),a.invokeTask(d,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Kh(s)}},onInvoke:(a,l,d,p,y,E,C)=>{try{return Nr(s),a.invoke(d,p,y,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Kh(s)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,V_(s),Zh(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ki.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ki.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+d,o,rA,Eg,Eg);try{return p.runTask(y,a,l)}finally{p.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const rA={};function Zh(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function V_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Nr(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Kh(s){s._nesting--,Zh(s)}class Qr{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Za,this.onMicrotaskEmpty=new Za,this.onStable=new Za,this.onError=new Za}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let Ya=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ki.assertNotInAngularZone(),td(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())td(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Me(ki))},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})(),kb=(()=>{class s{constructor(){this._applications=new Map,wg.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return wg.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();class oA{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function Fb(s){wg=s}let Ao,wg=new oA;const U_=new Ln("AllowMultipleToken");class Fi{constructor(o,a){this.name=o,this.token=a}}function gi(s,o,a=[]){const l=`Platform: ${o}`,d=new Ln(l);return(p=[])=>{let y=Cg();if(!y||y.injector.get(U_,!1))if(s)s(a.concat(p).concat({provide:d,useValue:!0}));else{const E=a.concat(p).concat({provide:d,useValue:!0},{provide:Pp,useValue:"platform"});!function B_(s){if(Ao&&!Ao.destroyed&&!Ao.injector.get(U_,!1))throw new Oe(400,"");Ao=s.get(j_);const o=s.get(Ob,null);o&&o.forEach(a=>a())}(xi.create({providers:E,name:l}))}return function Ub(s){const o=Cg();if(!o)throw new Oe(401,"");return o}()}}function Cg(){return Ao&&!Ao.destroyed?Ao:null}let j_=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function Bb(s,o){let a;return a="noop"===s?new Qr:("zone.js"===s?void 0:s)||new ki({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),C=[{provide:ki,useValue:E}];return E.run(()=>{const T=xi.create({providers:C,parent:this.injector,name:a.moduleType.name}),M=a.create(T),k=M.injector.get(Gd,null);if(!k)throw new Oe(402,"");return E.runOutsideAngular(()=>{const j=E.onError.subscribe({next:ee=>{k.handleError(ee)}});M.onDestroy(()=>{H_(this._modules,M),j.unsubscribe()})}),function jb(s,o,a){try{const l=a();return Gc(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(k,E,()=>{const j=M.injector.get(R_);return j.runInitializers(),j.donePromise.then(()=>(function Pr(s){jt(s,"Expected localeId to be defined"),"string"==typeof s&&(Sw=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(Wh,ua)||ua),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const d=Ig({},l);return function Lb(s,o,a){const l=new w_(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get($_);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Me(xi))},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();function Ig(s,o){return Array.isArray(o)?o.reduce(Ig,s):Object.assign(Object.assign({},s),o)}let $_=(()=>{class s{constructor(a,l,d,p,y){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new P.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),C=new P.y(T=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{ki.assertNotInAngularZone(),td(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{ki.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{M.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ie.T)(E,C.pipe((0,oe.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Oe(405,"");let d;d=a instanceof uT?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function bg(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Xc),E=d.create(xi.NULL,[],l||d.selector,p),C=E.location.nativeElement,T=E.injector.get(Ya,null),M=T&&E.injector.get(kb);return T&&M&&M.registerApplication(C,T),E.onDestroy(()=>{this.detachView(E.hostView),H_(this.components,E),M&&M.unregisterApplication(C)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;H_(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Nb,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Me(ki),Me(xi),Me(Gd),Me(lg),Me(R_))},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function H_(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let Dg=!0,G_=!1;function uA(){return G_=!0,Dg}function Hb(){if(G_)throw new Error("Cannot enable prod mode after platform setup.");Dg=!1}let z_=(()=>{class s{}return s.__NG_ELEMENT_ID__=lA,s})();function lA(s){return function cA(s,o,a){if(Xa(s)&&!a){const l=ar(s.index,o);return new Wa(l,l)}return 47&s.type?new Wa(o[16],o):null}(xn(),Se(),16==(16&s))}class Z_{constructor(){}supports(o){return mh(o)}create(o){return new K_(o)}}const gA=(s,o)=>o;class K_{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||gA}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const y=!l||a&&a.currentIndex<Rr(l,d,p)?a:l,E=Rr(y,d,p),C=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{p||(p=[]);const T=E-d,M=C-d;if(T!=M){for(let j=0;j<T;j++){const ee=j<p.length?p[j]:p[j]=0,we=ee+j;M<=we&&we<T&&(p[j]=ee+1)}p[y.previousIndex]=M-T}}E!==C&&o(y,E,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!mh(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,p,y,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,y,E),l=!0),a=a._next}else d=0,function nD(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[zt()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{y=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,E,y,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new Y_(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ir),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ir),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Y_{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Q_{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Ir{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new Q_,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Rr(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class rf{constructor(){}supports(o){return o instanceof Map||Vp(o)}create(){return new J_}}class J_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Vp(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,y=d._next;return p&&(p._next=y),y&&(y._prev=p),d._next=null,d._prev=null,d}const l=new mA(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class mA{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Zb(){return new Mg([new Z_])}let Mg=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Zb()),deps:[[s,new br,new Ai]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Oe(901,"")}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:Zb}),s})();function Kb(){return new sf([new rf])}let sf=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Kb()),deps:[[s,new br,new Ai]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Oe(901,"")}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:Kb}),s})();const xg=gi(null,"core",[{provide:Pb,useValue:"unknown"},{provide:j_,deps:[xi]},{provide:kb,deps:[]},{provide:zh,deps:[]}]);let ev=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Me($_))},s.\u0275mod=ue({type:s}),s.\u0275inj=tn({}),s})()},3942:(et,be,N)=>{N.d(be,{Z:()=>Oe});var h=N(2090),L=N(4859),P=N(9681),ie=N(1877);class oe{constructor(Ee,De){this._delegate=Ee,this.firebase=De,(0,P._addComponent)(Ee,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(Ee,De=P._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(Ee);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Ke=Ze.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:De})}_removeServiceInstance(Ee,De=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(De)}_addComponent(Ee){(0,P._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,P._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function ge(){const tt=function ae(tt){const Ee={},De={__esModule:!0,initializeApp:function Fe(ne,he={}){const Ie=P.initializeApp(ne,he);if((0,h.r3)(Ee,Ie.name))return Ee[Ie.name];const K=new tt(Ie,De);return Ee[Ie.name]=K,K},app:Ze,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ce(ne){const he=ne.name,Ie=he.replace("-compat","");if(P._registerComponent(ne)&&"PUBLIC"===ne.type){const K=(re=Ze())=>{if("function"!=typeof re[Ie])throw de.create("invalid-app-argument",{appName:he});return re[Ie]()};void 0!==ne.serviceProps&&(0,h.ZB)(K,ne.serviceProps),De[Ie]=K,tt.prototype[Ie]=function(...re){return this._getService.bind(this,he).apply(this,ne.multipleInstances?re:[])}}return"PUBLIC"===ne.type?De[Ie]:null},removeApp:function Ke(ne){delete Ee[ne]},useAsService:function Ge(ne,he){return"serverAuth"===he?null:he},modularAPIs:P}};function Ze(ne){if(!(0,h.r3)(Ee,ne=ne||P._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:ne});return Ee[ne]}return De.default=De,Object.defineProperty(De,"apps",{get:function Pe(){return Object.keys(Ee).map(ne=>Ee[ne])}}),Ze.App=tt,De}(oe);return tt.INTERNAL=Object.assign(Object.assign({},tt.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function Ee(De){(0,h.ZB)(tt,De)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),tt}(),B=new ie.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const tt=self.firebase.SDK_VERSION;tt&&tt.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=H;!function ke(tt){(0,P.registerVersion)("@firebase/app-compat","0.1.25",tt)}()},9681:(et,be,N)=>{N.r(be),N.d(be,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>ti,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>mn,_addOrOverwriteComponent:()=>sn,_apps:()=>cn,_clearComponents:()=>ji,_components:()=>Pn,_getProvider:()=>tn,_registerComponent:()=>$t,_removeServiceInstance:()=>In,deleteApp:()=>ft,getApp:()=>Hn,getApps:()=>Hi,initializeApp:()=>wi,onLog:()=>nn,registerVersion:()=>Cn,setLogLevel:()=>yr});var h=N(5861),L=N(4859),P=N(1877),ie=N(2090),oe=N(8766);class fe{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Ne=>{if(function de($){const X=$.getComponent();return"VERSION"===(null==X?void 0:X.type)}(Ne)){const Qe=Ne.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(Ne=>Ne).join(" ")}}const ae="@firebase/app",H=new P.Yd("@firebase/app"),jt="[DEFAULT]",We={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,Pn=new Map;function mn($,X){try{$.container.addComponent(X)}catch(Ne){H.debug(`Component ${X.name} failed to register with FirebaseApp ${$.name}`,Ne)}}function sn($,X){$.container.addOrOverwriteComponent(X)}function $t($){const X=$.name;if(Pn.has(X))return H.debug(`There were multiple attempts to register component ${X}.`),!1;Pn.set(X,$);for(const Ne of cn.values())mn(Ne,$);return!0}function tn($,X){const Ne=$.container.getProvider("heartbeat").getImmediate({optional:!0});return Ne&&Ne.triggerHeartbeat(),$.container.getProvider(X)}function In($,X,Ne=jt){tn($,X).clearInstance(Ne)}function ji(){Pn.clear()}const Sn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class $i{constructor(X,Ne,Qe){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Ne),this._name=Ne.name,this._automaticDataCollectionEnabled=Ne.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw Sn.create("app-deleted",{appName:this._name})}}const ti="9.8.1";function wi($,X={}){"object"!=typeof X&&(X={name:X});const Ne=Object.assign({name:jt,automaticDataCollectionEnabled:!1},X),Qe=Ne.name;if("string"!=typeof Qe||!Qe)throw Sn.create("bad-app-name",{appName:String(Qe)});const dt=cn.get(Qe);if(dt){if((0,ie.vZ)($,dt.options)&&(0,ie.vZ)(Ne,dt.config))return dt;throw Sn.create("duplicate-app",{appName:Qe})}const Ot=new L.H0(Qe);for(const vt of Pn.values())Ot.addComponent(vt);const on=new $i($,Ne,Ot);return cn.set(Qe,on),on}function Hn($=jt){const X=cn.get($);if(!X)throw Sn.create("no-app",{appName:$});return X}function Hi(){return Array.from(cn.values())}function ft($){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*($){const X=$.name;cn.has(X)&&(cn.delete(X),yield Promise.all($.container.getProviders().map(Ne=>Ne.delete())),$.isDeleted=!0)})).apply(this,arguments)}function Cn($,X,Ne){var Qe;let dt=null!==(Qe=We[$])&&void 0!==Qe?Qe:$;Ne&&(dt+=`-${Ne}`);const Ot=dt.match(/\s|\//),on=X.match(/\s|\//);if(Ot||on){const vt=[`Unable to register library "${dt}" with version "${X}":`];return Ot&&vt.push(`library name "${dt}" contains illegal characters (whitespace or "/")`),Ot&&on&&vt.push("and"),on&&vt.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void H.warn(vt.join(" "))}$t(new L.wA(`${dt}-version`,()=>({library:dt,version:X}),"VERSION"))}function nn($,X){if(null!==$&&"function"!=typeof $)throw Sn.create("invalid-log-argument");(0,P.Am)($,X)}function yr($){(0,P.Ub)($)}const Dn="firebase-heartbeat-store";let ir=null;function xs(){return ir||(ir=(0,oe.X3)("firebase-heartbeat-database",1,{upgrade:($,X)=>{0===X&&$.createObjectStore(Dn)}}).catch($=>{throw Sn.create("storage-open",{originalErrorMessage:$.message})})),ir}function ut(){return(ut=(0,h.Z)(function*($){try{return(yield xs()).transaction(Dn).objectStore(Dn).get(ri($))}catch(X){throw Sn.create("storage-get",{originalErrorMessage:X.message})}})).apply(this,arguments)}function rt($,X){return ni.apply(this,arguments)}function ni(){return(ni=(0,h.Z)(function*($,X){try{const Qe=(yield xs()).transaction(Dn,"readwrite");return yield Qe.objectStore(Dn).put(X,ri($)),Qe.done}catch(Ne){throw Sn.create("storage-set",{originalErrorMessage:Ne.message})}})).apply(this,arguments)}function ri($){return`${$.name}!${$.options.appId}`}class Nn{constructor(X){this.container=X,this._heartbeatsCache=null;const Ne=this.container.getProvider("app").getImmediate();this._storage=new G(Ne),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var X=this;return(0,h.Z)(function*(){const Qe=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),dt=dn();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==dt&&!X._heartbeatsCache.heartbeats.some(Ot=>Ot.date===dt))return X._heartbeatsCache.heartbeats.push({date:dt,agent:Qe}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Ot=>{const on=new Date(Ot.date).valueOf();return Date.now()-on<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,h.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Ne=dn(),{heartbeatsToSend:Qe,unsentEntries:dt}=function U($,X=1024){const Ne=[];let Qe=$.slice();for(const dt of $){const Ot=Ne.find(on=>on.agent===dt.agent);if(Ot){if(Ot.dates.push(dt.date),z(Ne)>X){Ot.dates.pop();break}}else if(Ne.push({agent:dt.agent,dates:[dt.date]}),z(Ne)>X){Ne.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:Ne,unsentEntries:Qe}}(X._heartbeatsCache.heartbeats),Ot=(0,ie.L)(JSON.stringify({version:2,heartbeats:Qe}));return X._heartbeatsCache.lastSentHeartbeatDate=Ne,dt.length>0?(X._heartbeatsCache.heartbeats=dt,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Ot})()}}function dn(){return(new Date).toISOString().substring(0,10)}class G{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,h.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function Zt($){return ut.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Ne=this;return(0,h.Z)(function*(){var Qe;if(yield Ne._canUseIndexedDBPromise){const Ot=yield Ne.read();return rt(Ne.app,{lastSentHeartbeatDate:null!==(Qe=X.lastSentHeartbeatDate)&&void 0!==Qe?Qe:Ot.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Ne=this;return(0,h.Z)(function*(){var Qe;if(yield Ne._canUseIndexedDBPromise){const Ot=yield Ne.read();return rt(Ne.app,{lastSentHeartbeatDate:null!==(Qe=X.lastSentHeartbeatDate)&&void 0!==Qe?Qe:Ot.lastSentHeartbeatDate,heartbeats:[...Ot.heartbeats,...X.heartbeats]})}})()}}function z($){return(0,ie.L)(JSON.stringify({version:2,heartbeats:$})).length}!function ve($){$t(new L.wA("platform-logger",X=>new fe(X),"PRIVATE")),$t(new L.wA("heartbeat",X=>new Nn(X),"PRIVATE")),Cn(ae,"0.7.24",$),Cn(ae,"0.7.24","esm2017"),Cn("fire-js","")}("")},4859:(et,be,N)=>{N.d(be,{wA:()=>P,H0:()=>ae});var h=N(5861),L=N(2090);class P{constructor(H,B,Q){this.name=H,this.instanceFactory=B,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const ie="[DEFAULT]";class oe{constructor(H,B){this.name=H,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const B=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has(B)){const Q=new L.BH;if(this.instancesDeferred.set(B,Q),this.isInitialized(B)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:B});He&&Q.resolve(He)}catch(He){}}return this.instancesDeferred.get(B).promise}getImmediate(H){var B;const Q=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),He=null!==(B=null==H?void 0:H.optional)&&void 0!==B&&B;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(ke){if(He)return null;throw ke}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function de(ge){return"EAGER"===ge.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:ie})}catch(B){}for(const[B,Q]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(B);try{const ke=this.getOrInitializeService({instanceIdentifier:He});Q.resolve(ke)}catch(ke){}}}}clearInstance(H=ie){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,h.Z)(function*(){const B=Array.from(H.instances.values());yield Promise.all([...B.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...B.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=ie){return this.instances.has(H)}getOptions(H=ie){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:B={}}=H,Q=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Q,options:B});for(const[ke,Oe]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(ke)&&Oe.resolve(He);return He}onInit(H,B){var Q;const He=this.normalizeInstanceIdentifier(B),ke=null!==(Q=this.onInitCallbacks.get(He))&&void 0!==Q?Q:new Set;ke.add(H),this.onInitCallbacks.set(He,ke);const Oe=this.instances.get(He);return Oe&&H(Oe,He),()=>{ke.delete(H)}}invokeOnInitCallbacks(H,B){const Q=this.onInitCallbacks.get(B);if(Q)for(const He of Q)try{He(H,B)}catch(ke){}}getOrInitializeService({instanceIdentifier:H,options:B={}}){let Q=this.instances.get(H);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=H,ge===ie?void 0:ge),options:B}),this.instances.set(H,Q),this.instancesOptions.set(H,B),this.invokeOnInitCallbacks(Q,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,Q)}catch(He){}var ge;return Q||null}normalizeInstanceIdentifier(H=ie){return this.component?this.component.multipleInstances?H:ie:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const B=this.getProvider(H.name);if(B.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);B.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const B=new oe(H,this);return this.providers.set(H,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(et,be,N)=>{N.d(be,{in:()=>L,Yd:()=>de,Ub:()=>ae,Am:()=>ge});const h=[];var L=(()=>{return(H=L||(L={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",L;var H})();const P={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},ie=L.INFO,oe={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},fe=(H,B,...Q)=>{if(B<H.logLevel)return;const He=(new Date).toISOString(),ke=oe[B];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[ke](`[${He}]  ${H.name}:`,...Q)};class de{constructor(B){this.name=B,this._logLevel=ie,this._logHandler=fe,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in L))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?P[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...B),this._logHandler(this,L.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...B),this._logHandler(this,L.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,L.INFO,...B),this._logHandler(this,L.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,L.WARN,...B),this._logHandler(this,L.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...B),this._logHandler(this,L.ERROR,...B)}}function ae(H){h.forEach(B=>{B.setLogLevel(H)})}function ge(H,B){for(const Q of h){let He=null;B&&B.level&&(He=P[B.level]),Q.userLogHandler=null===H?null:(ke,Oe,...tt)=>{const Ee=tt.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(Ke){return null}}).filter(De=>De).join(" ");Oe>=(null!=He?He:ke.logLevel)&&H({level:L[Oe].toLowerCase(),message:Ee,args:tt,type:ke.name})}}}},8766:(et,be,N)=>{N.d(be,{Lj:()=>Fe,X3:()=>Ze});var h=N(5861);let P,ie;const de=new WeakMap,ae=new WeakMap,ge=new WeakMap,H=new WeakMap,B=new WeakMap;let ke={get(he,Ie,K){if(he instanceof IDBTransaction){if("done"===Ie)return ae.get(he);if("objectStoreNames"===Ie)return he.objectStoreNames||ge.get(he);if("store"===Ie)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return De(he[Ie])},set:(he,Ie,K)=>(he[Ie]=K,!0),has:(he,Ie)=>he instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in he};function Ee(he){return"function"==typeof he?function tt(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fe(){return ie||(ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...Ie){return he.apply(Ke(this),Ie),De(de.get(this))}:function(...Ie){return De(he.apply(Ke(this),Ie))}:function(Ie,...K){const re=he.call(Ke(this),Ie,...K);return ge.set(re,Ie.sort?Ie.sort():[Ie]),De(re)}}(he):(he instanceof IDBTransaction&&function He(he){if(ae.has(he))return;const Ie=new Promise((K,re)=>{const se=()=>{he.removeEventListener("complete",ye),he.removeEventListener("error",le),he.removeEventListener("abort",le)},ye=()=>{K(),se()},le=()=>{re(he.error||new DOMException("AbortError","AbortError")),se()};he.addEventListener("complete",ye),he.addEventListener("error",le),he.addEventListener("abort",le)});ae.set(he,Ie)}(he),((he,Ie)=>Ie.some(K=>he instanceof K))(he,function oe(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,ke):he)}function De(he){if(he instanceof IDBRequest)return function Q(he){const Ie=new Promise((K,re)=>{const se=()=>{he.removeEventListener("success",ye),he.removeEventListener("error",le)},ye=()=>{K(De(he.result)),se()},le=()=>{re(he.error),se()};he.addEventListener("success",ye),he.addEventListener("error",le)});return Ie.then(K=>{K instanceof IDBCursor&&de.set(K,he)}).catch(()=>{}),B.set(Ie,he),Ie}(he);if(H.has(he))return H.get(he);const Ie=Ee(he);return Ie!==he&&(H.set(he,Ie),B.set(Ie,he)),Ie}const Ke=he=>B.get(he);function Ze(he,Ie,{blocked:K,upgrade:re,blocking:se,terminated:ye}={}){const le=indexedDB.open(he,Ie),Ve=De(le);return re&&le.addEventListener("upgradeneeded",ct=>{re(De(le.result),ct.oldVersion,ct.newVersion,De(le.transaction))}),K&&le.addEventListener("blocked",()=>K()),Ve.then(ct=>{ye&&ct.addEventListener("close",()=>ye()),se&&ct.addEventListener("versionchange",()=>se())}).catch(()=>{}),Ve}function Fe(he,{blocked:Ie}={}){const K=indexedDB.deleteDatabase(he);return Ie&&K.addEventListener("blocked",()=>Ie()),De(K).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],Ge=new Map;function ne(he,Ie){if(!(he instanceof IDBDatabase)||Ie in he||"string"!=typeof Ie)return;if(Ge.get(Ie))return Ge.get(Ie);const K=Ie.replace(/FromIndex$/,""),re=Ie!==K,se=Ce.includes(K);if(!(K in(re?IDBIndex:IDBObjectStore).prototype)||!se&&!Pe.includes(K))return;const ye=function(){var le=(0,h.Z)(function*(Ve,...ct){const Xt=this.transaction(Ve,se?"readwrite":"readonly");let jt=Xt.store;return re&&(jt=jt.index(ct.shift())),(yield Promise.all([jt[K](...ct),se&&Xt.done]))[0]});return function(ct){return le.apply(this,arguments)}}();return Ge.set(Ie,ye),ye}!function Oe(he){ke=he(ke)}(he=>AR(TR({},he),{get:(Ie,K,re)=>ne(Ie,K)||he.get(Ie,K,re),has:(Ie,K)=>!!ne(Ie,K)||he.has(Ie,K)}))},5861:(et,be,N)=>{function h(P,ie,oe,fe,de,ae,ge){try{var H=P[ae](ge),B=H.value}catch(Q){return void oe(Q)}H.done?ie(B):Promise.resolve(B).then(fe,de)}function L(P){return function(){var ie=this,oe=arguments;return new Promise(function(fe,de){var ae=P.apply(ie,oe);function ge(B){h(ae,fe,de,ge,H,"next",B)}function H(B){h(ae,fe,de,ge,H,"throw",B)}ge(void 0)})}}N.d(be,{Z:()=>L})}},et=>{et(et.s=2790)}]);